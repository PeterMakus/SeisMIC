

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>miic3.correlate API &mdash; SeisMIIC 0.1 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
        <script >mermaid.initialize({startOnLoad:true});</script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Save and Load Correlations" href="../corrdb.html" />
    <link rel="prev" title="CorrTrace, CorrStream, and CorrBulk classes" href="stream.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> SeisMIIC
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction: Noise Interferometry with Green’s Function Retrieval</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trace_data.html">Trace data</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../correlate.html">Compute and Handle Correlations</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../correlate.html#compute-correlations">Compute Correlations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correlate.html#handle-correlations">Handle Correlations</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../correlate.html#api">API</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">miic3.correlate</span></code> API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#miic3-correlate-correlate">miic3.correlate.correlate</a></li>
<li class="toctree-l4"><a class="reference internal" href="#miic3-correlate-stream">miic3.correlate.stream</a></li>
<li class="toctree-l4"><a class="reference internal" href="#miic3-correlate-stats">miic3.correlate.stats</a></li>
<li class="toctree-l4"><a class="reference internal" href="#miic3-correlate-preprocessing-stream">miic3.correlate.preprocessing_stream</a></li>
<li class="toctree-l4"><a class="reference internal" href="#miic3-correlate-preprocessing-td">miic3.correlate.preprocessing_td</a></li>
<li class="toctree-l4"><a class="reference internal" href="#miic3-correlate-preprocessing-fd">miic3.correlate.preprocessing_fd</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../corrdb.html">Save and Load Correlations</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">SeisMIIC</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../correlate.html">Compute and Handle Correlations</a> &raquo;</li>
        
      <li><code class="docutils literal notranslate"><span class="pre">miic3.correlate</span></code> API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/modules/correlate/API.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="miic3-correlate-api">
<span id="api-label"></span><h1><code class="docutils literal notranslate"><span class="pre">miic3.correlate</span></code> API<a class="headerlink" href="#miic3-correlate-api" title="Permalink to this headline">¶</a></h1>
<div class="section" id="miic3-correlate-correlate">
<h2>miic3.correlate.correlate<a class="headerlink" href="#miic3-correlate-correlate" title="Permalink to this headline">¶</a></h2>
<p>Module to compute correlations</p>
<span class="target" id="module-miic3.correlate.correlate"></span><dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p></p></dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>GNU Lesser General Public License, Version 3
(<a class="reference external" href="https://www.gnu.org/copyleft/lesser.html">https://www.gnu.org/copyleft/lesser.html</a>)</p>
</dd>
<dt class="field-odd">author</dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Monday, 29th March 2021 07:58:18 am
Last Modified: Tuesday, 20th July 2021 04:20:30 pm</p>
<dl class="py class">
<dt id="miic3.correlate.correlate.Correlator">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">miic3.correlate.correlate.</span></code><code class="sig-name descname"><span class="pre">Correlator</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">store_client</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="../trace_data/API.html#miic3.trace_data.waveform.Store_Client" title="miic3.trace_data.waveform.Store_Client"><span class="pre">miic3.trace_data.waveform.Store_Client</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/miic3/correlate/correlate.html#Correlator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.correlate.Correlator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Object to manage the actual Correlation (i.e., Green’s function retrieval)
for the database.</p>
<p>Initiates the Correlator object. When executing
<a class="reference internal" href="#miic3.correlate.correlate.Correlator.pxcorr" title="miic3.correlate.correlate.Correlator.pxcorr"><code class="xref py py-func docutils literal notranslate"><span class="pre">pxcorr()</span></code></a>, it will
actually compute the correlations and save them in an hdf5 file that
can be handled using <a class="reference internal" href="../corrdb/API.html#miic3.db.corr_hdf5.CorrelationDataBase" title="miic3.db.corr_hdf5.CorrelationDataBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrelationDataBase</span></code></a>.
Data has to be preprocessed before calling this (i.e., the data already
has to be given in an ASDF format). Consult
<code class="xref py py-class docutils literal notranslate"><span class="pre">Preprocessor</span></code> for information on
how to proceed with this.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>options</strong> (<em>dict</em><em> or </em><em>str</em>) – Dictionary containing all options for the correlation.
Can also be a path to a yaml file containing all the keys required
in options.</p>
</dd>
</dl>
<dl class="py method">
<dt id="miic3.correlate.correlate.Correlator.find_existing_times">
<code class="sig-name descname"><span class="pre">find_existing_times</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'*'</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">dict</span><a class="reference internal" href="../../_modules/miic3/correlate/correlate.html#Correlator.find_existing_times"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.correlate.Correlator.find_existing_times" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the already existing starttimes in form of a dictionary (see
below)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tag</strong> (<em>str</em>) – The tag that the waveforms are saved under</p></li>
<li><p><strong>channel</strong> (<em>str</em><em>, </em><em>optional</em>) – Channel Combination Code (e.g., CH0-CH1),
wildcards accepted. Defaults to ‘*’</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary that is structured as in the example below</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">out_dict</span> <span class="o">=</span> <span class="n">my_correlator</span><span class="o">.</span><span class="n">find_existing_times</span><span class="p">(</span><span class="s1">&#39;mytag&#39;</span><span class="p">,</span> <span class="s1">&#39;BHZ-BHH&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">out_dict</span><span class="p">)</span>
<span class="go">{&#39;NET0.STAT0&#39;: {</span>
<span class="go">    &#39;NET1.STAT1&#39;: {&#39;BHZ-BHH&#39;: [%list of starttimes] ,</span>
<span class="go">    &#39;NET2.STAT2&#39;: {&#39;BHZ-BHH&#39;:[%list of starttimes]}}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="miic3.correlate.correlate.Correlator.pxcorr">
<code class="sig-name descname"><span class="pre">pxcorr</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/miic3/correlate/correlate.html#Correlator.pxcorr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.correlate.Correlator.pxcorr" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the correlation with the parameters that were defined when
initiating the object.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.correlate.st_to_np_array">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.correlate.</span></code><code class="sig-name descname"><span class="pre">st_to_np_array</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">st</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">obspy.core.stream.Stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npts</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">,</span> </span><span class="pre">obspy.core.stream.Stream</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../../_modules/miic3/correlate/correlate.html#st_to_np_array"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.correlate.st_to_np_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts an obspy stream to a matrix with the shape (npts, st.count()).
Also returns the same stream but without the data arrays in tr.data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> (<em>Stream</em>) – Input Stream</p></li>
<li><p><strong>npts</strong> (<em>int</em>) – Maximum number of samples per Trace</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A stream and a matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.correlate.calc_cross_combis">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.correlate.</span></code><code class="sig-name descname"><span class="pre">calc_cross_combis</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">st</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">obspy.core.stream.Stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ex_corr</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'betweenStations'</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">list</span><a class="reference internal" href="../../_modules/miic3/correlate/correlate.html#calc_cross_combis"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.correlate.calc_cross_combis" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate a list of all cross correlation combination
of traces in the stream: i.e. all combination with two different
stations involved.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Stream</span></code>) – Stream holding the tracecs to be correlated</p></li>
<li><p><strong>ex_corr</strong> (<em>dict</em>) – dict holding the correlations that already exist in db</p></li>
<li><p><strong>method</strong> (<em>stringf</em>) – <p>Determines which traces of the strem are combined.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'betweenStations'</span></code>:</dt><dd><p>Traces are combined if either their station or
their network names are different.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'betweenComponents'</span></code>:</dt><dd><p>Traces are combined if their components (last
letter of channel name) names are different and their station and
network names are identical (single station cross-correlation).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'autoComponents'</span></code>:</dt><dd><p>Traces are combined only with themselves.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'allSimpleCombinations'</span></code>:</dt><dd><p>All Traces are combined once (onle one of
(0,1) and (1,0))</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'allCombinations'</span></code>:</dt><dd><p>All traces are combined in both orders ((0,1) and (1,0))</p>
</dd>
</dl>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.correlate.rotate_multi_corr_stream">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.correlate.</span></code><code class="sig-name descname"><span class="pre">rotate_multi_corr_stream</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">st</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">obspy.core.stream.Stream</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">obspy.core.stream.Stream</span><a class="reference internal" href="../../_modules/miic3/correlate/correlate.html#rotate_multi_corr_stream"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.correlate.rotate_multi_corr_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotate a stream with full Greens tensor from ENZ to RTZ</p>
<p>Take a stream with numerous correlation traces and rotate the
combinations of ENZ components into combinations of RTZ components in case
all nine components of the Green’s tensor are present. If not all nine
components are present no trace for this station combination is returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>st</strong> (<em>obspy.stream</em>) – stream with data in ENZ system</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>obspy.stream</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>stream in the RTZ system</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.correlate.sort_comb_name_alphabetically">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.correlate.</span></code><code class="sig-name descname"><span class="pre">sort_comb_name_alphabetically</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">network1</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">station1</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">network2</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">station2</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">,</span> </span><span class="pre">list</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../../_modules/miic3/correlate/correlate.html#sort_comb_name_alphabetically"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.correlate.sort_comb_name_alphabetically" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the alphabetically sorted network and station codes from the two
station.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>network1</strong> (<em>str</em>) – network code of first station</p></li>
<li><p><strong>station1</strong> (<em>str</em>) – station code of first station</p></li>
<li><p><strong>network2</strong> (<em>str</em>) – Network code of second station</p></li>
<li><p><strong>station2</strong> (<em>str</em>) – Station Code of second Station</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A tuple containing the list of the network codes sorted
and the list of the station codes sorted.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Tuple[ list, list]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">net1</span> <span class="o">=</span> <span class="s1">&#39;IU&#39;</span>  <span class="c1"># Network Code of first station</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stat1</span> <span class="o">=</span> <span class="s1">&#39;HRV&#39;</span>  <span class="c1"># Station Code of first station</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net2</span> <span class="o">=</span> <span class="s1">&#39;XN&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stat2</span> <span class="o">=</span> <span class="s1">&#39;NEP06&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">sort_comb_name_aphabetically</span><span class="p">(</span>
<span class="go">        net1, stat1, net2, stat2))</span>
<span class="go">([&#39;IU&#39;, &#39;XN&#39;], [&#39;HRV&#39;, &#39;NEP06&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">sort_comb_name_aphabetically</span><span class="p">(</span>
<span class="go">        net2, stat2, net1, stat1))</span>
<span class="go">([&#39;IU&#39;, &#39;XN&#39;], [&#39;HRV&#39;, &#39;NEP06&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Different combination</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net1</span> <span class="o">=</span> <span class="s1">&#39;YP&#39;</span>  <span class="c1"># Network Code of first station</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stat1</span> <span class="o">=</span> <span class="s1">&#39;AB3&#39;</span>  <span class="c1"># Station Code of first station</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net2</span> <span class="o">=</span> <span class="s1">&#39;XN&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stat2</span> <span class="o">=</span> <span class="s1">&#39;NEP06&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">sort_comb_name_aphabetically</span><span class="p">(</span>
<span class="go">        net1, stat1, net2, stat2))</span>
<span class="go">([&#39;XN&#39;, &#39;YP&#39;], [&#39;NEP06&#39;, &#39;AB3&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Different combination</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net1</span> <span class="o">=</span> <span class="s1">&#39;XN&#39;</span>  <span class="c1"># Network Code of first station</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stat1</span> <span class="o">=</span> <span class="s1">&#39;NEP07&#39;</span>  <span class="c1"># Station Code of first station</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net2</span> <span class="o">=</span> <span class="s1">&#39;XN&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stat2</span> <span class="o">=</span> <span class="s1">&#39;NEP06&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">sort_comb_name_aphabetically</span><span class="p">(</span>
<span class="go">        net1, stat1, net2, stat2))</span>
<span class="go">([&#39;XN&#39;, &#39;XN&#39;], [&#39;NEP06&#39;, &#39;NEP07&#39;])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.correlate.compute_network_station_combinations">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.correlate.</span></code><code class="sig-name descname"><span class="pre">compute_network_station_combinations</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">netlist</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statlist</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'betweenStations'</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">,</span> </span><span class="pre">list</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../../_modules/miic3/correlate/correlate.html#compute_network_station_combinations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.correlate.compute_network_station_combinations" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the network and station codes of the correlations for the provided
lists of networks and stations and the queried combination method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>netlist</strong> (<em>list</em>) – List of network codes</p></li>
<li><p><strong>statlist</strong> (<em>list</em>) – List of Station Codes</p></li>
<li><p><strong>method</strong> (<em>str</em><em>, </em><em>optional</em>) – The combination method to use. Has to be one of the
following: <cite>betweenStation</cite>, <cite>betweenComponents</cite>, <cite>autoComponents</cite>,
<cite>allSimpleCombinations</cite>, or <cite>allCombinations</cite>,
defaults to ‘betweenStations’.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – for unkown combination methods.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A tuple containing the list of the correlation network code
and the list of the correlation station code.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Tuple[list, list]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.correlate.preprocess_stream">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.correlate.</span></code><code class="sig-name descname"><span class="pre">preprocess_stream</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">st</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">obspy.core.stream.Stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">store_client</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="../trace_data/API.html#miic3.trace_data.waveform.Store_Client" title="miic3.trace_data.waveform.Store_Client"><span class="pre">miic3.trace_data.waveform.Store_Client</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">inv</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">obspy.core.inventory.inventory.Inventory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startt</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">obspy.core.utcdatetime.UTCDateTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endt</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">obspy.core.utcdatetime.UTCDateTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">taper_len</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampling_rate</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_response</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subdivision</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preProcessing</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">obspy.core.stream.Stream</span><a class="reference internal" href="../../_modules/miic3/correlate/correlate.html#preprocess_stream"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.correlate.preprocess_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Does the preprocessing on a per stream basis. Most of the parameters can be
fed in by using the “yaml” dict as kwargs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">obspy.core.stream.Stream</span></code>) – Input Stream to be processed</p></li>
<li><p><strong>store_client</strong> (<a class="reference internal" href="../trace_data/API.html#miic3.trace_data.waveform.Store_Client" title="miic3.trace_data.waveform.Store_Client"><code class="xref py py-class docutils literal notranslate"><span class="pre">Store_Client</span></code></a>) – Store Client for the database</p></li>
<li><p><strong>inv</strong> (<em>Inventory</em><em> or </em><em>None</em>) – Station response, can be None if <code class="docutils literal notranslate"><span class="pre">remove_response=False</span></code>.</p></li>
<li><p><strong>startt</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">obspy.UTCDateTime</span></code>) – Starttime that the stream should be clipped / padded to.</p></li>
<li><p><strong>endt</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">obspy.UTCDateTime</span></code>) – Endtime that the stream should be clipped / padded to.</p></li>
<li><p><strong>taper_len</strong> (<em>float</em>) – If the instrument response is removed, one might want to
taper to mitigate the acausal effects of the deconvolution. This is
the length of such a taper in seconds.</p></li>
<li><p><strong>sampling_rate</strong> (<em>float</em>) – the sampling rate that the stream should be resampled
to in Hz.</p></li>
<li><p><strong>remove_response</strong> (<em>bool</em>) – Should the instrument response be removed?</p></li>
<li><p><strong>subdivision</strong> (<em>dict</em>) – Dictionary holding information about the correlation
lenghts and increments.</p></li>
<li><p><strong>preProcessing</strong> (<em>List</em><em>[</em><em>dict</em><em>]</em><em>, </em><em>optional</em>) – List holding information about the different external
preprocessing functions to be applied, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – For sampling rates higher than the stream’s native
sampling rate (upsampling is not permitted).</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The preprocessed stream.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">obspy.core.stream.Stream</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.correlate.generate_corr_inc">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.correlate.</span></code><code class="sig-name descname"><span class="pre">generate_corr_inc</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">st</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">obspy.core.stream.Stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subdivision</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_len</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">obspy.core.stream.Stream</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../../_modules/miic3/correlate/correlate.html#generate_corr_inc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.correlate.generate_corr_inc" title="Permalink to this definition">¶</a></dt>
<dd><p>Subdivides the preprocessed streams into parts of equal length using
the parameters <code class="docutils literal notranslate"><span class="pre">cor_inc</span></code> and <code class="docutils literal notranslate"><span class="pre">cor_len</span></code> in <code class="docutils literal notranslate"><span class="pre">subdivision</span></code>.
This function can be acessed by several processes in parallel</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">obspy.core.stream.Stream</span></code>) – The preprocessed input stream</p></li>
<li><p><strong>subdivision</strong> (<em>dict</em>) – Dictionary holding the information about the
correlation length and increment.</p></li>
<li><p><strong>read_len</strong> (<em>int</em>) – Length to be read from disk in seconds</p></li>
</ul>
</dd>
<dt class="field-even">Yield</dt>
<dd class="field-even"><p>Equal length windows, padded with nans / masked if data is missing.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Generator[Stream]</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="miic3-correlate-stream">
<h2>miic3.correlate.stream<a class="headerlink" href="#miic3-correlate-stream" title="Permalink to this headline">¶</a></h2>
<p>Module to handle and access correlations as pythonic objects</p>
<span class="target" id="module-miic3.correlate.stream"></span><dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p></p></dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>GNU Lesser General Public License, Version 3
(<a class="reference external" href="https://www.gnu.org/copyleft/lesser.html">https://www.gnu.org/copyleft/lesser.html</a>)</p>
</dd>
<dt class="field-odd">author</dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Tuesday, 20th April 2021 04:19:35 pm
Last Modified: Monday, 19th July 2021 03:55:19 pm</p>
<dl class="py class">
<dt id="miic3.correlate.stream.CorrBulk">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">miic3.correlate.stream.</span></code><code class="sig-name descname"><span class="pre">CorrBulk</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#miic3.correlate.stats.CorrStats" title="miic3.correlate.stats.CorrStats"><span class="pre">miic3.correlate.stats.CorrStats</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statlist</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#miic3.correlate.stats.CorrStats" title="miic3.correlate.stats.CorrStats"><span class="pre">miic3.correlate.stats.CorrStats</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#CorrBulk"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.CorrBulk" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An object for faster computations on several correlations. The input
correlation contain data from only one Station-Channel pair.</p>
<dl class="py method">
<dt id="miic3.correlate.stream.CorrBulk.normalize">
<code class="sig-name descname"><span class="pre">normalize</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">starttime</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endtime</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normtype</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'energy'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#CorrBulk.normalize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.CorrBulk.normalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Correct amplitude variations with time.</p>
<p>Measure the maximum of the absolute value of the correlation matrix in
a specified lapse time window and normalize the correlation traces by
this values. A coherent phase in the respective lapse time window will
have constant ampitude afterwards..</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>starttime</strong> (<em>float</em>) – Beginning of time window in seconds with respect to
the zero position.</p></li>
<li><p><strong>endtime</strong> (<em>float</em>) – end time window in seconds with respect to the zero
position.</p></li>
<li><p><strong>normtype</strong> (<em>string</em>) – one of the following ‘energy’, ‘max’, ‘absmax’,
‘abssum’ to decide about the way to calculate the normalization.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#miic3.correlate.stream.CorrBulk" title="miic3.correlate.stream.CorrBulk">CorrBulk</a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Same object as in self, but normalised.</p>
</dd>
</dl>
<dl class="simple">
<dt>..note:: This action is performed <strong>in-place</strong>. If you would like to</dt><dd><p>keep the original data use
<code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="miic3.correlate.stream.CorrBulk.copy">
<code class="sig-name descname"><span class="pre">copy</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#CorrBulk.copy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.CorrBulk.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a copy of self</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A copy of self</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="miic3.correlate.stream.CorrBulk.correct_decay">
<code class="sig-name descname"><span class="pre">correct_decay</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#CorrBulk.correct_decay"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.CorrBulk.correct_decay" title="Permalink to this definition">¶</a></dt>
<dd><p>Correct for the amplitude decay in a correlation matrix.</p>
<p>Due to attenuation and geometrical spreading the amplitude of the
correlations decays with increasing lapse time. This decay is corrected
by dividing the correlation functions by an exponential function that
models the decay.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Self but with data corrected for amplitude decay</p>
</dd>
</dl>
<dl class="simple">
<dt>..note:: This action is performed <strong>in-place</strong>. If you would like to</dt><dd><p>keep the original data use
<code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="miic3.correlate.stream.CorrBulk.correct_stretch">
<code class="sig-name descname"><span class="pre">correct_stretch</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dv</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">miic3.monitor.dv.DV</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#CorrBulk.correct_stretch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.CorrBulk.correct_stretch" title="Permalink to this definition">¶</a></dt>
<dd><p>Correct stretching of correlation matrix</p>
<p>In the case of a homogeneous subsurface velocity change the correlation
traces are stretched or compressed. This stretching can be measured
with <cite>self.stretch</cite>. The resulting <cite>DV</cite> object can be passed to
this function to remove the stretching from the correlation matrix.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dv</strong> (<em>DV</em>) – Velocity Change object</p>
</dd>
</dl>
<dl class="simple">
<dt>..note:: This action is performed <strong>in-place</strong>. If you would like to</dt><dd><p>keep the original data use
<code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="miic3.correlate.stream.CorrBulk.envelope">
<code class="sig-name descname"><span class="pre">envelope</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#CorrBulk.envelope"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.CorrBulk.envelope" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the envelope of a correlation matrix.</p>
<p>The corrlation data of the correlation matrix are replaced by their
Hilbert envelopes.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>self with the envelope in data</p>
</dd>
</dl>
<dl class="simple">
<dt>..note:: This action is performed <strong>in-place</strong>. If you would like to</dt><dd><p>keep the original data use
<code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="miic3.correlate.stream.CorrBulk.filter">
<code class="sig-name descname"><span class="pre">filter</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">freqs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">3</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#CorrBulk.filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.CorrBulk.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters the correlation matrix in the frequency band specified in
freqs using a zero phase filter of twice the order given in order.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>freqs</strong> (<em>Tuple</em>) – lower and upper limits of the pass band in Hertz</p></li>
<li><p><strong>order</strong> (<em>int</em>) – half the order of the Butterworth filter</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self</p>
</dd>
</dl>
<dl class="simple">
<dt>..note:: This action is performed <strong>in-place</strong>. If you would like to</dt><dd><p>keep the original data use
<code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="miic3.correlate.stream.CorrBulk.extract_trace">
<code class="sig-name descname"><span class="pre">extract_trace</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'mean'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percentile</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">50.0</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#CorrBulk.extract_trace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.CorrBulk.extract_trace" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract a representative trace from a correlation matrix.</p>
<p>Extract a correlation trace from the that best represents the
correlation matrix. <code class="docutils literal notranslate"><span class="pre">Method</span></code> decides about method to extract the
trace. The following possibilities are available</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mean</span></code> averages all traces in the matrix</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">norm_mean</span></code> averages the traces normalized after normalizing for</dt><dd><p>maxima</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">similarity_percentile</span></code> averages the <code class="docutils literal notranslate"><span class="pre">percentile</span></code> % of traces</dt><dd><p>that best correlate with the mean of all traces. This will exclude
abnormal traces. <code class="docutils literal notranslate"><span class="pre">percentile</span></code> = 50 will return an average of
traces with correlation (with mean trace) above the median.</p>
</dd>
</dl>
</li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method</strong> (<em>string</em>) – method to extract the trace</p></li>
<li><p><strong>percentile</strong> (<em>float</em>) – only used for method==’similarity_percentile’</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>extracted trace</p>
</dd>
</dl>
<p>..note:: the extracted trace will also be saved in self.ref_trc</p>
</dd></dl>

<dl class="py method">
<dt id="miic3.correlate.stream.CorrBulk.mirror">
<code class="sig-name descname"><span class="pre">mirror</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#CorrBulk.mirror"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.CorrBulk.mirror" title="Permalink to this definition">¶</a></dt>
<dd><p>Average the causal and acausal (i.e., right and left) parts of the
correlation.</p>
<dl class="simple">
<dt>..note:: This action is performed <strong>in-place</strong>. If you would like to</dt><dd><p>keep the original data use
<code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="miic3.correlate.stream.CorrBulk.resample">
<code class="sig-name descname"><span class="pre">resample</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">starttimes</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">obspy.core.utcdatetime.UTCDateTime</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endtimes</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">obspy.core.utcdatetime.UTCDateTime</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#CorrBulk.resample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.CorrBulk.resample" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to create correlation matrices with constant sampling</p>
<p>When created from a CorrStream the correlation matrix contains all
available correlation traces but homogeneous sampling is not guaranteed
as correlation functions may be missing due to data gaps. This function
restructures the correlation matrix by inserting or averaging
correlation functions to provide temporally homogeneous sampling.
Inserted correlation functions consist of ‘nan’ if gaps are present and
averaging is done if more than one correlation function falls in a bin
between start_times[i] and end_times[i]. If end_time is an empty list
(default) end_times[i] is set to
start_times[i] + (start_times[1] - start_times[0])</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start_times</strong> (list of class:<cite>~obspy.core.UTCDateTime</cite> objects) – list of starting times for the bins of the new
sampling</p></li>
<li><p><strong>end_times</strong> (list of class:<cite>~obspy.core.UTCDateTime</cite> objects) – list of end times for the bins of the new
sampling</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>..note:: This action is performed <strong>in-place</strong>. If you want to keep</dt><dd><p>the original data use
<code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="miic3.correlate.stream.CorrBulk.resample_time_axis">
<code class="sig-name descname"><span class="pre">resample_time_axis</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">freq</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#CorrBulk.resample_time_axis"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.CorrBulk.resample_time_axis" title="Permalink to this definition">¶</a></dt>
<dd><p>Resample the lapse time axis of a correlation matrix. The correlations
are automatically filtered with a highpass filter of 0.4*sampling
frequency to avoid aliasing. The function decides automatically whether
to decimate or resample depending on the desired frequency</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>freq</strong> (<em>float</em>) – new sampling frequency</p>
</dd>
</dl>
<dl class="simple">
<dt>..note:: This action is performed <strong>in-place</strong>. If you want to keep</dt><dd><p>the original data use
<code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="miic3.correlate.stream.CorrBulk.smooth">
<code class="sig-name descname"><span class="pre">smooth</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wsize</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wtype</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'flat'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#CorrBulk.smooth"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.CorrBulk.smooth" title="Permalink to this definition">¶</a></dt>
<dd><p>Smoothes the correlation matrix with a given window function of the
given width along the given axis. This method is based on the
convolution of a scaled window with the signal. Each row/col
(i.e. depending on the selected <code class="docutils literal notranslate"><span class="pre">axis</span></code>) is “prepared” by introducing
reflected copies of it (with the window size) in both ends so that
transient parts are minimized in the beginning and end part of the
resulting array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>wsize</strong> (<em>int</em>) – Window size</p></li>
<li><p><strong>wtype</strong> (<em>string</em>) – Window type. It can be one of:
[‘flat’, ‘hanning’, ‘hamming’, ‘bartlett’, ‘blackman’] defaults to
‘flat’</p></li>
<li><p><strong>axis</strong> (<em>int</em>) – Axis along with apply the filter. O: smooth along
correlation lag time axis 1: smooth along time axis</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Filtered matrix</p>
</dd>
</dl>
<dl class="simple">
<dt>..note:: This action is performed <strong>in-place</strong>. If you want to keep</dt><dd><p>the original data use
<code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="miic3.correlate.stream.CorrBulk.stretch">
<code class="sig-name descname"><span class="pre">stretch</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref_trc</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tw</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stretch_range</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stretch_steps</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sides</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'both'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_sim_mat</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">miic3.monitor.dv.DV</span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#CorrBulk.stretch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.CorrBulk.stretch" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="miic3.correlate.stream.CorrBulk.save">
<code class="sig-name descname"><span class="pre">save</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#CorrBulk.save"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.CorrBulk.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the object to a numpy binary format (<strong>.npz</strong>)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – Output path</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="miic3.correlate.stream.CorrBulk.taper">
<code class="sig-name descname"><span class="pre">taper</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#CorrBulk.taper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.CorrBulk.taper" title="Permalink to this definition">¶</a></dt>
<dd><p>Taper the data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>width</strong> (<em>float</em>) – width to be tapered in seconds (per side)</p>
</dd>
</dl>
<dl class="simple">
<dt>..note:: This action is performed <strong>in-place</strong>. If you want to keep</dt><dd><p>the original data use
<code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="miic3.correlate.stream.CorrBulk.taper_center">
<code class="sig-name descname"><span class="pre">taper_center</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slope_frac</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0.05</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#CorrBulk.taper_center"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.CorrBulk.taper_center" title="Permalink to this definition">¶</a></dt>
<dd><p>Taper the central part of a correlation matrix.</p>
<p>Due to electromagnetic cross-talk, signal processing or other effects
the correlaton matrices are often contaminated around the zero lag
time. This function tapers (multiples by zero) the central part of
width <cite>width</cite>. To avoid problems with interpolation and filtering later
on this is done with cosine taper.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>width</strong> (<em>float</em>) – width of the central window to be tapered in seconds
(<strong>total length i.e., not per side</strong>).</p></li>
<li><p><strong>slope_frac</strong> (<em>float</em><em>, </em><em>optional</em>) – fraction of <cite>width</cite> used for soothing of edges,
defaults to 0.05</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The tapered matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
<dl class="simple">
<dt>..note:: This action is performed <strong>in-place</strong>. If you want to keep</dt><dd><p>the original data use
<code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="miic3.correlate.stream.CorrBulk.trim">
<code class="sig-name descname"><span class="pre">trim</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">starttime</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endtime</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#CorrBulk.trim"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.CorrBulk.trim" title="Permalink to this definition">¶</a></dt>
<dd><p>Trim the correlation matrix to the period from <cite>starttime</cite> to
<cite>endtime</cite> given in seconds from the zero position, so both can be
positive and negative.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>starttime</strong> (<em>float</em>) – start time in seconds with respect to the zero
position</p></li>
<li><p><strong>order</strong> – end time in seconds with respect to the zero position</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self</p>
</dd>
</dl>
<dl class="simple">
<dt>..note:: This action is performed <strong>in-place</strong>. If you want to keep</dt><dd><p>the original data use
<code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.stream.read_corr_bulk">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.stream.</span></code><code class="sig-name descname"><span class="pre">read_corr_bulk</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#miic3.correlate.stream.CorrBulk" title="miic3.correlate.stream.CorrBulk"><span class="pre">miic3.correlate.stream.CorrBulk</span></a><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#read_corr_bulk"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.read_corr_bulk" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a CorrBulk object from an <strong>.npz</strong> file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – Path to file</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the corresponding and converted CorrBulk object</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#miic3.correlate.stream.CorrBulk" title="miic3.correlate.stream.CorrBulk">CorrBulk</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="miic3.correlate.stream.CorrStream">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">miic3.correlate.stream.</span></code><code class="sig-name descname"><span class="pre">CorrStream</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">traces</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#CorrStream"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.CorrStream" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">obspy.core.stream.Stream</span></code></p>
<p>Baseclass to hold correlation traces. Basically just a list of the
correlation traces.</p>
<dl class="py method">
<dt id="miic3.correlate.stream.CorrStream.stack">
<code class="sig-name descname"><span class="pre">stack</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'by_length'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">starttime</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">obspy.core.utcdatetime.UTCDateTime</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endtime</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">obspy.core.utcdatetime.UTCDateTime</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stack_len</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regard_location</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#CorrStream.stack"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.CorrStream.stack" title="Permalink to this definition">¶</a></dt>
<dd><p>Average the data of all traces in the given time windows.
Will only stack data from the same network/channel/station combination.
Location codes will only optionally be regarded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>starttime</strong> (<em>UTCDateTime</em><em>, </em><em>optional</em>) – starttime of the stacking time windows. If None, the
earliest available is chosen, defaults to None.</p></li>
<li><p><strong>endtime</strong> (<em>UTCDateTime</em><em>, </em><em>optional</em>) – endtime of the stacking time windows. If None, the
latest available is chosen, defaults to None</p></li>
<li><p><strong>stack_len</strong> (<em>intorstr</em><em>, </em><em>optional</em>) – Length of one stack. Is either a value in seconds,
the special option “daily” (creates 24h stacks that always start at
midnight), or 0 for a single stack over the whole time period,
defaults to 0.</p></li>
<li><p><strong>regard_location</strong> (<em>bool</em><em>, </em><em>optional</em>) – Don’t stack correlations with varying location
code combinations, defaults to True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A stream holding the stacks.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>:class`~miic3.correlate.stream.CorrStream`</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="miic3.correlate.stream.CorrStream.slide">
<code class="sig-name descname"><span class="pre">slide</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_partially_selected</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">starttime</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">obspy.core.utcdatetime.UTCDateTime</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endtime</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">obspy.core.utcdatetime.UTCDateTime</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#CorrStream.slide"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.CorrStream.slide" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator yielding correlations that are inside of each requested time
window and inside of this stream.</p>
<p>Please keep in mind that it only returns a new view of the original
data. Any modifications are applied to the original data as well. If
you don’t want this you have to create a copy of the yielded
windows. Also be aware that if you modify the original data and you
have overlapping windows, all following windows are affected as well.</p>
<p>Not all yielded windows must have the same number of traces. The
algorithm will determine the maximal temporal extents by analysing
all Traces and then creates windows based on these times.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>window_length</strong> (<em>float</em>) – The length of the requested time window in
seconds. Note that the window length has to correspond at least to
the length of the longest correlation window (i.e., the length of
the correlated waveforms). This is because the correlations cannot
be sliced.</p></li>
<li><p><strong>step</strong> (<em>float</em>) – The step between the start times of two successive
windows in seconds. Has to be greater than 0</p></li>
<li><p><strong>include_partially_selected</strong> (<em>bool</em><em>, </em><em>optional</em>) – <p>If set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, also the half
selected time window <strong>before</strong> the requested time will be attached
Given the following stream containing 6 correlations, “|” are the
correlation starts and ends, “A” is the requested starttime and “B”
the corresponding endtime:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span>         <span class="o">|</span><span class="n">A</span>        <span class="o">|</span>         <span class="o">|</span>       <span class="n">B</span> <span class="o">|</span>         <span class="o">|</span>
<span class="mi">1</span>         <span class="mi">2</span>         <span class="mi">3</span>         <span class="mi">4</span>         <span class="mi">5</span>         <span class="mi">6</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">include_partially_selected=True</span></code> will select samples 2-4,
<code class="docutils literal notranslate"><span class="pre">include_partially_selected=False</span></code> will select samples 3-4 only.
Defaults to True.</p>
</p></li>
<li><p><strong>starttime</strong> (<em>UTCDateTime</em>) – Start the sequence at this time instead of the
earliest available starttime.</p></li>
<li><p><strong>endtime</strong> (<em>UTCDateTime</em>) – Start the sequence at this time instead of the
latest available endtime.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="miic3.correlate.stream.CorrStream.select_corr_time">
<code class="sig-name descname"><span class="pre">select_corr_time</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">starttime</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">obspy.core.utcdatetime.UTCDateTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endtime</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">obspy.core.utcdatetime.UTCDateTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_partially_selected</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#CorrStream.select_corr_time"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.CorrStream.select_corr_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Selects correlations that are inside of the requested time window.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>starttime</strong> (<em>UTCDateTime</em>) – Requested start</p></li>
<li><p><strong>endtime</strong> (<em>UTCDateTime</em>) – Requested end</p></li>
<li><p><strong>include_partially_selected</strong> (<em>bool</em><em>, </em><em>optional</em>) – <p>If set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, also the half
selected time window <strong>before</strong> the requested time will be attached
Given the following stream containing 6 correlations, “|” are the
correlation starts and ends, “A” is the requested starttime and “B”
the corresponding endtime:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span>         <span class="o">|</span><span class="n">A</span>        <span class="o">|</span>         <span class="o">|</span>       <span class="n">B</span> <span class="o">|</span>         <span class="o">|</span>
<span class="mi">1</span>         <span class="mi">2</span>         <span class="mi">3</span>         <span class="mi">4</span>         <span class="mi">5</span>         <span class="mi">6</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">include_partially_selected=True</span></code> will select samples 2-4,
<code class="docutils literal notranslate"><span class="pre">include_partially_selected=False</span></code> will select samples 3-4 only.
Defaults to True</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Correlation Stream holding all selected traces</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#miic3.correlate.stream.CorrStream" title="miic3.correlate.stream.CorrStream">CorrStream</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="miic3.correlate.stream.CorrStream.create_corr_bulk">
<code class="sig-name descname"><span class="pre">create_corr_bulk</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">network</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">station</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">times</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">obspy.core.utcdatetime.UTCDateTime</span><span class="p"><span class="pre">,</span> </span><span class="pre">obspy.core.utcdatetime.UTCDateTime</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#miic3.correlate.stream.CorrBulk" title="miic3.correlate.stream.CorrBulk"><span class="pre">miic3.correlate.stream.CorrBulk</span></a><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#CorrStream.create_corr_bulk"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.CorrStream.create_corr_bulk" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a CorrelationBulk object, which offers additional options for
faster postprocessing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>network</strong> (<em>str</em><em>, </em><em>optional</em>) – Select only this network, defaults to None</p></li>
<li><p><strong>station</strong> (<em>str</em><em>, </em><em>optional</em>) – Take data from this station, defaults to None</p></li>
<li><p><strong>channel</strong> (<em>str</em><em>, </em><em>optional</em>) – Take data from this channel, defaults to None</p></li>
<li><p><strong>location</strong> (<em>str</em><em>, </em><em>optional</em>) – Take data from only this location. Else various
locations can be processed together, defaults to None</p></li>
<li><p><strong>times</strong> (<em>Tuple</em><em>[</em><em>UTCDateTime</em><em>, </em><em>UTCDateTime</em><em>]</em><em>, </em><em>optional</em>) – Only take data from this time window, defaults to None</p></li>
<li><p><strong>inplace</strong> (<em>bool</em><em>, </em><em>optional</em>) – The original data will be deleted to save memory,
defaults to True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The CorrelationBulk object</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#miic3.correlate.stream.CorrBulk" title="miic3.correlate.stream.CorrBulk">CorrBulk</a></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function will check whether the metadata of the input
stream is identical, so that correlations from different stations,
components, or differently processed data cannot be mixed.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="miic3.correlate.stream.CorrStream.plot">
<code class="sig-name descname"><span class="pre">plot</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sort_by</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'corr_start'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timelimits</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylimits</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scalingfactor</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">matplotlib.axes._axes.Axes</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linewidth</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputfile</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#CorrStream.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.CorrStream.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a section plot of all correlations in this stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sort_by</strong> (<em>str</em><em>, </em><em>optional</em>) – Which parameter to plot against. Can be either
<code class="docutils literal notranslate"><span class="pre">corr_start</span></code> or <code class="docutils literal notranslate"><span class="pre">distance</span></code>, defaults to ‘corr_start’.</p></li>
<li><p><strong>timelimits</strong> (<em>Tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em><em>, </em><em>optional</em>) – xlimits (lag time) in seconds, defaults to None</p></li>
<li><p><strong>ylimits</strong> (<em>Tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em><em>, </em><em>optional</em>) – limits for Y-axis (either a <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.datetime</span></code>
or float in km (if plotted against distance)), defaults to None.</p></li>
<li><p><strong>scalingfactor</strong> (<em>float</em><em>, </em><em>optional</em>) – Which factor to scale the Correlations with. Play
around with this if you want to make amplitudes bigger or smaller,
defaults to None (automatically chosen).</p></li>
<li><p><strong>ax</strong> (<em>plt.Axes</em><em>, </em><em>optional</em>) – Plot in existing axes? Defaults to None</p></li>
<li><p><strong>linewidth</strong> (<em>float</em><em>, </em><em>optional</em>) – Width of the lines to plot, defaults to 0.25</p></li>
<li><p><strong>outputfile</strong> (<em>str</em><em>, </em><em>optional</em>) – Save the plot? defaults to None</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of the plot, defaults to None</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you would like to plot a subset of this stream, use
<code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code>.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="miic3.correlate.stream.CorrTrace">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">miic3.correlate.stream.</span></code><code class="sig-name descname"><span class="pre">CorrTrace</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header1</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">obspy.core.trace.Stats</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header2</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">obspy.core.trace.Stats</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inv</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">obspy.core.inventory.inventory.Inventory</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_lag</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_lag</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_header</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#CorrTrace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.CorrTrace" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">obspy.core.trace.Trace</span></code></p>
<p>Baseclass to hold correlation data. Derived from the class
<code class="xref py py-class docutils literal notranslate"><span class="pre">Trace</span></code>.</p>
<p>Initialise the correlation trace. Is done by combining the stats of the
two <code class="xref py py-class docutils literal notranslate"><span class="pre">Trace</span></code> objects’ headers. If said headers
do not contain Station information (i.e., coordinates), an
<code class="xref py py-class docutils literal notranslate"><span class="pre">Inventory</span></code> with information about both
stations should be provided as well.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>np.ndarray</em>) – The correlation data</p></li>
<li><p><strong>header1</strong> (<em>Stats</em><em>, </em><em>optional</em>) – header of the first trace, defaults to None</p></li>
<li><p><strong>header2</strong> (<em>Stats</em><em>, </em><em>optional</em>) – header of the second trace, defaults to None</p></li>
<li><p><strong>inv</strong> (<em>Inventory</em><em>, </em><em>optional</em>) – Inventory object for the stations, defaults to None</p></li>
<li><p><strong>start_lag</strong> (<em>float</em>) – The lag of the first sample of the correlation given
in seconds.</p></li>
<li><p><strong>end_lag</strong> (<em>float</em>) – The lag of the last sample of the correlation
in seconds.</p></li>
<li><p><strong>_header</strong> (<em>dict</em><em>, </em><em>optional</em>) – Already combined header, used when reading correlations
from a file, defaults to None</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="miic3.correlate.stream.CorrTrace.plot">
<code class="sig-name descname"><span class="pre">plot</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tlim</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">matplotlib.axes._axes.Axes</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputdir</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clean</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#CorrTrace.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.CorrTrace.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots thios CorrelationTrace.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tlim</strong> (<em>Tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em><em>, </em><em>optional</em>) – Limits for the lapse axis in seconds, defaults to None</p></li>
<li><p><strong>ax</strong> (<em>plt.Axes</em><em>, </em><em>optional</em>) – Plot in existing axes, defaults to None</p></li>
<li><p><strong>outputdir</strong> (<em>str</em><em>, </em><em>optional</em>) – Save this plot? Defaults to None</p></li>
<li><p><strong>clean</strong> (<em>bool</em><em>, </em><em>optional</em>) – Make a clean plot without labels &amp; axes,
defaults to False.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="miic3.correlate.stream.CorrTrace.times">
<code class="sig-name descname"><span class="pre">times</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#CorrTrace.times"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.CorrTrace.times" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience Function that returns an array holding the lag times of the
correlation.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Array with lag times</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.stream.alphabetical_correlation">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.stream.</span></code><code class="sig-name descname"><span class="pre">alphabetical_correlation</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">header1</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">obspy.core.trace.Stats</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header2</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">obspy.core.trace.Stats</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_lag</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_lag</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inv</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">obspy.core.inventory.inventory.Inventory</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#miic3.correlate.stats.CorrStats" title="miic3.correlate.stats.CorrStats"><span class="pre">miic3.correlate.stats.CorrStats</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#alphabetical_correlation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.alphabetical_correlation" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure that Correlations are always created in alphabetical order,
so that we won’t have both a correlation for AB-CD and CD-AB.
If the correlation was computed in the wrong order, the corr-data will be
flipped along the t-axis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>header1</strong> (<em>Stats</em>) – Header of the first trace.</p></li>
<li><p><strong>header2</strong> (<em>Stats</em>) – Header of the second trace</p></li>
<li><p><strong>start_lag</strong> (<em>float</em>) – start lag in s</p></li>
<li><p><strong>end_lag</strong> (<em>float</em>) – end lag in s</p></li>
<li><p><strong>data</strong> (<em>np.ndarray</em>) – The computed cross-correlation for header1-header2</p></li>
<li><p><strong>inv</strong> (<em>Inventory</em>) – The inventory holding the station coordinates. Only needed if
coords aren’t provided in stats.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the header for the CorrTrace and the data
(will also be modified in place)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Tuple[Stats, np.ndarray]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.stream.combine_stats">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.stream.</span></code><code class="sig-name descname"><span class="pre">combine_stats</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stats1</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">obspy.core.trace.Stats</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats2</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">obspy.core.trace.Stats</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_lag</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inv</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">obspy.core.inventory.inventory.Inventory</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#miic3.correlate.stats.CorrStats" title="miic3.correlate.stats.CorrStats"><span class="pre">miic3.correlate.stats.CorrStats</span></a><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#combine_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.combine_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Combine the meta-information of two ObsPy Trace.Stats objects</p>
<p>This function returns a ObsPy <code class="xref py py-class docutils literal notranslate"><span class="pre">Stats</span></code> object
obtained combining the two associated with the input Traces.
Namely <code class="docutils literal notranslate"><span class="pre">stats1</span></code> and <code class="docutils literal notranslate"><span class="pre">stats2</span></code>.</p>
<p>The fields [‘network’,’station’,’location’,’channel’] are combined in
a <code class="docutils literal notranslate"><span class="pre">-</span></code> separated fashion to create a “pseudo” SEED like <code class="docutils literal notranslate"><span class="pre">id</span></code>.</p>
<p>For all the others fields, only “common” information are retained: This
means that only keywords that exist in both dictionaries will be included
in the resulting one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stats1</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Stats</span></code>) – First Trace’s stats</p></li>
<li><p><strong>stats2</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Stats</span></code>) – Second Trace’s stats</p></li>
<li><p><strong>start_lag</strong> (<em>float</em>) – The lag of the first sample of the correlation given
in seconds (usually negative).</p></li>
<li><p><strong>inv</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Inventory</span></code>, optional) – Inventory containing the station coordinates. Only needed if
station coordinates are not in Trace.Stats. Defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Stats</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>stats</strong>: combined Stats object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.stream.compare_tr_id">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.stream.</span></code><code class="sig-name descname"><span class="pre">compare_tr_id</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tr0</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">obspy.core.trace.Trace</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tr1</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">obspy.core.trace.Trace</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regard_loc</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">bool</span><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#compare_tr_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.compare_tr_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether two traces are from the same channel, station, network, and,
optionally, location. Useful for stacking</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tr0</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Trace</span></code>) – first trace</p></li>
<li><p><strong>tr1</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Trace</span></code>) – second trace</p></li>
<li><p><strong>regard_loc</strong> (<em>bool</em>) – Regard the location code or not</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Bool whether the two are from the same (True) or not (False)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.stream.stack_st_by_group">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.stream.</span></code><code class="sig-name descname"><span class="pre">stack_st_by_group</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">st</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">obspy.core.stream.Stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regard_loc</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#miic3.correlate.stream.CorrStream" title="miic3.correlate.stream.CorrStream"><span class="pre">miic3.correlate.stream.CorrStream</span></a><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#stack_st_by_group"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.stack_st_by_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Stack all traces that belong to the same network, station, channel, and
(optionally) location combination in the input stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> (<em>Stream</em>) – input Stream</p></li>
<li><p><strong>regard_loc</strong> (<em>bool</em>) – Seperate data with different location code</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#miic3.correlate.stream.CorrStream" title="miic3.correlate.stream.CorrStream"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrStream</span></code></a></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#miic3.correlate.stream.CorrStream" title="miic3.correlate.stream.CorrStream">CorrStream</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.stream.stack_st">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.stream.</span></code><code class="sig-name descname"><span class="pre">stack_st</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">st</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#miic3.correlate.stream.CorrStream" title="miic3.correlate.stream.CorrStream"><span class="pre">miic3.correlate.stream.CorrStream</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#miic3.correlate.stream.CorrTrace" title="miic3.correlate.stream.CorrTrace"><span class="pre">miic3.correlate.stream.CorrTrace</span></a><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#stack_st"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.stack_st" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an average of the data of all traces in the stream. Also adjusts
the corr_start and corr_end parameters in the header.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> (<a class="reference internal" href="#miic3.correlate.stream.CorrStream" title="miic3.correlate.stream.CorrStream"><em>CorrStream</em></a>) – input Stream</p></li>
<li><p><strong>weight</strong> – type of weigthing to use. Either <cite>mean</cite> or <cite>by_length</cite></p></li>
<li><p><strong>norm</strong> (<em>bool</em>) – Should the traces be normalised by their absolute maximum
prior to stacking?</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Single trace with stacked data</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#miic3.correlate.stream.CorrTrace" title="miic3.correlate.stream.CorrTrace">CorrTrace</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.stream.convert_statlist_to_bulk_stats">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.stream.</span></code><code class="sig-name descname"><span class="pre">convert_statlist_to_bulk_stats</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statlist</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#miic3.correlate.stats.CorrStats" title="miic3.correlate.stats.CorrStats"><span class="pre">miic3.correlate.stats.CorrStats</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varying_loc</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#miic3.correlate.stats.CorrStats" title="miic3.correlate.stats.CorrStats"><span class="pre">miic3.correlate.stats.CorrStats</span></a><a class="reference internal" href="../../_modules/miic3/correlate/stream.html#convert_statlist_to_bulk_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stream.convert_statlist_to_bulk_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a list of <a class="reference internal" href="#miic3.correlate.stream.CorrTrace" title="miic3.correlate.stream.CorrTrace"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrTrace</span></code></a> stats objects
to a single stats object that can be used for the creation of a
<a class="reference internal" href="#miic3.correlate.stream.CorrBulk" title="miic3.correlate.stream.CorrBulk"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrBulk</span></code></a> object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>statlist</strong> (<em>List</em><em>[</em><em>Stats</em><em>]</em>) – list of Stats</p></li>
<li><p><strong>varying_loc</strong> (<em>False</em>) – Set true if the location codes vary</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – raised if data does not fit together</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>single Stats object</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Stats</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="miic3-correlate-stats">
<h2>miic3.correlate.stats<a class="headerlink" href="#miic3-correlate-stats" title="Permalink to this headline">¶</a></h2>
<p>Managing headers</p>
<span class="target" id="module-miic3.correlate.stats"></span><dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p></p></dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>GNU Lesser General Public License, Version 3
(<a class="reference external" href="https://www.gnu.org/copyleft/lesser.html">https://www.gnu.org/copyleft/lesser.html</a>)</p>
</dd>
<dt class="field-odd">author</dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Monday, 5th July 2021 02:44:13 pm
Last Modified: Thursday, 8th July 2021 05:21:21 pm</p>
<dl class="py class">
<dt id="miic3.correlate.stats.CorrStats">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">miic3.correlate.stats.</span></code><code class="sig-name descname"><span class="pre">CorrStats</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/miic3/correlate/stats.html#CorrStats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.stats.CorrStats" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">obspy.core.util.attribdict.AttribDict</span></code></p>
<p>From Obspy, but with the difference that some items can be lists and that
corr_start and corr_end are introduced, some other differences only for
correlations.</p>
<p>A container for additional header information of a ObsPy Trace object.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">Stats</span></code> object may contain all header information (also known as meta
data) of a <a class="reference internal" href="#miic3.correlate.stream.CorrTrace" title="miic3.correlate.stream.CorrTrace"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrTrace</span></code></a> object. Those headers
may be accessed or modified either in the dictionary style or directly via
a corresponding attribute. There are various default attributes which are
required by every waveform import and export modules within ObsPy such as
<code class="xref py py-mod docutils literal notranslate"><span class="pre">obspy.io.mseed</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>header</strong> (dict or <code class="xref py py-class docutils literal notranslate"><span class="pre">Stats</span></code>, optional) – Dictionary containing meta information of a single
<code class="xref py py-class docutils literal notranslate"><span class="pre">Trace</span></code> object. Possible keywords are
summarized in the following <a class="reference internal" href="#default-attributes">Default Attributes</a> section.</p>
</dd>
</dl>
<p class="rubric">Basic Usage</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span> <span class="o">=</span> <span class="n">CorrStats</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;BW&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">stats</span><span class="p">[</span><span class="s1">&#39;network&#39;</span><span class="p">])</span>
<span class="go">BW</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="p">[</span><span class="s1">&#39;station&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;MANZ&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">stats</span><span class="o">.</span><span class="n">station</span><span class="p">)</span>
<span class="go">MANZ</span>
</pre></div>
</div>
<p class="rubric"><span class="target" id="default-attributes">Default Attributes</span></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">sampling_rate</span></code><span class="classifier">float, optional</span></dt><dd><p>Sampling rate in hertz (default value is 1.0).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">delta</span></code><span class="classifier">float, optional</span></dt><dd><p>Sample distance in seconds (default value is 1.0).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">calib</span></code><span class="classifier">float, optional</span></dt><dd><p>Calibration factor (default value is 1.0).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">npts</span></code><span class="classifier">int, optional</span></dt><dd><p>Number of sample points (default value is 0, which implies that no data
is present).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">network</span></code><span class="classifier">string, optional</span></dt><dd><p>Network code (default is an empty string).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">location</span></code><span class="classifier">string, optional</span></dt><dd><p>Location code (default is an empty string).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">station</span></code><span class="classifier">string, optional</span></dt><dd><p>Station code (default is an empty string).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">channel</span></code><span class="classifier">string, optional</span></dt><dd><p>Channel code (default is an empty string).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">starttime</span></code><span class="classifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">UTCDateTime</span></code>, optional</span></dt><dd><p>Date and time of the first data sample used for correlation in UTC
(default value is “1970-01-01T00:00:00.0Z”).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">endtime</span></code><span class="classifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">UTCDateTime</span></code>, optional</span></dt><dd><p>Date and time of the last data sample used for correlation in UTC
(default value is “1970-01-01T00:00:00.0Z”).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">corr_start</span></code>: <code class="xref py py-class docutils literal notranslate"><span class="pre">UTCDateTime</span></code>, optional</dt><dd><p>Date and time of the first data sample used for correlation in UTC
(default value is “1970-01-01T00:00:00.0Z”).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">corr_end</span></code>: <code class="xref py py-class docutils literal notranslate"><span class="pre">UTCDateTime</span></code>, optional</dt><dd><p>Date and time of the last data sample used for correlation in UTC
(default value is “1970-01-01T00:00:00.0Z”).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">start_lag</span></code>: float, optional</dt><dd><p>Lag of the first sample in seconds (usually negative)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">end_lag</span></code>: float, optional</dt><dd><p>Lag of the last sample in seconds.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<ol class="arabic">
<li><p>The attributes <code class="docutils literal notranslate"><span class="pre">sampling_rate</span></code> and <code class="docutils literal notranslate"><span class="pre">delta</span></code> are linked to each
other. If one of the attributes is modified the other will be
recalculated.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span> <span class="o">=</span> <span class="n">Stats</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">sampling_rate</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">delta</span> <span class="o">=</span> <span class="mf">0.005</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">sampling_rate</span>
<span class="go">200.0</span>
</pre></div>
</div>
</li>
<li><p>The attributes <code class="docutils literal notranslate"><span class="pre">start_lag</span></code>, <code class="docutils literal notranslate"><span class="pre">npts</span></code>, <code class="docutils literal notranslate"><span class="pre">sampling_rate</span></code> and <code class="docutils literal notranslate"><span class="pre">delta</span></code>
are monitored and used to automatically calculate the <code class="docutils literal notranslate"><span class="pre">end_lag</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span> <span class="o">=</span> <span class="n">Stats</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">npts</span> <span class="o">=</span> <span class="mi">61</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">delta</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">start_lag</span> <span class="o">=</span> <span class="o">-</span><span class="mi">30</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">end_lag</span>
<span class="go">30</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">delta</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">end_lag</span>
<span class="go">0</span>
</pre></div>
</div>
</li>
<li><p>The attribute <code class="docutils literal notranslate"><span class="pre">endtime</span></code>, <code class="docutils literal notranslate"><span class="pre">end_lag</span></code>, and <code class="docutils literal notranslate"><span class="pre">starttime</span></code> are
read only and cannot be modified. <code class="docutils literal notranslate"><span class="pre">starttime</span></code> and <code class="docutils literal notranslate"><span class="pre">endtime</span></code> are
just simply aliases of <code class="docutils literal notranslate"><span class="pre">corr_start</span></code> and <code class="docutils literal notranslate"><span class="pre">corr_end</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span> <span class="o">=</span> <span class="n">Stats</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">endtime</span> <span class="o">=</span> <span class="n">UTCDateTime</span><span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">AttributeError</span>: <span class="n">Attribute &quot;endtime&quot; in Stats object is read only!</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="p">[</span><span class="s1">&#39;endtime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">UTCDateTime</span><span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">AttributeError</span>: <span class="n">Attribute &quot;endtime&quot; in Stats object is read only!</span>
</pre></div>
</div>
</li>
<li><p>The attribute <code class="docutils literal notranslate"><span class="pre">npts</span></code> will be automatically updated from the
<a class="reference internal" href="#miic3.correlate.stream.CorrTrace" title="miic3.correlate.stream.CorrTrace"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrTrace</span></code></a> object.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">trace</span> <span class="o">=</span> <span class="n">CorrTrace</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">npts</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trace</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">npts</span>
<span class="go">4</span>
</pre></div>
</div>
</li>
<li><p>The attribute <code class="docutils literal notranslate"><span class="pre">component</span></code> can be used to get or set the component,
i.e. the last character of the <code class="docutils literal notranslate"><span class="pre">channel</span></code> attribute.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span> <span class="o">=</span> <span class="n">Stats</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">channel</span> <span class="o">=</span> <span class="s1">&#39;HHZ&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">component</span>  
<span class="go">&#39;Z&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="s1">&#39;L&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">channel</span>  
<span class="go">&#39;HHL&#39;</span>
</pre></div>
</div>
</li>
</ol>
<dl class="py attribute">
<dt id="miic3.correlate.stats.CorrStats.readonly">
<code class="sig-name descname"><span class="pre">readonly</span></code><em class="property"> <span class="pre">=</span> <span class="pre">['endtime',</span> <span class="pre">'end_lag',</span> <span class="pre">'starttime']</span></em><a class="headerlink" href="#miic3.correlate.stats.CorrStats.readonly" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="miic3.correlate.stats.CorrStats.defaults">
<code class="sig-name descname"><span class="pre">defaults</span></code><em class="property"> <span class="pre">=</span> <span class="pre">{'calib':</span> <span class="pre">1.0,</span> <span class="pre">'channel':</span> <span class="pre">'',</span> <span class="pre">'corr_end':</span> <span class="pre">UTCDateTime(1970,</span> <span class="pre">1,</span> <span class="pre">1,</span> <span class="pre">0,</span> <span class="pre">0),</span> <span class="pre">'corr_start':</span> <span class="pre">UTCDateTime(1970,</span> <span class="pre">1,</span> <span class="pre">1,</span> <span class="pre">0,</span> <span class="pre">0),</span> <span class="pre">'delta':</span> <span class="pre">1.0,</span> <span class="pre">'end_lag':</span> <span class="pre">0,</span> <span class="pre">'endtime':</span> <span class="pre">UTCDateTime(1970,</span> <span class="pre">1,</span> <span class="pre">1,</span> <span class="pre">0,</span> <span class="pre">0),</span> <span class="pre">'location':</span> <span class="pre">'',</span> <span class="pre">'network':</span> <span class="pre">'',</span> <span class="pre">'npts':</span> <span class="pre">0,</span> <span class="pre">'sampling_rate':</span> <span class="pre">1.0,</span> <span class="pre">'start_lag':</span> <span class="pre">0,</span> <span class="pre">'starttime':</span> <span class="pre">UTCDateTime(1970,</span> <span class="pre">1,</span> <span class="pre">1,</span> <span class="pre">0,</span> <span class="pre">0),</span> <span class="pre">'station':</span> <span class="pre">''}</span></em><a class="headerlink" href="#miic3.correlate.stats.CorrStats.defaults" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="miic3-correlate-preprocessing-stream">
<h2>miic3.correlate.preprocessing_stream<a class="headerlink" href="#miic3-correlate-preprocessing-stream" title="Permalink to this headline">¶</a></h2>
<p>Preprocessing functions that are executed on Obspy Streams</p>
<span class="target" id="module-miic3.correlate.preprocessing_stream"></span><p>Module that contains functions for preprocessing on obspy streams</p>
<dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p></p></dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p><cite>GNU Lesser General Public License, Version 3 &lt;https://www.gnu.org/copyleft/lesser.html&gt;</cite></p>
</dd>
<dt class="field-odd">author</dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Tuesday, 20th July 2021 03:47:00 pm
Last Modified: Tuesday, 20th July 2021 03:51:46 pm</p>
<dl class="py function">
<dt id="miic3.correlate.preprocessing_stream.cos_taper_st">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.preprocessing_stream.</span></code><code class="sig-name descname"><span class="pre">cos_taper_st</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">st</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">obspy.core.stream.Stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">taper_len</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">taper_at_masked</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">obspy.core.stream.Stream</span><a class="reference internal" href="../../_modules/miic3/correlate/preprocessing_stream.html#cos_taper_st"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.preprocessing_stream.cos_taper_st" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies a cosine taper to the input Stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tr</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Stream</span></code>) – Input Stream</p></li>
<li><p><strong>taper_len</strong> (<em>float</em>) – Length of the taper per side</p></li>
<li><p><strong>taper_at_masked</strong> (<em>bool</em>) – applies a split to each trace and merges again
afterwards</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Tapered Stream</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Stream</span></code></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This action is performed in place. If you want to keep the
original data use <code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code>.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.preprocessing_stream.cos_taper">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.preprocessing_stream.</span></code><code class="sig-name descname"><span class="pre">cos_taper</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tr</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">obspy.core.trace.Trace</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">taper_len</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">taper_at_masked</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">obspy.core.trace.Trace</span><a class="reference internal" href="../../_modules/miic3/correlate/preprocessing_stream.html#cos_taper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.preprocessing_stream.cos_taper" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies a cosine taper to the input trace.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tr</strong> (<em>Trace</em>) – Input Trace</p></li>
<li><p><strong>taper_len</strong> (<em>float</em>) – Length of the taper per side in seconds</p></li>
<li><p><strong>taper_at_masked</strong> (<em>bool</em>) – applies a split to each trace and merges again
afterwards</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Tapered Trace</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Trace</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This action is performed in place. If you want to keep the
original data use <code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code>.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.preprocessing_stream.detrend_st">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.preprocessing_stream.</span></code><code class="sig-name descname"><span class="pre">detrend_st</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">st</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">obspy.core.stream.Stream</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">obspy.core.stream.Stream</span><a class="reference internal" href="../../_modules/miic3/correlate/preprocessing_stream.html#detrend_st"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.preprocessing_stream.detrend_st" title="Permalink to this definition">¶</a></dt>
<dd><p>Detrends a stream while dealing with data gaps</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>st</strong> (<em>Stream</em>) – input Stream</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the obspy Stream detrended</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Stream</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This action is performed in place. If you want to keep the
original data use <code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code>.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.preprocessing_stream.stream_filter">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.preprocessing_stream.</span></code><code class="sig-name descname"><span class="pre">stream_filter</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">st</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">obspy.core.stream.Stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ftype</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_option</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">obspy.core.stream.Stream</span><a class="reference internal" href="../../_modules/miic3/correlate/preprocessing_stream.html#stream_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.preprocessing_stream.stream_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter each trace of a Stream according to the given parameters</p>
<p>This faction apply the specified filter function to all the traces in the
present in the input <code class="xref py py-class docutils literal notranslate"><span class="pre">Stream</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ftype</strong> (<em>str</em>) – String that specifies which filter is applied (e.g.
<code class="docutils literal notranslate"><span class="pre">&quot;bandpass&quot;</span></code>). See the <a class="reference internal" href="#supported-filter">Supported Filter</a> section below for
further details.</p></li>
<li><p><strong>filter_option</strong> (<em>dict</em>) – Necessary arguments for the respective filter
that will be passed on. (e.g. <code class="docutils literal notranslate"><span class="pre">freqmin=1.0</span></code>, <code class="docutils literal notranslate"><span class="pre">freqmax=20.0</span></code> for
<code class="docutils literal notranslate"><span class="pre">&quot;bandpass&quot;</span></code>)</p></li>
</ul>
</dd>
<dt class="field-even">Pram parallel</dt>
<dd class="field-even"><p>If the filtering will be run in parallel or not</p>
</dd>
<dt class="field-odd">Pram processes</dt>
<dd class="field-odd"><p>Number of processes to start (if None it will be equal
to the number of cores available in the hosting machine)</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This operation is performed in place on the actual data arrays. The
raw data is not accessible anymore afterwards. To keep your
original data, use <code class="xref py py-func docutils literal notranslate"><span class="pre">stream_copy()</span></code> to create
a copy of your stream object.
This function can also work in parallel an all or a specified number of
cores available in the hosting machine.</p>
</div>
<p class="rubric"><span class="target" id="supported-filter">Supported Filter</span></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'bandpass'</span></code></dt><dd><p>Butterworth-Bandpass (uses <code class="xref py py-func docutils literal notranslate"><span class="pre">obspy.signal.filter.bandpass()</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'bandstop'</span></code></dt><dd><p>Butterworth-Bandstop (uses <code class="xref py py-func docutils literal notranslate"><span class="pre">obspy.signal.filter.bandstop()</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'lowpass'</span></code></dt><dd><p>Butterworth-Lowpass (uses <code class="xref py py-func docutils literal notranslate"><span class="pre">obspy.signal.filter.lowpass()</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'highpass'</span></code></dt><dd><p>Butterworth-Highpass (uses <code class="xref py py-func docutils literal notranslate"><span class="pre">obspy.signal.filter.highpass()</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'lowpassCheby2'</span></code></dt><dd><p>Cheby2-Lowpass (uses <code class="xref py py-func docutils literal notranslate"><span class="pre">obspy.signal.filter.lowpassCheby2()</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'lowpassFIR'</span></code> (experimental)</dt><dd><p>FIR-Lowpass (uses <code class="xref py py-func docutils literal notranslate"><span class="pre">obspy.signal.filter.lowpassFIR()</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'remezFIR'</span></code> (experimental)</dt><dd><p>Minimax optimal bandpass using Remez algorithm (uses
<code class="xref py py-func docutils literal notranslate"><span class="pre">obspy.signal.filter.remezFIR()</span></code>).</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="miic3-correlate-preprocessing-td">
<h2>miic3.correlate.preprocessing_td<a class="headerlink" href="#miic3-correlate-preprocessing-td" title="Permalink to this headline">¶</a></h2>
<p>Preprocessing functions that are executed in Time Domain</p>
<span class="target" id="module-miic3.correlate.preprocessing_td"></span><p>Module that contains functions for preprocessing in the time domain</p>
<dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p></p></dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p><cite>GNU Lesser General Public License, Version 3 &lt;https://www.gnu.org/copyleft/lesser.html&gt;</cite></p>
</dd>
<dt class="field-odd">author</dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Tuesday, 20th July 2021 03:24:01 pm
Last Modified: Tuesday, 20th July 2021 03:31:22 pm</p>
<dl class="py function">
<dt id="miic3.correlate.preprocessing_td.clip">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.preprocessing_td.</span></code><code class="sig-name descname"><span class="pre">clip</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="reference internal" href="../../_modules/miic3/correlate/preprocessing_td.html#clip"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.preprocessing_td.clip" title="Permalink to this definition">¶</a></dt>
<dd><p>Clip time series data at a multiple of the standard deviation</p>
<p>Set amplitudes exeeding a certain threshold to this threshold.
The threshold for clipping is estimated as the standard deviation of each
trace times a factor specified in <cite>args</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Note</dt>
<dd class="field-odd"><p>Traces should be demeaned before clipping.</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.ndarray</em>) – time series data with time oriented along the first dimension (columns)</p></li>
<li><p><strong>args</strong> (<em>dictionary</em>) – the only keyword allowed is <cite>std_factor</cite> describing the scaling of the standard deviation for the clipping threshold</p></li>
<li><p><strong>params</strong> (<em>dictionary</em>) – not used here</p></li>
</ul>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>clipped time series data</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.preprocessing_td.detrend">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.preprocessing_td.</span></code><code class="sig-name descname"><span class="pre">detrend</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="reference internal" href="../../_modules/miic3/correlate/preprocessing_td.html#detrend"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.preprocessing_td.detrend" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove trend from data</p>
</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.preprocessing_td.mute">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.preprocessing_td.</span></code><code class="sig-name descname"><span class="pre">mute</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="reference internal" href="../../_modules/miic3/correlate/preprocessing_td.html#mute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.preprocessing_td.mute" title="Permalink to this definition">¶</a></dt>
<dd><p>Mute parts of data that exceed a threshold</p>
<p>To completely surpress the effect of data with high amplitudes e.g. after
aftershocks these parts of the data are muted (set to zero). The respective
parts of the signal are identified as those where the envelope in a given
frequency exceeds a threshold given directly as absolute numer or as a
multiple of the data’s standard deviation. A taper of length <cite>taper_len</cite> is
applied to smooth the edges of muted segments. Setting <cite>extend_gaps</cite> to
True will ensure that the taper is applied outside the segments and data
inside these segments will all zero. Edges of the data will be tapered too
in this case.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.ndarray</em>) – time series data with time oriented along the first dimension
(columns)</p></li>
<li><p><strong>args</strong> (<em>dictionary</em>) – <p>the following keywords are allowed:</p>
<ul>
<li><dl class="simple">
<dt><cite>filter</cite>:</dt><dd><p>(dictionary) description of filter to be applied before
calculation of the signal envelope. If not given the envelope is
calculated from raw data. The value of the keyword filter is the
same as the <cite>args</cite> for the function <cite>TDfilter</cite>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><cite>threshold</cite>:</dt><dd><p>(float) absolute amplitude of threshold for muting</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><cite>std_factor</cite>:</dt><dd><p>(float) alternativly to an absolute number the threhold
can be estimated as a multiple of the standard deviation if the
scaling is given in as value of the keyword <cite>std_factor</cite>. If
neither <cite>threshold</cite> nor <cite>std_factor</cite> are given <cite>std_factor=1</cite> is
assumed.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><cite>extend_gaps</cite>:</dt><dd><p>(boolean) if True date above the threshold is
guaranteed to be muted, otherwise tapering will leak into these
parts. This step involves an additional convolution.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><cite>taper_len</cite>:</dt><dd><p>(float) length of taper for muted segments in seconds</p>
</dd>
</dl>
</li>
</ul>
</p></li>
<li><p><strong>params</strong> (<em>dictionary</em>) – filled automatically by <cite>pxcorr</cite></p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>numpy.ndarray</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>clipped time series data</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">args={'filter':{'type':'bandpass',</span> <span class="pre">'freqmin':1.,</span> <span class="pre">'freqmax':6.},</span>
<span class="pre">'taper_len':1.,</span> <span class="pre">'threshold':1000,</span> <span class="pre">'std_factor':1,</span> <span class="pre">'extend_gaps':True}</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.preprocessing_td.normalizeStandardDeviation">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.preprocessing_td.</span></code><code class="sig-name descname"><span class="pre">normalizeStandardDeviation</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="reference internal" href="../../_modules/miic3/correlate/preprocessing_td.html#normalizeStandardDeviation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.preprocessing_td.normalizeStandardDeviation" title="Permalink to this definition">¶</a></dt>
<dd><p>Divide the time series by their standard deviation</p>
<p>Divide the amplitudes of each trace by its standard deviation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.ndarray</em>) – time series data with time oriented along the first dimension (columns)</p></li>
<li><p><strong>args</strong> (<em>dictionary</em>) – not used here</p></li>
<li><p><strong>params</strong> (<em>dictionary</em>) – not used here</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>numpy.ndarray</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>normalized time series data</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.preprocessing_td.signBitNormalization">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.preprocessing_td.</span></code><code class="sig-name descname"><span class="pre">signBitNormalization</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="reference internal" href="../../_modules/miic3/correlate/preprocessing_td.html#signBitNormalization"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.preprocessing_td.signBitNormalization" title="Permalink to this definition">¶</a></dt>
<dd><p>One bit normalization of time series data</p>
<p>Return the sign of the samples (-1, 0, 1).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.ndarray</em>) – time series data with time oriented along the first dimension (columns)</p></li>
<li><p><strong>args</strong> (<em>dictionary</em>) – not used here</p></li>
<li><p><strong>params</strong> (<em>dictionary</em>) – not used here</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>numpy.ndarray</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>1-bit normalized time series data</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.preprocessing_td.spectralWhitening">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.preprocessing_td.</span></code><code class="sig-name descname"><span class="pre">spectralWhitening</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">B</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="reference internal" href="../../_modules/miic3/correlate/preprocessing_td.html#spectralWhitening"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.preprocessing_td.spectralWhitening" title="Permalink to this definition">¶</a></dt>
<dd><p>Spectal whitening of Fourier-transformed date</p>
<p>Normalize the amplitude spectrum of the complex spectra in <cite>B</cite>. The
<cite>args</cite> dictionary may contain the keyword <cite>joint_norm</cite>. If its value is
True the normalization of sets of three traces are normalized jointly by
the mean of their amplitude spectra. This is useful for later rotation of
correlated traces in the ZNE system into the ZRT system.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>B</strong> (<em>numpy.ndarray</em>) – Fourier transformed time series data with frequency orientedalong the first dimension (columns)</p></li>
<li><p><strong>args</strong> (<em>dictionary</em>) – arguments dictionary as described above</p></li>
<li><p><strong>params</strong> (<em>dictionary</em>) – not used here</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>numpy.ndarray</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>whitened spectal data</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.preprocessing_td.taper">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.preprocessing_td.</span></code><code class="sig-name descname"><span class="pre">taper</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="reference internal" href="../../_modules/miic3/correlate/preprocessing_td.html#taper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.preprocessing_td.taper" title="Permalink to this definition">¶</a></dt>
<dd><p>Taper to the time series data</p>
<p>Apply a simple taper to the time series data.</p>
<p><cite>args</cite> has the following structure:</p>
<blockquote>
<div><p>args = {‘type’:<cite>type of taper</cite>,taper_args}``</p>
<p><cite>type</cite> may be <cite>cosine_taper</cite> with the corresponding taper_args <cite>p</cite> the
percentage of the traces to taper. Possibilities of <cite>type</cite> are given by <cite>obspy.signal</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">args</span> <span class="pre">=</span> <span class="pre">{'type':'cosine_taper','p':0.1}</span></code></p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.ndarray</em>) – time series data with time oriented along the first dimension (columns)</p></li>
<li><p><strong>args</strong> (<em>dictionary</em>) – arguments dictionary as described above</p></li>
<li><p><strong>params</strong> (<em>dictionary</em>) – not used here</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>numpy.ndarray</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>tapered time series data</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.preprocessing_td.TDnormalization">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.preprocessing_td.</span></code><code class="sig-name descname"><span class="pre">TDnormalization</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="reference internal" href="../../_modules/miic3/correlate/preprocessing_td.html#TDnormalization"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.preprocessing_td.TDnormalization" title="Permalink to this definition">¶</a></dt>
<dd><p>Amplitude dependent time domain normalization</p>
<p>Calculate the envelope of the filtered trace, smooth it in a window of
length <cite>windowLength</cite> and normalize the waveform by this trace. The two
used keywords in <cite>args</cite> are <cite>filter and `windowLength</cite> that describe the
filter and the length of the envelope smoothing window, respectively.</p>
<p><cite>args</cite> has the following structure:</p>
<blockquote>
<div><p>args = {‘windowLength’:<cite>length of the envelope smoothing window in [s]</cite>,’filter’:{‘type’:<cite>filterType</cite>, fargs}}``</p>
<p><cite>type</cite> may be <cite>bandpass</cite> with the corresponding fargs <cite>freqmin</cite> and <cite>freqmax</cite> or <cite>highpass</cite>/<cite>lowpass</cite> with the <cite>fargs</cite> <cite>freqmin</cite>/<cite>freqmax</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">args</span> <span class="pre">=</span> <span class="pre">{'windowLength':5,'filter':{'type':'bandpass',</span>
<span class="pre">'freqmin':0.5,</span> <span class="pre">'freqmax':2.}}</span></code></p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.ndarray</em>) – time series data with time oriented along the first dimension (columns)</p></li>
<li><p><strong>args</strong> (<em>dictionary</em>) – arguments dictionary as described above</p></li>
<li><p><strong>params</strong> (<em>dictionary</em>) – not used here</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>numpy.ndarray</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>normalized time series data</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.preprocessing_td.TDfilter">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.preprocessing_td.</span></code><code class="sig-name descname"><span class="pre">TDfilter</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="reference internal" href="../../_modules/miic3/correlate/preprocessing_td.html#TDfilter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.preprocessing_td.TDfilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter time series data</p>
<p>Filter in time domain. Types of filters are defined by <cite>obspy.signal</cite>.</p>
<p><cite>args</cite> has the following structure:</p>
<blockquote>
<div><p>args = {‘type’:<cite>filterType</cite>, fargs}</p>
<p><cite>type</cite> may be <cite>bandpass</cite> with the corresponding fargs <cite>freqmin</cite> and
<cite>freqmax</cite> or <cite>highpass</cite>/<cite>lowpass</cite> with the <cite>fargs</cite> <cite>freqmin</cite>/<cite>freqmax</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">args</span> <span class="pre">=</span> <span class="pre">{'type':'bandpass','freqmin':0.5,'freqmax':2.}</span></code></p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.ndarray</em>) – time series data with time oriented along the first dimension (columns)</p></li>
<li><p><strong>args</strong> (<em>dictionary</em>) – arguments dictionary as described above</p></li>
<li><p><strong>params</strong> (<em>dictionary</em>) – not used here</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>numpy.ndarray</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>filtered time series data</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.preprocessing_td.zeroPadding">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.preprocessing_td.</span></code><code class="sig-name descname"><span class="pre">zeroPadding</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="reference internal" href="../../_modules/miic3/correlate/preprocessing_td.html#zeroPadding"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.preprocessing_td.zeroPadding" title="Permalink to this definition">¶</a></dt>
<dd><p>Append zeros to the traces</p>
<p>Pad traces with zeros to increase the speed of the Fourier transforms and
to avoid wrap around effects. Three possibilities for the length of the
padding can be set in <code class="docutils literal notranslate"><span class="pre">args['type']</span></code>:</p>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">nextFastLen</span></code>:</dt><dd><p>Traces are padded to a length that is the next fast
fft length</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">avoidWrapAround</span></code>:</dt><dd><p>depending on length of the trace that is to be used
the padded part is just long enough to avoid wrap around</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">avoidWrapFastLen</span></code>:</dt><dd><p>Use the next fast length that avoids wrap around</p>
</dd>
</dl>
</li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">args</span> <span class="pre">=</span> <span class="pre">{'type':'avoidWrapPowerTwo'}</span></code></p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.ndarray</em>) – time series data with time oriented along the first dimension (columns)</p></li>
<li><p><strong>args</strong> (<em>dictionary</em>) – arguments dictionary as described above</p></li>
<li><p><strong>params</strong> (<em>dictionary</em>) – not used here</p></li>
<li><p><strong>axis</strong> (<em>tuple</em><em>, </em><em>optional</em>) – axis to pad on</p></li>
</ul>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>zero padded time series data</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="miic3-correlate-preprocessing-fd">
<h2>miic3.correlate.preprocessing_fd<a class="headerlink" href="#miic3-correlate-preprocessing-fd" title="Permalink to this headline">¶</a></h2>
<p>Preprocessing functions that are executed in Frequency Domain</p>
<span class="target" id="module-miic3.correlate.preprocessing_fd"></span><p>Module containing functions for preprocessing in the frequency domain</p>
<dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>The PyGLImER development team (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>).</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p><cite>GNU Lesser General Public License, Version 3 &lt;https://www.gnu.org/copyleft/lesser.html&gt;</cite></p>
</dd>
<dt class="field-odd">author</dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Tuesday, 20th July 2021 03:40:11 pm
Last Modified: Tuesday, 20th July 2021 03:43:11 pm</p>
<dl class="py function">
<dt id="miic3.correlate.preprocessing_fd.FDfilter">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.preprocessing_fd.</span></code><code class="sig-name descname"><span class="pre">FDfilter</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">B</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="reference internal" href="../../_modules/miic3/correlate/preprocessing_fd.html#FDfilter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.preprocessing_fd.FDfilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter Fourier-transformed data</p>
<p>Filter Fourier tranformed data by tapering in frequency domain. The <cite>args</cite>
dictionary is supposed to contain the key <cite>flimit</cite> with a value that is a
four element list or tuple defines the corner frequencies (f1, f2, f3, f4)
in Hz of the cosine taper which is one between f2 and f3 and tapers to zero
for f1 &lt; f &lt; f2 and f3 &lt; f &lt; f4.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>B</strong> (<em>numpy.ndarray</em>) – Fourier transformed time series data with frequency orientedalong the first dimension (columns)</p></li>
<li><p><strong>args</strong> (<em>dictionary</em>) – arguments dictionary as described above</p></li>
<li><p><strong>params</strong> (<em>dictionary</em>) – params[‘freqs’] contains an array with the freqency values
of the samples in <cite>B</cite></p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>numpy.ndarray</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>filtered spectal data</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="miic3.correlate.preprocessing_fd.FDsignBitNormalization">
<code class="sig-prename descclassname"><span class="pre">miic3.correlate.preprocessing_fd.</span></code><code class="sig-name descname"><span class="pre">FDsignBitNormalization</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">B</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="reference internal" href="../../_modules/miic3/correlate/preprocessing_fd.html#FDsignBitNormalization"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#miic3.correlate.preprocessing_fd.FDsignBitNormalization" title="Permalink to this definition">¶</a></dt>
<dd><p>Sign bit normalization of frequency transformed data</p>
<p>Divides each sample by its amplitude resulting in trace with amplidues of
(-1, 0, 1). As this operation is done in frequency domain it requires two
Fourier transforms and is thus quite costly but alows to be performed
after other steps of frequency domain procesing e.g. whitening.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>B</strong> (<em>numpy.ndarray</em>) – Fourier transformed time series data with frequency orientedalong the first dimension (columns)</p></li>
<li><p><strong>args</strong> (<em>dictionary</em>) – not used in this function</p></li>
<li><p><strong>params</strong> (<em>dictionary</em>) – not used in this function</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>numpy.ndarray</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>frequency transform of the 1-bit normalized data</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../corrdb.html" class="btn btn-neutral float-right" title="Save and Load Correlations" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="stream.html" class="btn btn-neutral float-left" title="CorrTrace, CorrStream, and CorrBulk classes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, C.S..

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>