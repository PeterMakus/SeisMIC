

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>API</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'modules/API/API';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Our tutorials: From Zero to Noise-Hero" href="../tutorials.html" />
    <link rel="prev" title="SeisMIC API" href="../API.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../../_static/seismic_logo_small.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../../_static/seismic_logo_small.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../intro.html">
                        Introduction: Noise Interferometry with (Partial) Green’s Function Retrieval
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../get_started.html">
                        Getting Started with SeisMIC
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../trace_data.html">
                        Trace data
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../correlate.html">
                        Compute and Handle Correlations
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../corrdb.html">
                        Save and Load Correlations
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../monitor.html">
                        Monitor Velocity Changes
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../API.html">
                        SeisMIC API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../tutorials.html">
                        Our tutorials: From Zero to Noise-Hero
                      </a>
                    </li>
                
                </div>
            </div>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/PeterMakus/SeisMIC" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../intro.html">
                        Introduction: Noise Interferometry with (Partial) Green’s Function Retrieval
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../get_started.html">
                        Getting Started with SeisMIC
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../trace_data.html">
                        Trace data
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../correlate.html">
                        Compute and Handle Correlations
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../corrdb.html">
                        Save and Load Correlations
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../monitor.html">
                        Monitor Velocity Changes
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../API.html">
                        SeisMIC API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../tutorials.html">
                        Our tutorials: From Zero to Noise-Hero
                      </a>
                    </li>
                
                </div>
            </div>
            
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/PeterMakus/SeisMIC" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">API</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../API.html" class="nav-link"><code class="docutils literal notranslate"><span class="pre">SeisMIC</span></code> API</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">API</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="api">
<span id="api-label"></span><h1>API<a class="headerlink" href="#api" title="Permalink to this heading">#</a></h1>
<section id="seismic-trace-data">
<h2>seismic.trace_data<a class="headerlink" href="#seismic-trace-data" title="Permalink to this heading">#</a></h2>
<section id="seismic-trace-data-waveform">
<h3>seismic.trace_data.waveform<a class="headerlink" href="#seismic-trace-data-waveform" title="Permalink to this heading">#</a></h3>
<p>Waveform download and handling of raw data</p>
<span class="target" id="module-seismic.trace_data.waveform"></span><dl class="field-list simple">
<dt class="field-odd">copyright<span class="colon">:</span></dt>
<dd class="field-odd"><p>The SeisMIC development team (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>).</p>
</dd>
<dt class="field-even">license<span class="colon">:</span></dt>
<dd class="field-even"><p>GNU Lesser General Public License, Version 3
(<a class="reference external" href="https://www.gnu.org/copyleft/lesser.html">https://www.gnu.org/copyleft/lesser.html</a>)</p>
</dd>
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Thursday, 18th February 2021 02:30:02 pm
Last Modified: Tuesday, 8th August 2023 10:54:05 am</p>
<dl class="py class">
<dt class="sig sig-object py" id="seismic.trace_data.waveform.Store_Client">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">seismic.trace_data.waveform.</span></span><span class="sig-name descname"><span class="pre">Store_Client</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Client</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Client</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_only</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/trace_data/waveform.html#Store_Client"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.trace_data.waveform.Store_Client" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Client for request and local storage of waveform data</p>
<p>Request client that stores downloaded data for later local retrieval.
When reading stored data the client reads from the local copy of the data.
Inventory data is stored in the folder <cite>inventory</cite> and attached to data
that is read.</p>
<p>Initialize the client</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Client</strong> (<em>obspy request client that supports the 'get_waveform'
method</em>) – obspy request client that supports the ‘get_waveform’
method</p></li>
<li><p><strong>path</strong> (<em>str</em>) – path of the store’s sds root directory</p></li>
<li><p><strong>read_only</strong> (<em>Bool</em>) – If True the local archive is not extended.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="seismic.trace_data.waveform.Store_Client.download_waveforms_mdl">
<span class="sig-name descname"><span class="pre">download_waveforms_mdl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">starttime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UTCDateTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endtime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UTCDateTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clients</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minlat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxlat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minlon</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxlon</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">network</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">station</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/trace_data/waveform.html#Store_Client.download_waveforms_mdl"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.trace_data.waveform.Store_Client.download_waveforms_mdl" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.trace_data.waveform.Store_Client.get_waveforms">
<span class="sig-name descname"><span class="pre">get_waveforms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">network</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">station</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">starttime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UTCDateTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endtime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UTCDateTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attach_response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_check_times</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Stream</span></span></span><a class="reference internal" href="../../_modules/seismic/trace_data/waveform.html#Store_Client.get_waveforms"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.trace_data.waveform.Store_Client.get_waveforms" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.trace_data.waveform.Store_Client.get_available_stations">
<span class="sig-name descname"><span class="pre">get_available_stations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">network</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="reference internal" href="../../_modules/seismic/trace_data/waveform.html#Store_Client.get_available_stations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.trace_data.waveform.Store_Client.get_available_stations" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a list of stations for which raw data is available.
Very similar to the
<code class="xref py py-func docutils literal notranslate"><span class="pre">get_all_stations()</span></code> method with
the difference that this one allows to filter for particular networks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>network</strong> (<em>str</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – Only return stations from this network.
<code class="docutils literal notranslate"><span class="pre">network==None</span></code> is same as a wildcard. Defaults to None.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of network and station codes in the form:
<cite>[[net0,stat0], [net1,stat1]]</cite>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.trace_data.waveform.Store_Client.read_inventory">
<span class="sig-name descname"><span class="pre">read_inventory</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Inventory</span></span></span><a class="reference internal" href="../../_modules/seismic/trace_data/waveform.html#Store_Client.read_inventory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.trace_data.waveform.Store_Client.read_inventory" title="Permalink to this definition">#</a></dt>
<dd><p>Reads an up-to-date version of the corresponding Station Inventory.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Station Inventory</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Inventory</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.trace_data.waveform.Store_Client.select_inventory_or_load_remote">
<span class="sig-name descname"><span class="pre">select_inventory_or_load_remote</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">network</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">station</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Inventory</span></span></span><a class="reference internal" href="../../_modules/seismic/trace_data/waveform.html#Store_Client.select_inventory_or_load_remote"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.trace_data.waveform.Store_Client.select_inventory_or_load_remote" title="Permalink to this definition">#</a></dt>
<dd><p>Checks whether the response for the provided station is in
self.inventory if not the response will be fetched from remote.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>network</strong> (<em>str</em>) – Network code</p></li>
<li><p><strong>station</strong> (<em>str</em>) – Station Code</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An Obspy Inventory object holding the response for the
requested station.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Inventory</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.trace_data.waveform.Store_Client.compute_spectrogram">
<span class="sig-name descname"><span class="pre">compute_spectrogram</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">network</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">station</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">starttime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UTCDateTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endtime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UTCDateTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">win_len</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq_max</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_increment</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">86400</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/trace_data/waveform.html#Store_Client.compute_spectrogram"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.trace_data.waveform.Store_Client.compute_spectrogram" title="Permalink to this definition">#</a></dt>
<dd><p>Computes a time series of spectrograms for the requested station and
channel.</p>
<p># Enter plotting function here later
.. seealso:: Use function <code class="xref py py-func docutils literal notranslate"><span class="pre">plot()</span></code> to generate</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>MPI support since version 0.4.2. Then the result is only
available on rank 0. All other ranks return None. (to save RAM)</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>network</strong> (<em>str</em>) – network code</p></li>
<li><p><strong>station</strong> (<em>str</em>) – station code</p></li>
<li><p><strong>channel</strong> (<em>str</em>) – channel code</p></li>
<li><p><strong>starttime</strong> (<em>UTCDateTime</em>) – starttime of the first window</p></li>
<li><p><strong>endtime</strong> (<em>UTCDateTime</em>) – endtime of the last window</p></li>
<li><p><strong>win_len</strong> (<em>int</em>) – Length of each time window in seconds</p></li>
<li><p><strong>freq_max</strong> (<em>float</em><em>, </em><em>optional</em>) – Maximum frequency to compute, defaults to 25.
Also determines the Nyquist frequency.</p></li>
<li><p><strong>read_increment</strong> (<em>int</em><em>, </em><em>optional</em>) – Increment to read data in - does not
influence the final result but has to be &gt;= win_len,
defaults to 86400</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Frequency vector, time vector and spectrogram matrix</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[np.ndarray, np.ndarray, np.ndarray]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="seismic.trace_data.waveform.FS_Client">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">seismic.trace_data.waveform.</span></span><span class="sig-name descname"><span class="pre">FS_Client</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'SDS_archive'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/trace_data/waveform.html#FS_Client"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.trace_data.waveform.FS_Client" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Request Client for reading MSEED files from file system</p>
<p>Initialize the client</p>
<p>Refer to <a class="reference internal" href="#seismic.trace_data.waveform.read_from_filesystem" title="seismic.trace_data.waveform.read_from_filesystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">read_from_filesystem</span></code></a> for documentation</p>
<dl class="py method">
<dt class="sig sig-object py" id="seismic.trace_data.waveform.FS_Client.get_waveforms">
<span class="sig-name descname"><span class="pre">get_waveforms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">network</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">station</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">starttime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UTCDateTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endtime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UTCDateTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Stream</span></span></span><a class="reference internal" href="../../_modules/seismic/trace_data/waveform.html#FS_Client.get_waveforms"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.trace_data.waveform.FS_Client.get_waveforms" title="Permalink to this definition">#</a></dt>
<dd><p>Read data from the local file system.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.trace_data.waveform.read_from_filesystem">
<span class="sig-prename descclassname"><span class="pre">seismic.trace_data.waveform.</span></span><span class="sig-name descname"><span class="pre">read_from_filesystem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ID</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">starttime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">datetime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endtime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">datetime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'SDS_archive'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Stream</span></span></span><a class="reference internal" href="../../_modules/seismic/trace_data/waveform.html#read_from_filesystem"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.trace_data.waveform.read_from_filesystem" title="Permalink to this definition">#</a></dt>
<dd><p>Read data from a filesystem</p>
<p>Function to read miniSEED data from a given file structure by specifying
ID and time interval plus a description of the file system structure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ID</strong> (<em>string</em>) – seedID of the channel to read (NET.STA.LOC.CHA)</p></li>
<li><p><strong>starttime</strong> (<em>datetime.datetime</em>) – start time</p></li>
<li><p><strong>endtime</strong> (<em>datetime.datetime</em>) – end time</p></li>
<li><p><strong>fs</strong> (<em>list</em>) – file structure descriptor</p></li>
<li><p><strong>trim</strong> (<em>bool</em>) – switch for trimming of the stream</p></li>
<li><p><strong>debug</strong> (<em>bool</em>) – print debugging information</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">obspy.Stream</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>data stream of requested data</p>
</dd>
</dl>
<p>If the switch for trimming is False the whole stream in the files is
returned.</p>
<p><strong>File structure descriptor</strong>
fs is a list of strings or other lists indicating the elements in the
file structure. Each item of this list is translated in one level of the
directory structure. The first element is a string indicating the
base_directory. The following elements can be strings to indicate
one of the following:</p>
<ul class="simple">
<li><dl class="simple">
<dt>%X as defined by datetime.strftime indicating an element of t</dt><dd><p>the time. e.g. %H</p>
</dd>
</dl>
</li>
<li><p>%NET: network name or %net for lower case network name</p></li>
<li><p>%STA: station name or %sta for lower case</p></li>
<li><p>%CHA: channel name or %cha for lower case</p></li>
<li><p>%LOC: location or %loc for lower case location code</p></li>
<li><p>string with out %</p></li>
</ul>
<p>The format strings are replaced either with an element of the starttime
if they correspond to a datetime specifyer or with the respective part
of the seedID. A string withouta % sign is not changed. If more than one
format string is required in one directory level the need to be
separated within a sublist.</p>
<p>A format string for the ID can be followed by a pair of braces including
two strings that will be used to replace the first string with the
second. This can be used if the filename contains part of the ID in a
different form.</p>
<p>If fs is a single string it is interpreted as the base directory
‘SDSdir’ of a SeisComP Data Structure (SDS) with TYPE fixed to D
<cite>&lt;SDSdir&gt;/Year/NET/STA/CHAN.TYPE/NET.STA.LOC.CHAN.TYPE.YEAR.DAY</cite>
This usage should be equivalent to <cite>obspy.clients.filesystem.sds</cite> client.</p>
<dl class="field-list simple">
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p>Example for a station ‘GJE’ in network ‘HEJSL’ with channel ‘BHZ’ and
location ‘00’ with the start time 2010-12-24_11:36:30 and
<code class="docutils literal notranslate"><span class="pre">fs</span> <span class="pre">=</span> <span class="pre">['base_dir','%Y','%b','%NET,['%j','_','%STA'','_T_',</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;%CHA('BH','')&quot;,</span> <span class="pre">'.mseed']]</span></code>
will be translated in a linux filename
<code class="docutils literal notranslate"><span class="pre">base_dir/2010/Nov/HEJSL/317_GJE_T_Z.mseed</span></code></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the data contain traces of different channels in the same file with
different start and endtimes the routine will not work properly when a
period spans multiple files.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.trace_data.waveform.get_day_in_folder">
<span class="sig-prename descclassname"><span class="pre">seismic.trace_data.waveform.</span></span><span class="sig-name descname"><span class="pre">get_day_in_folder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">root</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dirlist</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">network</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">station</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">UTCDateTime</span></span></span><a class="reference internal" href="../../_modules/seismic/trace_data/waveform.html#get_day_in_folder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.trace_data.waveform.get_day_in_folder" title="Permalink to this definition">#</a></dt>
<dd><p>Assuming that mseed files are by day (i.e., one file per day), this
function will return the earliest or the latest day available (depending
upon the argument passed as <code class="docutils literal notranslate"><span class="pre">type</span></code>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>root</strong> (<em>str</em>) – The path to the sds root folder</p></li>
<li><p><strong>dirlist</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – alphabetically sorted list of available years</p></li>
<li><p><strong>network</strong> (<em>str</em>) – The queried network code</p></li>
<li><p><strong>station</strong> (<em>str</em>) – The queried station code</p></li>
<li><p><strong>channel</strong> (<em>str</em>) – The queried channel code (wildcards allowed)</p></li>
<li><p><strong>type</strong> (<em>str</em>) – either <code class="docutils literal notranslate"><span class="pre">start</span></code> or <code class="docutils literal notranslate"><span class="pre">end</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>NotImplementedError</strong> – Unknown argument for type</p></li>
<li><p><strong>FileNotFoundError</strong> – No files in db</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The earliest starttime or latest endtime in utc</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>UTCDateTime</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="seismic-correlate">
<h2>seismic.correlate<a class="headerlink" href="#seismic-correlate" title="Permalink to this heading">#</a></h2>
<section id="seismic-correlate-correlate">
<h3>seismic.correlate.correlate<a class="headerlink" href="#seismic-correlate-correlate" title="Permalink to this heading">#</a></h3>
<p>Module to compute correlations</p>
<span class="target" id="module-seismic.correlate.correlate"></span><dl class="field-list">
<dt class="field-odd">copyright<span class="colon">:</span></dt>
<dd class="field-odd"><p>The SeisMIC development team (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>).</p>
</dd>
<dt class="field-even">license<span class="colon">:</span></dt>
<dd class="field-even"><blockquote>
<div><p>EUROPEAN UNION PUBLIC LICENCE v. 1.2</p>
</div></blockquote>
<p>(<a class="reference external" href="https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12">https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12</a>)</p>
</dd>
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Monday, 29th March 2021 07:58:18 am
Last Modified: Friday, 25th August 2023 01:54:57 pm</p>
<dl class="py class">
<dt class="sig sig-object py" id="seismic.correlate.correlate.Correlator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">seismic.correlate.correlate.</span></span><span class="sig-name descname"><span class="pre">Correlator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">store_client</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.trace_data.waveform.Store_Client" title="seismic.trace_data.waveform.Store_Client"><span class="pre">Store_Client</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/correlate.html#Correlator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.correlate.Correlator" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Object to manage the actual Correlation (i.e., Green’s function retrieval)
for the database.</p>
<p>Initiates the Correlator object. When executing
<a class="reference internal" href="#seismic.correlate.correlate.Correlator.pxcorr" title="seismic.correlate.correlate.Correlator.pxcorr"><code class="xref py py-func docutils literal notranslate"><span class="pre">pxcorr()</span></code></a>, it will
actually compute the correlations and save them in an hdf5 file that
can be handled using
<a class="reference internal" href="#seismic.db.corr_hdf5.CorrelationDataBase" title="seismic.db.corr_hdf5.CorrelationDataBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrelationDataBase</span></code></a>.
Data has to be preprocessed before calling this (i.e., the data already
has to be given in an ASDF format). Consult
<code class="xref py py-class docutils literal notranslate"><span class="pre">Preprocessor</span></code> for information on
how to proceed with this.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>options</strong> (<em>dict</em><em> or </em><em>str</em>) – Dictionary containing all options for the correlation.
Can also be a path to a yaml file containing all the keys required
in options.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.correlate.Correlator.find_interstat_dist">
<span class="sig-name descname"><span class="pre">find_interstat_dist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/correlate.html#Correlator.find_interstat_dist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.correlate.Correlator.find_interstat_dist" title="Permalink to this definition">#</a></dt>
<dd><p>Find stations in database with interstation distance smaller than
dis.</p>
<p>If no station inventories are available, they will be downloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dis</strong> (<em>float</em>) – Find all Stations with distance less than <cite>dis</cite> [in m]</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>only the subset of the in <code class="docutils literal notranslate"><span class="pre">params.yaml</span></code> defined
networks and stations will be queried.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.correlate.Correlator.find_existing_times">
<span class="sig-name descname"><span class="pre">find_existing_times</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'*'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/correlate.html#Correlator.find_existing_times"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.correlate.Correlator.find_existing_times" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the already existing starttimes in form of a dictionary (see
below)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tag</strong> (<em>str</em>) – The tag that the waveforms are saved under</p></li>
<li><p><strong>channel</strong> (<em>str</em><em>, </em><em>optional</em>) – Channel Combination Code (e.g., CH0-CH1),
wildcards accepted. Defaults to ‘*’</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary that is structured as in the example below</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">out_dict</span> <span class="o">=</span> <span class="n">my_correlator</span><span class="o">.</span><span class="n">find_existing_times</span><span class="p">(</span><span class="s1">&#39;mytag&#39;</span><span class="p">,</span> <span class="s1">&#39;BHZ-BHH&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">out_dict</span><span class="p">)</span>
<span class="go">{&#39;NET0.STAT0&#39;: {</span>
<span class="go">    &#39;NET1.STAT1&#39;: {&#39;BHZ-BHH&#39;: [%list of starttimes] ,</span>
<span class="go">    &#39;NET2.STAT2&#39;: {&#39;BHZ-BHH&#39;:[%list of starttimes]}}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.correlate.Correlator.pxcorr">
<span class="sig-name descname"><span class="pre">pxcorr</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/correlate.html#Correlator.pxcorr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.correlate.Correlator.pxcorr" title="Permalink to this definition">#</a></dt>
<dd><p>Start the correlation with the parameters that were defined when
initiating the object.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.correlate.st_to_np_array">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.correlate.</span></span><span class="sig-name descname"><span class="pre">st_to_np_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">st</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Stream</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/correlate.html#st_to_np_array"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.correlate.st_to_np_array" title="Permalink to this definition">#</a></dt>
<dd><p>Converts an obspy stream to a matrix with the shape (npts, st.count()).
Also returns the same stream but without the data arrays in tr.data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> (<em>Stream</em>) – Input Stream</p></li>
<li><p><strong>npts</strong> (<em>int</em>) – Maximum number of samples per Trace</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A stream and a matrix</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.correlate.calc_cross_combis">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.correlate.</span></span><span class="sig-name descname"><span class="pre">calc_cross_combis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">st</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ex_corr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'betweenStations'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rcombis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/correlate.html#calc_cross_combis"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.correlate.calc_cross_combis" title="Permalink to this definition">#</a></dt>
<dd><p>Calculate a list of all cross correlation combination
of traces in the stream: i.e. all combination with two different
stations involved.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Stream</span></code>) – Stream holding the tracecs to be correlated</p></li>
<li><p><strong>ex_corr</strong> (<em>dict</em>) – dict holding the correlations that already exist in db</p></li>
<li><p><strong>method</strong> (<em>stringf</em>) – Determines which traces of the strem are combined.</p></li>
<li><p><strong>rcombis</strong> – requested combinations, only works if
<cite>method==betweenStations</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.correlate.sort_comb_name_alphabetically">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.correlate.</span></span><span class="sig-name descname"><span class="pre">sort_comb_name_alphabetically</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">network1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">station1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">network2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">station2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/correlate.html#sort_comb_name_alphabetically"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.correlate.sort_comb_name_alphabetically" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the alphabetically sorted network and station codes from the two
station.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>network1</strong> (<em>str</em>) – network code of first station</p></li>
<li><p><strong>station1</strong> (<em>str</em>) – station code of first station</p></li>
<li><p><strong>network2</strong> (<em>str</em>) – Network code of second station</p></li>
<li><p><strong>station2</strong> (<em>str</em>) – Station Code of second Station</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple containing the list of the network codes sorted
and the list of the station codes sorted.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[ list, list]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">net1</span> <span class="o">=</span> <span class="s1">&#39;IU&#39;</span>  <span class="c1"># Network Code of first station</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stat1</span> <span class="o">=</span> <span class="s1">&#39;HRV&#39;</span>  <span class="c1"># Station Code of first station</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net2</span> <span class="o">=</span> <span class="s1">&#39;XN&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stat2</span> <span class="o">=</span> <span class="s1">&#39;NEP06&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">sort_comb_name_aphabetically</span><span class="p">(</span>
<span class="go">        net1, stat1, net2, stat2))</span>
<span class="go">([&#39;IU&#39;, &#39;XN&#39;], [&#39;HRV&#39;, &#39;NEP06&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">sort_comb_name_aphabetically</span><span class="p">(</span>
<span class="go">        net2, stat2, net1, stat1))</span>
<span class="go">([&#39;IU&#39;, &#39;XN&#39;], [&#39;HRV&#39;, &#39;NEP06&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Different combination</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net1</span> <span class="o">=</span> <span class="s1">&#39;YP&#39;</span>  <span class="c1"># Network Code of first station</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stat1</span> <span class="o">=</span> <span class="s1">&#39;AB3&#39;</span>  <span class="c1"># Station Code of first station</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net2</span> <span class="o">=</span> <span class="s1">&#39;XN&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stat2</span> <span class="o">=</span> <span class="s1">&#39;NEP06&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">sort_comb_name_aphabetically</span><span class="p">(</span>
<span class="go">        net1, stat1, net2, stat2))</span>
<span class="go">([&#39;XN&#39;, &#39;YP&#39;], [&#39;NEP06&#39;, &#39;AB3&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Different combination</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net1</span> <span class="o">=</span> <span class="s1">&#39;XN&#39;</span>  <span class="c1"># Network Code of first station</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stat1</span> <span class="o">=</span> <span class="s1">&#39;NEP07&#39;</span>  <span class="c1"># Station Code of first station</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net2</span> <span class="o">=</span> <span class="s1">&#39;XN&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stat2</span> <span class="o">=</span> <span class="s1">&#39;NEP06&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">sort_comb_name_aphabetically</span><span class="p">(</span>
<span class="go">        net1, stat1, net2, stat2))</span>
<span class="go">([&#39;XN&#39;, &#39;XN&#39;], [&#39;NEP06&#39;, &#39;NEP07&#39;])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.correlate.compute_network_station_combinations">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.correlate.</span></span><span class="sig-name descname"><span class="pre">compute_network_station_combinations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">netlist</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statlist</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'betweenStations'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">combis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/correlate.html#compute_network_station_combinations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.correlate.compute_network_station_combinations" title="Permalink to this definition">#</a></dt>
<dd><p>Return the network and station codes of the correlations for the provided
lists of networks and stations and the queried combination method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>netlist</strong> (<em>list</em>) – List of network codes</p></li>
<li><p><strong>statlist</strong> (<em>list</em>) – List of Station Codes</p></li>
<li><p><strong>method</strong> (<em>str</em><em>, </em><em>optional</em>) – The combination method to use. Has to be one of the
following: <cite>betweenStation</cite>, <cite>betweenComponents</cite>, <cite>autoComponents</cite>,
<cite>allSimpleCombinations</cite>, or <cite>allCombinations</cite>,
defaults to ‘betweenStations’.</p></li>
<li><p><strong>combis</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – List of desired station combinations.
Given as [net0-net1.stat0-stat1]. Optional.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – for unkown combination methods.</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A tuple containing the list of the correlation network code
and the list of the correlation station code.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple[list, list]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.correlate.preprocess_stream">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.correlate.</span></span><span class="sig-name descname"><span class="pre">preprocess_stream</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">st</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">store_client</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.trace_data.waveform.Store_Client" title="seismic.trace_data.waveform.Store_Client"><span class="pre">Store_Client</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">inv</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Inventory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UTCDateTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UTCDateTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">taper_len</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subdivision</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preProcessing</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Stream</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/correlate.html#preprocess_stream"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.correlate.preprocess_stream" title="Permalink to this definition">#</a></dt>
<dd><p>Does the preprocessing on a per stream basis. Most of the parameters can be
fed in by using the “yaml” dict as kwargs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">obspy.core.stream.Stream</span></code>) – Input Stream to be processed</p></li>
<li><p><strong>store_client</strong> (<a class="reference internal" href="#seismic.trace_data.waveform.Store_Client" title="seismic.trace_data.waveform.Store_Client"><code class="xref py py-class docutils literal notranslate"><span class="pre">Store_Client</span></code></a>) – Store Client for the database</p></li>
<li><p><strong>inv</strong> (<em>Inventory</em><em> or </em><em>None</em>) – Station response, can be None if <code class="docutils literal notranslate"><span class="pre">remove_response=False</span></code>.</p></li>
<li><p><strong>startt</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">obspy.UTCDateTime</span></code>) – Starttime that the stream should be clipped / padded to.</p></li>
<li><p><strong>endt</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">obspy.UTCDateTime</span></code>) – Endtime that the stream should be clipped / padded to.</p></li>
<li><p><strong>taper_len</strong> (<em>float</em>) – If the instrument response is removed, one might want to
taper to mitigate the acausal effects of the deconvolution. This is
the length of such a taper in seconds.</p></li>
<li><p><strong>remove_response</strong> (<em>bool</em>) – Should the instrument response be removed?</p></li>
<li><p><strong>subdivision</strong> (<em>dict</em>) – Dictionary holding information about the correlation
lenghts and increments.</p></li>
<li><p><strong>preProcessing</strong> (<em>List</em><em>[</em><em>dict</em><em>]</em><em>, </em><em>optional</em>) – List holding information about the different external
preprocessing functions to be applied, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – For sampling rates higher than the stream’s native
sampling rate (upsampling is not permitted).</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The preprocessed stream.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">obspy.core.stream.Stream</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.correlate.generate_corr_inc">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.correlate.</span></span><span class="sig-name descname"><span class="pre">generate_corr_inc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">st</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subdivision</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_len</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Stream</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/correlate.html#generate_corr_inc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.correlate.generate_corr_inc" title="Permalink to this definition">#</a></dt>
<dd><p>Subdivides the preprocessed streams into parts of equal length using
the parameters <code class="docutils literal notranslate"><span class="pre">cor_inc</span></code> and <code class="docutils literal notranslate"><span class="pre">cor_len</span></code> in <code class="docutils literal notranslate"><span class="pre">subdivision</span></code>.
This function can be acessed by several processes in parallel</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">obspy.core.stream.Stream</span></code>) – The preprocessed input stream</p></li>
<li><p><strong>subdivision</strong> (<em>dict</em>) – Dictionary holding the information about the
correlation length and increment.</p></li>
<li><p><strong>read_len</strong> (<em>int</em>) – Length to be read from disk in seconds</p></li>
</ul>
</dd>
<dt class="field-even">Yield<span class="colon">:</span></dt>
<dd class="field-even"><p>Equal length windows, padded with nans / masked if data is missing.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Generator[Stream]</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="seismic-correlate-stream">
<h3>seismic.correlate.stream<a class="headerlink" href="#seismic-correlate-stream" title="Permalink to this heading">#</a></h3>
<p>Module to handle and access correlations as pythonic objects</p>
<span class="target" id="module-seismic.correlate.stream"></span><p>Manage objects holding correlations.</p>
<dl class="field-list">
<dt class="field-odd">copyright<span class="colon">:</span></dt>
<dd class="field-odd"><p>The SeisMIC development team (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>).</p>
</dd>
<dt class="field-even">license<span class="colon">:</span></dt>
<dd class="field-even"><blockquote>
<div><p>EUROPEAN UNION PUBLIC LICENCE v. 1.2</p>
</div></blockquote>
<p>(<a class="reference external" href="https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12">https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12</a>)</p>
</dd>
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Tuesday, 20th April 2021 04:19:35 pm
Last Modified: Thursday, 24th August 2023 11:06:37 am</p>
<dl class="py class">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrBulk">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">seismic.correlate.stream.</span></span><span class="sig-name descname"><span class="pre">CorrBulk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statlist</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrBulk"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrBulk" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An object for faster computations on several correlations. The input
correlation contain data from only one Station-Channel pair.</p>
<p>An object for faster computations on several correlations. The input
correlation contain data from only one Station-Channel pair.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>np.ndarray</em>) – the Correlation Matrix. Each line corresponds to one
correlation start. The column distance is lag time</p></li>
<li><p><strong>stats</strong> (<a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><em>CorrStats</em></a><em>, </em><em>optional</em>) – CorrStats file holding the header for this object,
only relevant if you are reloading this file. Otherwise,
use statlist as input to create this header.
defaults to None</p></li>
<li><p><strong>statlist</strong> (<em>List</em><em>[</em><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><em>CorrStats</em></a><em>]</em><em>, </em><em>optional</em>) – Header of each CorrTrace used to create this object,
defaults to None</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrBulk.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrBulk.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrBulk.plot" title="Permalink to this definition">#</a></dt>
<dd><p>Plot the correlation traces contained.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See <a class="reference internal" href="#seismic.plot.plot_correlation.plot_corr_bulk" title="seismic.plot.plot_correlation.plot_corr_bulk"><code class="xref py py-func docutils literal notranslate"><span class="pre">plot_corr_bulk()</span></code></a> for
accepted parameters.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrBulk.normalize">
<span class="sig-name descname"><span class="pre">normalize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">starttime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endtime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normtype</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'energy'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrBulk.normalize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrBulk.normalize" title="Permalink to this definition">#</a></dt>
<dd><p>Correct amplitude variations with time.</p>
<p>Measure the maximum of the absolute value of the correlation matrix in
a specified lapse time window and normalize the correlation traces by
this values. A coherent phase in the respective lapse time window will
have constant ampitude afterwards..</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>starttime</strong> (<em>float</em>) – Beginning of time window in seconds with respect to
the zero position.</p></li>
<li><p><strong>endtime</strong> (<em>float</em>) – end time window in seconds with respect to the zero
position.</p></li>
<li><p><strong>normtype</strong> (<em>string</em>) – one of the following ‘energy’, ‘max’, ‘absmax’,
‘abssum’ to decide about the way to calculate the normalization.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#seismic.correlate.stream.CorrBulk" title="seismic.correlate.stream.CorrBulk">CorrBulk</a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Same object as in self, but normalised.</p>
</dd>
</dl>
<dl class="simple">
<dt>..note:: This action is performed <strong>in-place</strong>. If you would like to</dt><dd><p>keep the original data use
<code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrBulk.clip">
<span class="sig-name descname"><span class="pre">clip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">thres</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrBulk.clip"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrBulk.clip" title="Permalink to this definition">#</a></dt>
<dd><p>Clip the correlation data’s upper and lower bounds to a multiple of its
standard deviation. <cite>thres</cite> determines the factor and <cite>axis</cite> the axis
the std should be computed over</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>thres</strong> (<em>float</em>) – factor of the standard deviation to clip by</p></li>
<li><p><strong>axis</strong> (<em>int</em>) – Axis to compute the std over and, subsequently clip over.
Can be None, if you wish to compute floating point rather than a
vector. Then, the array will be clipped evenly.</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>..note:: This action is performed <strong>in-place</strong>. If you would like to</dt><dd><p>keep the original data use
<code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrBulk.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrBulk.copy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrBulk.copy" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a copy of self</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A copy of self</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrBulk.correct_decay">
<span class="sig-name descname"><span class="pre">correct_decay</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrBulk.correct_decay"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrBulk.correct_decay" title="Permalink to this definition">#</a></dt>
<dd><p>Correct for the amplitude decay in a correlation matrix.</p>
<p>Due to attenuation and geometrical spreading the amplitude of the
correlations decays with increasing lapse time. This decay is corrected
by dividing the correlation functions by an exponential function that
models the decay.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Self but with data corrected for amplitude decay</p>
</dd>
</dl>
<dl class="simple">
<dt>..note:: This action is performed <strong>in-place</strong>. If you would like to</dt><dd><p>keep the original data use
<code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrBulk.correct_stretch">
<span class="sig-name descname"><span class="pre">correct_stretch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dv</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><span class="pre">DV</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrBulk.correct_stretch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrBulk.correct_stretch" title="Permalink to this definition">#</a></dt>
<dd><p>Correct stretching of correlation matrix</p>
<p>In the case of a homogeneous subsurface velocity change the correlation
traces are stretched or compressed. This stretching can be measured
with <cite>self.stretch</cite>. The resulting <cite>DV</cite> object can be passed to
this function to remove the stretching from the correlation matrix.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dv</strong> (<a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><em>DV</em></a>) – Velocity Change object</p>
</dd>
</dl>
<dl class="simple">
<dt>..note:: This action is performed <strong>in-place</strong>. If you would like to</dt><dd><p>keep the original data use
<code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrBulk.correct_shift">
<span class="sig-name descname"><span class="pre">correct_shift</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><span class="pre">DV</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrBulk.correct_shift"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrBulk.correct_shift" title="Permalink to this definition">#</a></dt>
<dd><p>Correct a shift of the traces.</p>
<p>If time shifts in the (correlation) traces occur due to clock drifts
or time offsets in active measurements these can be measured with
<code class="xref py py-func docutils literal notranslate"><span class="pre">measure_shift()</span></code>. If
the resulting time shift is passed to this function the shift is
corrected for, such that if the measurement is done again no shift will
be detected.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrBulk.create_corr_stream">
<span class="sig-name descname"><span class="pre">create_corr_stream</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrBulk.create_corr_stream"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrBulk.create_corr_stream" title="Permalink to this definition">#</a></dt>
<dd><p>Creates a <a class="reference internal" href="#seismic.correlate.stream.CorrStream" title="seismic.correlate.stream.CorrStream"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrStream</span></code></a> object from
the current <a class="reference internal" href="#seismic.correlate.stream.CorrBulk" title="seismic.correlate.stream.CorrBulk"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrBulk</span></code></a> object. This
can be useful if you want to save your postprocessed data in a hdf5
file again.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ind</strong> (<em>Iterable</em><em>[</em><em>ind</em><em>]</em><em>, </em><em>optional</em>) – Indices to extract. If None, all will be used.
Defaults to None.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Correlation Stream holding the same data</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#seismic.correlate.stream.CorrStream" title="seismic.correlate.stream.CorrStream"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrStream</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrBulk.envelope">
<span class="sig-name descname"><span class="pre">envelope</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrBulk.envelope"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrBulk.envelope" title="Permalink to this definition">#</a></dt>
<dd><p>Calculate the envelope of a correlation matrix.</p>
<p>The correlation data of the correlation matrix are replaced by their
Hilbert envelopes.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>self with the envelope in data</p>
</dd>
</dl>
<dl class="simple">
<dt>..note:: This action is performed <strong>in-place</strong>. If you would like to</dt><dd><p>keep the original data use
<code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrBulk.filter">
<span class="sig-name descname"><span class="pre">filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">freqs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrBulk.filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrBulk.filter" title="Permalink to this definition">#</a></dt>
<dd><p>Filters the correlation matrix in the frequency band specified in
freqs using a zero phase filter of twice the order given in order.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>freqs</strong> (<em>Tuple</em>) – lower and upper limits of the pass band in Hertz</p></li>
<li><p><strong>order</strong> (<em>int</em>) – half the order of the Butterworth filter</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>self</p>
</dd>
</dl>
<dl class="simple">
<dt>..note:: This action is performed <strong>in-place</strong>. If you would like to</dt><dd><p>keep the original data use
<code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrBulk.extract_trace">
<span class="sig-name descname"><span class="pre">extract_trace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'mean'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percentile</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">50.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrBulk.extract_trace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrBulk.extract_trace" title="Permalink to this definition">#</a></dt>
<dd><p>Extract a representative trace from a correlation matrix.</p>
<p>Extract a correlation trace from the that best represents the
correlation matrix. <code class="docutils literal notranslate"><span class="pre">Method</span></code> decides about method to extract the
trace. The following possibilities are available</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mean</span></code> averages all traces in the matrix</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">median</span></code> takes the median of all traces in the matrix</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">norm_mean</span></code> averages the traces normalized after normalizing for</dt><dd><p>maxima</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">similarity_percentile</span></code> averages the <code class="docutils literal notranslate"><span class="pre">percentile</span></code> % of traces</dt><dd><p>that best correlate with the mean of all traces. This will exclude
abnormal traces. <code class="docutils literal notranslate"><span class="pre">percentile</span></code> = 50 will return an average of
traces with correlation (with mean trace) above the median.</p>
</dd>
</dl>
</li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method</strong> (<em>string</em>) – method to extract the trace</p></li>
<li><p><strong>percentile</strong> (<em>float</em>) – only used for method==’similarity_percentile’</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>extracted trace</p>
</dd>
</dl>
<p>..note:: the extracted trace will also be saved in self.ref_trc</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrBulk.extract_multi_trace">
<span class="sig-name descname"><span class="pre">extract_multi_trace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">win_inc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'mean'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percentile</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">50.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrBulk.extract_multi_trace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrBulk.extract_multi_trace" title="Permalink to this definition">#</a></dt>
<dd><p>Extract several representative traces from a correlation matrix.
(one per time window <cite>win_inc</cite> with the length = 2*win_inc). That is,
the reference will be extracted with half increment overlap in each
direction.</p>
<p>Extract a correlation trace from the one that best represents the
correlation matrix. <code class="docutils literal notranslate"><span class="pre">Method</span></code> decides about method to extract the
trace. The following possibilities are available</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mean</span></code> averages all traces in the matrix</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">median</span></code> extract the median of all traces in the matrix</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">norm_mean</span></code> averages the traces normalized after normalizing for</dt><dd><p>maxima</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">similarity_percentile</span></code> averages the <code class="docutils literal notranslate"><span class="pre">percentile</span></code> % of traces</dt><dd><p>that best correlate with the mean of all traces. This will exclude
abnormal traces. <code class="docutils literal notranslate"><span class="pre">percentile</span></code> = 50 will return an average of
traces with correlation (with mean trace) above the median.</p>
</dd>
</dl>
</li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>win_inc</strong> (<em>int</em><em> or </em><em>List</em><em>[</em><em>int</em><em>] </em><em>(</em><em>number</em><em> of </em><em>days</em><em>)</em>) – Increment between each window that a Trace should be
extracted from. Given in days. Can be a list/np.ndarray or an int
(constant increment). The windows’ length will be twice the
increment. <strong>If set to 0, only one trace for the whole time will
be used.</strong></p></li>
<li><p><strong>method</strong> (<em>string</em>) – method to extract the trace</p></li>
<li><p><strong>percentile</strong> (<em>float</em>) – only used for method==’similarity_percentile’</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>extracted trace</p>
</dd>
</dl>
<p>..note:: the extracted traces will also be saved in self.ref_trc</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrBulk.find_clock_shift">
<span class="sig-name descname"><span class="pre">find_clock_shift</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref_trc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift_steps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">101</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sides</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'both'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_sim_mat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><span class="pre">DV</span></a></span></span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrBulk.find_clock_shift"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrBulk.find_clock_shift" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the shift of correlations as they can occur due to a clock
drift.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ref_trc</strong> (<em>np.ndarray</em><em>, </em><em>optional</em>) – Reference trace to use for the computation,
defaults to None. Will extract a single trace if = None.</p></li>
<li><p><strong>tw</strong> (<em>List</em><em>[</em><em>np.ndarray</em><em>]</em><em>, </em><em>optional</em>) – Lapse Time window to use for the computation,
defaults to None</p></li>
<li><p><strong>shift_range</strong> (<em>int</em><em>, </em><em>optional</em>) – Maximum shift value to test
(in n samples not seconds!). Defaults to 10.</p></li>
<li><p><strong>shift_steps</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of shift steps, defaults to 101</p></li>
<li><p><strong>sides</strong> (<em>str</em><em>, </em><em>optional</em>) – Which sides to use. Can be ‘right’,
or ‘both’. Defaults to ‘both’</p></li>
<li><p><strong>return_sim_mat</strong> (<em>bool</em><em>, </em><em>optional</em>) – Return the similarity matrix, defaults to False</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The shift as <a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><code class="xref py py-class docutils literal notranslate"><span class="pre">DV</span></code></a> object.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV">DV</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrBulk.measure_shift">
<span class="sig-name descname"><span class="pre">measure_shift</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref_trc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift_steps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">101</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sides</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'both'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_sim_mat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><span class="pre">DV</span></a></span></span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrBulk.measure_shift"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrBulk.measure_shift" title="Permalink to this definition">#</a></dt>
<dd><p>Time shift estimate through shifting and comparison.</p>
<p>This function estimates shifting of the time axis of traces as it can
occur if the clocks of digitizers drift.</p>
<p>Time shifts are estimated comparing each trace (e.g. correlation
function stored in the <code class="docutils literal notranslate"><span class="pre">corr_data</span></code> matrix (one for each row) with
shifted versions  of reference trace stored in <code class="docutils literal notranslate"><span class="pre">ref_trc</span></code>. The range
of shifting to be tested is given in <code class="docutils literal notranslate"><span class="pre">shift_range</span></code> in seconds.
It is used in a symmetric way from -<code class="docutils literal notranslate"><span class="pre">shift_range</span></code>
to +``shift_range``. Shifting ist
tested <code class="docutils literal notranslate"><span class="pre">shift_steps</span></code> times. <code class="docutils literal notranslate"><span class="pre">shift_steps</span></code> should be an odd number
to test zero shifting. The best match (shifting amount and
corresponding correlation value) is calculated in specified time
windows. Multiple time
windows may be specified in <code class="docutils literal notranslate"><span class="pre">tw</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ref_trc</strong> (<em>Optional</em><em>[</em><em>np.ndarray</em><em>]</em><em>, </em><em>optional</em>) – Refernce trace for the shifting, defaults to None</p></li>
<li><p><strong>tw</strong> (<em>Optional</em><em>[</em><em>List</em><em>[</em><em>float</em><em>]</em><em>]</em><em>, </em><em>optional</em>) – Time window(s) to check the shifting in, defaults to None.</p></li>
<li><p><strong>shift_range</strong> (<em>float</em><em>, </em><em>optional</em>) – Maximum shift range in seconds, defaults to 10</p></li>
<li><p><strong>shift_steps</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of shift steps, defaults to 101</p></li>
<li><p><strong>sides</strong> (<em>str</em>) – Side of the traces to be used for the shifting estimate
(‘both’ | ‘single’). <code class="docutils literal notranslate"><span class="pre">single</span></code> is used for
one-sided signals from active sources or if the time window shall
not be symmetric. For <code class="docutils literal notranslate"><span class="pre">both</span></code> the time window will be mirrowd
about
zero lag time, e.g. [start,end] will result in time windows
[-end:-start] and [start:end] being used simultaneousy</p></li>
<li><p><strong>return_sim_mat</strong> (<em>bool</em><em>, </em><em>optional</em>) – Return simmilarity matrix?, defaults to False</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A DV object holding a shift value.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV">DV</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrBulk.mirror">
<span class="sig-name descname"><span class="pre">mirror</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrBulk.mirror"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrBulk.mirror" title="Permalink to this definition">#</a></dt>
<dd><p>Average the causal and acausal (i.e., right and left) parts of the
correlation.</p>
<dl class="simple">
<dt>..note:: This action is performed <strong>in-place</strong>. If you would like to</dt><dd><p>keep the original data use
<code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrBulk.resample">
<span class="sig-name descname"><span class="pre">resample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">starttimes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">UTCDateTime</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endtimes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">UTCDateTime</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrBulk.resample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrBulk.resample" title="Permalink to this definition">#</a></dt>
<dd><p>Function to create correlation matrices with constant sampling</p>
<p>When created from a CorrStream the correlation matrix contains all
available correlation traces but homogeneous sampling is not guaranteed
as correlation functions may be missing due to data gaps. This function
restructures the correlation matrix by inserting or averaging
correlation functions to provide temporally homogeneous sampling.
Inserted correlation functions consist of ‘nan’ if gaps are present and
averaging is done if more than one correlation function falls in a bin
between start_times[i] and end_times[i]. If end_time is an empty list
(default) end_times[i] is set to
start_times[i] + (start_times[1] - start_times[0])</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start_times</strong> (list of class:<cite>~obspy.core.UTCDateTime</cite> objects) – list of starting times for the bins of the new
sampling</p></li>
<li><p><strong>end_times</strong> (list of class:<cite>~obspy.core.UTCDateTime</cite> objects) – list of end times for the bins of the new
sampling</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>..note:: This action is performed <strong>in-place</strong>. If you want to keep</dt><dd><p>the original data use
<code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrBulk.resample_time_axis">
<span class="sig-name descname"><span class="pre">resample_time_axis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">freq</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrBulk.resample_time_axis"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrBulk.resample_time_axis" title="Permalink to this definition">#</a></dt>
<dd><p>Resample the lapse time axis of a correlation matrix. The correlations
are automatically filtered with a highpass filter of 0.4*sampling
frequency to avoid aliasing. The function decides automatically whether
to decimate or resample depending on the desired frequency</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>freq</strong> (<em>float</em>) – new sampling frequency</p>
</dd>
</dl>
<dl class="simple">
<dt>..note:: This action is performed <strong>in-place</strong>. If you want to keep</dt><dd><p>the original data use
<code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrBulk.smooth">
<span class="sig-name descname"><span class="pre">smooth</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wsize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wtype</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'flat'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrBulk.smooth"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrBulk.smooth" title="Permalink to this definition">#</a></dt>
<dd><p>Smoothes the correlation matrix with a given window function of the
given width along the given axis. This method is based on the
convolution of a scaled window with the signal. Each row/col
(i.e. depending on the selected <code class="docutils literal notranslate"><span class="pre">axis</span></code>) is “prepared” by introducing
reflected copies of it (with the window size) in both ends so that
transient parts are minimized in the beginning and end part of the
resulting array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>wsize</strong> (<em>int</em>) – Window size</p></li>
<li><p><strong>wtype</strong> (<em>string</em>) – Window type. It can be one of:
[‘flat’, ‘hanning’, ‘hamming’, ‘bartlett’, ‘blackman’] defaults to
‘flat’</p></li>
<li><p><strong>axis</strong> (<em>int</em>) – Axis along with apply the filter. O: smooth along
correlation lag time axis 1: smooth along time axis</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Filtered matrix</p>
</dd>
</dl>
<dl class="simple">
<dt>..note:: This action is performed <strong>in-place</strong>. If you want to keep</dt><dd><p>the original data use
<code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrBulk.stretch">
<span class="sig-name descname"><span class="pre">stretch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref_trc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stretch_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stretch_steps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">101</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sides</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'both'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_sim_mat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_tr_trim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_tr_stats</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">processing</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><span class="pre">DV</span></a></span></span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrBulk.stretch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrBulk.stretch" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the velocity change with the stretching method
(see Sens-Schönfelder and Wegler, 2006).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ref_trc</strong> (<em>np.ndarray</em><em>, </em><em>optional</em>) – Reference trace(s) to use for the computatio,
defaults to None. Will extract a single trace if = None.</p></li>
<li><p><strong>tw</strong> (<em>List</em><em>[</em><em>np.ndarray</em><em>]</em><em>, </em><em>optional</em>) – Lapse Time window to use for the computation,
defaults to None</p></li>
<li><p><strong>stretch_range</strong> (<em>float</em><em>, </em><em>optional</em>) – Maximum stretch value to test, defaults to 0.1</p></li>
<li><p><strong>stretch_steps</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of stretch steps, defaults to 101</p></li>
<li><p><strong>sides</strong> (<em>str</em><em>, </em><em>optional</em>) – Which sides to use. Can be ‘left’, ‘right’ (or ‘single’),
or ‘both’. Defaults to ‘both’</p></li>
<li><p><strong>return_sim_mat</strong> (<em>bool</em><em>, </em><em>optional</em>) – Return the similarity matrix, defaults to False</p></li>
<li><p><strong>processing</strong> (<em>dict</em>) – dictionary holding processing information.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The velocity change as <a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><code class="xref py py-class docutils literal notranslate"><span class="pre">DV</span></code></a> object.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV">DV</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrBulk.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrBulk.save"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrBulk.save" title="Permalink to this definition">#</a></dt>
<dd><p>Save the object to a numpy binary format (<strong>.npz</strong>)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – Output path</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrBulk.slice">
<span class="sig-name descname"><span class="pre">slice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">starttime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UTCDateTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endtime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UTCDateTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_partial</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrBulk.slice"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrBulk.slice" title="Permalink to this definition">#</a></dt>
<dd><p>return a subset of the current CorrelationBulk with data inside
the requested time window.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>starttime</strong> (<em>UTCDateTime</em>) – Earliest Starttime</p></li>
<li><p><strong>endtime</strong> (<em>UTCDateTime</em>) – Latest endtime</p></li>
<li><p><strong>include_partial</strong> (<em>bool</em><em>, </em><em>optional</em>) – Include time window if it’s only
partially covered, defaults to True</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Another CorrBulk object</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#seismic.correlate.stream.CorrBulk" title="seismic.correlate.stream.CorrBulk">CorrBulk</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrBulk.taper">
<span class="sig-name descname"><span class="pre">taper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrBulk.taper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrBulk.taper" title="Permalink to this definition">#</a></dt>
<dd><p>Taper the data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>width</strong> (<em>float</em>) – width to be tapered in seconds (per side)</p>
</dd>
</dl>
<dl class="simple">
<dt>..note:: This action is performed <strong>in-place</strong>. If you want to keep</dt><dd><p>the original data use
<code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrBulk.taper_center">
<span class="sig-name descname"><span class="pre">taper_center</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slope_frac</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.05</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrBulk.taper_center"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrBulk.taper_center" title="Permalink to this definition">#</a></dt>
<dd><p>Taper the central part of a correlation matrix.</p>
<p>Due to electromagnetic cross-talk, signal processing or other effects
the correlaton matrices are often contaminated around the zero lag
time. This function tapers (multiples by zero) the central part of
width <cite>width</cite>. To avoid problems with interpolation and filtering later
on this is done with cosine taper.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>width</strong> (<em>float</em>) – width of the central window to be tapered in seconds
(<strong>total length i.e., not per side</strong>).</p></li>
<li><p><strong>slope_frac</strong> (<em>float</em><em>, </em><em>optional</em>) – fraction of <cite>width</cite> used for soothing of edges,
defaults to 0.05</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>self</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#seismic.correlate.stream.CorrBulk" title="seismic.correlate.stream.CorrBulk">CorrBulk</a></p>
</dd>
</dl>
<dl class="simple">
<dt>..note:: This action is performed <strong>in-place</strong>. If you want to keep</dt><dd><p>the original data use
<code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrBulk.trim">
<span class="sig-name descname"><span class="pre">trim</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">starttime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endtime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrBulk.trim"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrBulk.trim" title="Permalink to this definition">#</a></dt>
<dd><p>Trim the correlation matrix to the period from <cite>starttime</cite> to
<cite>endtime</cite> given in seconds from the zero position, so both can be
positive and negative.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>starttime</strong> (<em>float</em>) – start time in seconds with respect to the zero
position</p></li>
<li><p><strong>order</strong> – end time in seconds with respect to the zero position</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>self</p>
</dd>
</dl>
<dl class="simple">
<dt>..note:: This action is performed <strong>in-place</strong>. If you want to keep</dt><dd><p>the original data use
<code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrBulk.wfc">
<span class="sig-name descname"><span class="pre">wfc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref_trc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sides</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tw_start</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tw_len</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq_min</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq_max</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_nans</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#seismic.monitor.wfc.WFC" title="seismic.monitor.wfc.WFC"><span class="pre">WFC</span></a></span></span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrBulk.wfc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrBulk.wfc" title="Permalink to this definition">#</a></dt>
<dd><p>Computes the waveform coherency (<strong>WFC</strong>) between the given reference
correlation(s) and correlation matrix.
If several references are given, it will loop over these</p>
<p>See Steinmann, et. al. (2021) for details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>refcorr</strong> (<em>np.ndarray</em>) – 1 or 2D reference Correlation Trace extracted from the
correlation data.
If 2D, it will be interpreted as one refcorr trace per row.</p></li>
<li><p><strong>tw</strong> (<em>np.ndarray</em>) – Lag time window to use for the computation</p></li>
<li><p><strong>sides</strong> (<em>str</em>) – Which sides to use. Can be <cite>both</cite>, <cite>right</cite>, <cite>left</cite>,
or <cite>single</cite>.</p></li>
<li><p><strong>tw_start</strong> (<em>float</em>) – Time window start in seconds lag time.</p></li>
<li><p><strong>tw_len</strong> (<em>float</em>) – Length of the Lapse time window in seconds.</p></li>
<li><p><strong>freq_min</strong> (<em>float</em>) – Highpass frequency used for the computed values. (Hz)</p></li>
<li><p><strong>freq_max</strong> (<em>float</em>) – Lowpass frequency used for the computed values. (Hz)</p></li>
<li><p><strong>remove_nans</strong> – Remove nans from CorrMatrix, defaults to True</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionary with one correlation array for each reference
trace. The keys are using the syntax <cite>reftr_%n</cite>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.stream.read_corr_bulk">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.stream.</span></span><span class="sig-name descname"><span class="pre">read_corr_bulk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#seismic.correlate.stream.CorrBulk" title="seismic.correlate.stream.CorrBulk"><span class="pre">CorrBulk</span></a></span></span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#read_corr_bulk"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.read_corr_bulk" title="Permalink to this definition">#</a></dt>
<dd><p>Reads a CorrBulk object from an <strong>.npz</strong> file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – Path to file</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the corresponding and converted CorrBulk object</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#seismic.correlate.stream.CorrBulk" title="seismic.correlate.stream.CorrBulk">CorrBulk</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrStream">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">seismic.correlate.stream.</span></span><span class="sig-name descname"><span class="pre">CorrStream</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">traces</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrStream"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrStream" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Stream</span></code></p>
<p>Baseclass to hold correlation traces. Basically just a list of the
correlation traces.</p>
<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrStream.create_corr_bulk">
<span class="sig-name descname"><span class="pre">create_corr_bulk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">network</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">station</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">times</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">UTCDateTime</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">UTCDateTime</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#seismic.correlate.stream.CorrBulk" title="seismic.correlate.stream.CorrBulk"><span class="pre">CorrBulk</span></a></span></span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrStream.create_corr_bulk"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrStream.create_corr_bulk" title="Permalink to this definition">#</a></dt>
<dd><p>Creates a CorrelationBulk object, which offers additional options for
faster postprocessing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>network</strong> (<em>str</em><em>, </em><em>optional</em>) – Select only this network, defaults to None</p></li>
<li><p><strong>station</strong> (<em>str</em><em>, </em><em>optional</em>) – Take data from this station, defaults to None</p></li>
<li><p><strong>channel</strong> (<em>str</em><em>, </em><em>optional</em>) – Take data from this channel. If None all channels will
be retained, defaults to None</p></li>
<li><p><strong>location</strong> (<em>str</em><em>, </em><em>optional</em>) – Take data from only this location. Else various
locations can be processed together, defaults to None</p></li>
<li><p><strong>times</strong> (<em>Tuple</em><em>[</em><em>UTCDateTime</em><em>, </em><em>UTCDateTime</em><em>]</em><em>, </em><em>optional</em>) – Only take data from this time window, defaults to None</p></li>
<li><p><strong>inplace</strong> (<em>bool</em><em>, </em><em>optional</em>) – The original data will be deleted to save memory,
defaults to True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The CorrelationBulk object</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#seismic.correlate.stream.CorrBulk" title="seismic.correlate.stream.CorrBulk">CorrBulk</a></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function will check whether the metadata of the input
stream is identical, so that correlations from different stations,
components, or differently processed data cannot be mixed.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrStream.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sort_by</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'corr_start'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timelimits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylimits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scalingfactor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Axes</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linewidth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputfile</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'heatmap'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'inferno'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrStream.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrStream.plot" title="Permalink to this definition">#</a></dt>
<dd><p>Creates a section plot of all correlations in this stream.
kwargs will be passed to
<a class="reference internal" href="#seismic.plot.plot_correlation.plot_cst" title="seismic.plot.plot_correlation.plot_cst"><code class="xref py py-func docutils literal notranslate"><span class="pre">plot_cst()</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sort_by</strong> (<em>str</em><em>, </em><em>optional</em>) – Which parameter to plot against. Can be either
<code class="docutils literal notranslate"><span class="pre">corr_start</span></code> or <code class="docutils literal notranslate"><span class="pre">distance</span></code>, defaults to ‘corr_start’.</p></li>
<li><p><strong>timelimits</strong> (<em>Tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em><em>, </em><em>optional</em>) – xlimits (lag time) in seconds, defaults to None</p></li>
<li><p><strong>ylimits</strong> (<em>Tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em><em>, </em><em>optional</em>) – limits for Y-axis (either a <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.datetime</span></code>
or float in km (if plotted against distance)), defaults to None.</p></li>
<li><p><strong>scalingfactor</strong> (<em>float</em><em>, </em><em>optional</em>) – Which factor to scale the Correlations with. Play
around with this if you want to make amplitudes bigger or smaller,
defaults to None (automatically chosen).</p></li>
<li><p><strong>ax</strong> (<em>plt.Axes</em><em>, </em><em>optional</em>) – Plot in existing axes? Defaults to None</p></li>
<li><p><strong>linewidth</strong> (<em>float</em><em>, </em><em>optional</em>) – Width of the lines to plot, defaults to 0.25</p></li>
<li><p><strong>outputfile</strong> (<em>str</em><em>, </em><em>optional</em>) – Save the plot? defaults to None</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of the plot, defaults to None</p></li>
<li><p><strong>type</strong> – Type of plot. Either <cite>‘heatmap’</cite> for a heat plot or
<cite>‘section’</cite> for a wiggle type plot. Defaults to heatmap.</p></li>
<li><p><strong>cmap</strong> – Decides about colormap if type == ‘heatmap’.</p></li>
</ul>
</dd>
</dl>
<p>Defaults to ‘inferno’.
:type cmap: str, optional</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you would like to plot a subset of this stream, use
<code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code>.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrStream.pop_at_utcs">
<span class="sig-name descname"><span class="pre">pop_at_utcs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">utcs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">UTCDateTime</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrStream.pop_at_utcs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrStream.pop_at_utcs" title="Permalink to this definition">#</a></dt>
<dd><p>Remove Correlations that contain any time given in <code class="docutils literal notranslate"><span class="pre">utcs</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>utcs</strong> (<em>npt.ArrayLike</em><em>[</em><em>UTCDateTime</em><em>]</em>) – Array Containing UTC times that should be filtered.
If UTC is between any of corr_start and corr_end, the corresponding
CorrTrace will be removed from the stream.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>filtered CorrStream</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#seismic.correlate.stream.CorrStream" title="seismic.correlate.stream.CorrStream">CorrStream</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrStream.remove_duplicates">
<span class="sig-name descname"><span class="pre">remove_duplicates</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrStream.remove_duplicates"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrStream.remove_duplicates" title="Permalink to this definition">#</a></dt>
<dd><p>Removes identical CorrTraces.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This action is performed <strong>in-place</strong>. If you want to keep
the original data use
<code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrStream.select_corr_time">
<span class="sig-name descname"><span class="pre">select_corr_time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">starttime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UTCDateTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endtime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UTCDateTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_partially_selected</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrStream.select_corr_time"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrStream.select_corr_time" title="Permalink to this definition">#</a></dt>
<dd><p>Selects correlations that are inside of the requested time window.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>starttime</strong> (<em>UTCDateTime</em>) – Requested start</p></li>
<li><p><strong>endtime</strong> (<em>UTCDateTime</em>) – Requested end</p></li>
<li><p><strong>include_partially_selected</strong> (<em>bool</em><em>, </em><em>optional</em>) – <p>If set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, also the half
selected time window <strong>before</strong> the requested time will be attached
Given the following stream containing 6 correlations, “|” are the
correlation starts and ends, “A” is the requested starttime and “B”
the corresponding endtime:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span>         <span class="o">|</span><span class="n">A</span>        <span class="o">|</span>         <span class="o">|</span>       <span class="n">B</span> <span class="o">|</span>         <span class="o">|</span>
<span class="mi">1</span>         <span class="mi">2</span>         <span class="mi">3</span>         <span class="mi">4</span>         <span class="mi">5</span>         <span class="mi">6</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">include_partially_selected=True</span></code> will select samples 2-4,
<code class="docutils literal notranslate"><span class="pre">include_partially_selected=False</span></code> will select samples 3-4 only.
Defaults to True</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Correlation Stream holding all selected traces</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#seismic.correlate.stream.CorrStream" title="seismic.correlate.stream.CorrStream">CorrStream</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrStream.slide">
<span class="sig-name descname"><span class="pre">slide</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_partially_selected</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">starttime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UTCDateTime</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endtime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UTCDateTime</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrStream.slide"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrStream.slide" title="Permalink to this definition">#</a></dt>
<dd><p>Generator yielding correlations that are inside of each requested time
window and inside of this stream.</p>
<p>Please keep in mind that it only returns a new view of the original
data. Any modifications are applied to the original data as well. If
you don’t want this you have to create a copy of the yielded
windows. Also be aware that if you modify the original data and you
have overlapping windows, all following windows are affected as well.</p>
<p>Not all yielded windows must have the same number of traces. The
algorithm will determine the maximal temporal extents by analysing
all Traces and then creates windows based on these times.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>window_length</strong> (<em>float</em>) – The length of the requested time window in
seconds. Note that the window length has to correspond at least to
the length of the longest correlation window (i.e., the length of
the correlated waveforms). This is because the correlations cannot
be sliced.</p></li>
<li><p><strong>step</strong> (<em>float</em>) – The step between the start times of two successive
windows in seconds. Has to be greater than 0</p></li>
<li><p><strong>include_partially_selected</strong> (<em>bool</em><em>, </em><em>optional</em>) – <p>If set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, also the half
selected time window <strong>before</strong> the requested time will be attached
Given the following stream containing 6 correlations, “|” are the
correlation starts and ends, “A” is the requested starttime and “B”
the corresponding endtime:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span>         <span class="o">|</span><span class="n">A</span>        <span class="o">|</span>         <span class="o">|</span>       <span class="n">B</span> <span class="o">|</span>         <span class="o">|</span>
<span class="mi">1</span>         <span class="mi">2</span>         <span class="mi">3</span>         <span class="mi">4</span>         <span class="mi">5</span>         <span class="mi">6</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">include_partially_selected=True</span></code> will select samples 2-4,
<code class="docutils literal notranslate"><span class="pre">include_partially_selected=False</span></code> will select samples 3-4 only.
Defaults to True.</p>
</p></li>
<li><p><strong>starttime</strong> (<em>UTCDateTime</em>) – Start the sequence at this time instead of the
earliest available starttime.</p></li>
<li><p><strong>endtime</strong> (<em>UTCDateTime</em>) – Start the sequence at this time instead of the
latest available endtime.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrStream.stack">
<span class="sig-name descname"><span class="pre">stack</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'by_length'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">starttime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UTCDateTime</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endtime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UTCDateTime</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stack_len</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regard_location</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrStream.stack"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrStream.stack" title="Permalink to this definition">#</a></dt>
<dd><p>Average the data of all traces in the given time windows.
Will only stack data from the same network/channel/station combination.
Location codes will only optionally be regarded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>starttime</strong> (<em>UTCDateTime</em><em>, </em><em>optional</em>) – starttime of the stacking time windows. If None, the
earliest available is chosen, defaults to None.</p></li>
<li><p><strong>endtime</strong> (<em>UTCDateTime</em><em>, </em><em>optional</em>) – endtime of the stacking time windows. If None, the
latest available is chosen, defaults to None</p></li>
<li><p><strong>stack_len</strong> (<em>intorstr</em><em>, </em><em>optional</em>) – Length of one stack. Is either a value in seconds,
the special option “daily” (creates 24h stacks that always start at
midnight), or 0 for a single stack over the whole time period,
defaults to 0.</p></li>
<li><p><strong>regard_location</strong> (<em>bool</em><em>, </em><em>optional</em>) – Don’t stack correlations with varying location
code combinations, defaults to True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A stream holding the stacks.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>:class`~seismic.correlate.stream.CorrStream`</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrTrace">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">seismic.correlate.stream.</span></span><span class="sig-name descname"><span class="pre">CorrTrace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stats</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stats</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inv</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Inventory</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_lag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_lag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_header</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrTrace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrTrace" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Trace</span></code></p>
<p>Baseclass to hold correlation data. Derived from the class
<code class="xref py py-class docutils literal notranslate"><span class="pre">Trace</span></code>.</p>
<p>Initialise the correlation trace. Is done by combining the stats of the
two <code class="xref py py-class docutils literal notranslate"><span class="pre">Trace</span></code> objects’ headers. If said headers
do not contain Station information (i.e., coordinates), an
<code class="xref py py-class docutils literal notranslate"><span class="pre">Inventory</span></code> with information about both
stations should be provided as well.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>np.ndarray</em>) – The correlation data</p></li>
<li><p><strong>header1</strong> (<em>Stats</em><em>, </em><em>optional</em>) – header of the first trace, defaults to None</p></li>
<li><p><strong>header2</strong> (<em>Stats</em><em>, </em><em>optional</em>) – header of the second trace, defaults to None</p></li>
<li><p><strong>inv</strong> (<em>Inventory</em><em>, </em><em>optional</em>) – Inventory object for the stations, defaults to None</p></li>
<li><p><strong>start_lag</strong> (<em>float</em>) – The lag of the first sample of the correlation given
in seconds.</p></li>
<li><p><strong>end_lag</strong> (<em>float</em>) – The lag of the last sample of the correlation
in seconds.</p></li>
<li><p><strong>_header</strong> (<em>dict</em><em>, </em><em>optional</em>) – Already combined header, used when reading correlations
from a file, defaults to None</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrTrace.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tlim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Axes</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputdir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clean</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Axes</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrTrace.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrTrace.plot" title="Permalink to this definition">#</a></dt>
<dd><p>Plots thios CorrelationTrace.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tlim</strong> (<em>Tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em><em>, </em><em>optional</em>) – Limits for the lapse axis in seconds, defaults to None</p></li>
<li><p><strong>ax</strong> (<em>plt.Axes</em><em>, </em><em>optional</em>) – Plot in existing axes, defaults to None</p></li>
<li><p><strong>outputdir</strong> (<em>str</em><em>, </em><em>optional</em>) – Save this plot? Defaults to None</p></li>
<li><p><strong>clean</strong> (<em>bool</em><em>, </em><em>optional</em>) – Make a clean plot without labels &amp; axes,
defaults to False.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.correlate.stream.CorrTrace.times">
<span class="sig-name descname"><span class="pre">times</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#CorrTrace.times"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.CorrTrace.times" title="Permalink to this definition">#</a></dt>
<dd><p>Convenience Function that returns an array holding the lag times of the
correlation.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Array with lag times</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.stream.alphabetical_correlation">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.stream.</span></span><span class="sig-name descname"><span class="pre">alphabetical_correlation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">header1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stats</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stats</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_lag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_lag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inv</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Inventory</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#alphabetical_correlation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.alphabetical_correlation" title="Permalink to this definition">#</a></dt>
<dd><p>Make sure that Correlations are always created in alphabetical order,
so that we won’t have both a correlation for AB-CD and CD-AB.
If the correlation was computed in the wrong order, the corr-data will be
flipped along the t-axis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>header1</strong> (<em>Stats</em>) – Header of the first trace.</p></li>
<li><p><strong>header2</strong> (<em>Stats</em>) – Header of the second trace</p></li>
<li><p><strong>start_lag</strong> (<em>float</em>) – start lag in s</p></li>
<li><p><strong>end_lag</strong> (<em>float</em>) – end lag in s</p></li>
<li><p><strong>data</strong> (<em>np.ndarray</em>) – The computed cross-correlation for header1-header2</p></li>
<li><p><strong>inv</strong> (<em>Inventory</em>) – The inventory holding the station coordinates. Only needed if
coords aren’t provided in stats.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the header for the CorrTrace and the data
(will also be modified in place)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[Stats, np.ndarray]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.stream.combine_stats">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.stream.</span></span><span class="sig-name descname"><span class="pre">combine_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stats1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stats</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stats</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_lag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inv</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Inventory</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a></span></span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#combine_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.combine_stats" title="Permalink to this definition">#</a></dt>
<dd><p>Combine the meta-information of two ObsPy Trace.Stats objects</p>
<p>This function returns a ObsPy <code class="xref py py-class docutils literal notranslate"><span class="pre">Stats</span></code> object
obtained combining the two associated with the input Traces.
Namely <code class="docutils literal notranslate"><span class="pre">stats1</span></code> and <code class="docutils literal notranslate"><span class="pre">stats2</span></code>.</p>
<p>The fields [‘network’,’station’,’location’,’channel’] are combined in
a <code class="docutils literal notranslate"><span class="pre">-</span></code> separated fashion to create a “pseudo” SEED like <code class="docutils literal notranslate"><span class="pre">id</span></code>.</p>
<p>For all the others fields, only “common” information are retained: This
means that only keywords that exist in both dictionaries will be included
in the resulting one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stats1</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Stats</span></code>) – First Trace’s stats</p></li>
<li><p><strong>stats2</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Stats</span></code>) – Second Trace’s stats</p></li>
<li><p><strong>start_lag</strong> (<em>float</em>) – The lag of the first sample of the correlation given
in seconds (usually negative).</p></li>
<li><p><strong>inv</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Inventory</span></code>, optional) – Inventory containing the station coordinates. Only needed if
station coordinates are not in Trace.Stats. Defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Stats</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>stats</strong>: combined Stats object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.stream.compare_tr_id">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.stream.</span></span><span class="sig-name descname"><span class="pre">compare_tr_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tr0</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Trace</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tr1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Trace</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regard_loc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#compare_tr_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.compare_tr_id" title="Permalink to this definition">#</a></dt>
<dd><p>Check whether two traces are from the same channel, station, network, and,
optionally, location. Useful for stacking</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tr0</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Trace</span></code>) – first trace</p></li>
<li><p><strong>tr1</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Trace</span></code>) – second trace</p></li>
<li><p><strong>regard_loc</strong> (<em>bool</em>) – Regard the location code or not</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Bool whether the two are from the same (True) or not (False)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.stream.stack_st_by_group">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.stream.</span></span><span class="sig-name descname"><span class="pre">stack_st_by_group</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">st</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regard_loc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#seismic.correlate.stream.CorrStream" title="seismic.correlate.stream.CorrStream"><span class="pre">CorrStream</span></a></span></span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#stack_st_by_group"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.stack_st_by_group" title="Permalink to this definition">#</a></dt>
<dd><p>Stack all traces that belong to the same network, station, channel, and
(optionally) location combination in the input stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> (<em>Stream</em>) – input Stream</p></li>
<li><p><strong>regard_loc</strong> (<em>bool</em>) – Seperate data with different location code</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#seismic.correlate.stream.CorrStream" title="seismic.correlate.stream.CorrStream"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrStream</span></code></a></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#seismic.correlate.stream.CorrStream" title="seismic.correlate.stream.CorrStream">CorrStream</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.stream.stack_st">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.stream.</span></span><span class="sig-name descname"><span class="pre">stack_st</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">st</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.correlate.stream.CorrStream" title="seismic.correlate.stream.CorrStream"><span class="pre">CorrStream</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#seismic.correlate.stream.CorrTrace" title="seismic.correlate.stream.CorrTrace"><span class="pre">CorrTrace</span></a></span></span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#stack_st"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.stack_st" title="Permalink to this definition">#</a></dt>
<dd><p>Returns an average of the data of all traces in the stream. Also adjusts
the corr_start and corr_end parameters in the header.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> (<a class="reference internal" href="#seismic.correlate.stream.CorrStream" title="seismic.correlate.stream.CorrStream"><em>CorrStream</em></a>) – input Stream</p></li>
<li><p><strong>weight</strong> – type of weigthing to use. Either <cite>mean</cite> or <cite>by_length</cite></p></li>
<li><p><strong>norm</strong> (<em>bool</em>) – Should the traces be normalised by their absolute maximum
prior to stacking?</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Single trace with stacked data</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#seismic.correlate.stream.CorrTrace" title="seismic.correlate.stream.CorrTrace">CorrTrace</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.stream.convert_statlist_to_bulk_stats">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.stream.</span></span><span class="sig-name descname"><span class="pre">convert_statlist_to_bulk_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statlist</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varying_loc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varying_channel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a></span></span><a class="reference internal" href="../../_modules/seismic/correlate/stream.html#convert_statlist_to_bulk_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stream.convert_statlist_to_bulk_stats" title="Permalink to this definition">#</a></dt>
<dd><p>Converts a list of <a class="reference internal" href="#seismic.correlate.stream.CorrTrace" title="seismic.correlate.stream.CorrTrace"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrTrace</span></code></a> stats
objects to a single stats object that can be used for the creation of a
<a class="reference internal" href="#seismic.correlate.stream.CorrBulk" title="seismic.correlate.stream.CorrBulk"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrBulk</span></code></a> object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>statlist</strong> (<em>List</em><em>[</em><em>Stats</em><em>]</em>) – list of Stats</p></li>
<li><p><strong>varying_loc</strong> (<em>bool</em>) – Set true if the location codes vary. Defaults to True.</p></li>
<li><p><strong>varying_loc</strong> – Set true if the channel codes vary (e.g., EHZ to BHZ),
defaults to False.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – raised if data does not fit together</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>single Stats object</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Stats</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="seismic-correlate-stats">
<h3>seismic.correlate.stats<a class="headerlink" href="#seismic-correlate-stats" title="Permalink to this heading">#</a></h3>
<p>Managing headers</p>
<span class="target" id="module-seismic.correlate.stats"></span><dl class="field-list">
<dt class="field-odd">copyright<span class="colon">:</span></dt>
<dd class="field-odd"><p>The SeisMIC development team (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>).</p>
</dd>
<dt class="field-even">license<span class="colon">:</span></dt>
<dd class="field-even"><blockquote>
<div><p>EUROPEAN UNION PUBLIC LICENCE v. 1.2</p>
</div></blockquote>
<p>(<a class="reference external" href="https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12">https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12</a>)</p>
</dd>
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Monday, 5th July 2021 02:44:13 pm
Last Modified: Monday, 30th January 2023 02:26:32 pm</p>
<dl class="py class">
<dt class="sig sig-object py" id="seismic.correlate.stats.CorrStats">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">seismic.correlate.stats.</span></span><span class="sig-name descname"><span class="pre">CorrStats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/stats.html#CorrStats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.stats.CorrStats" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">AttribDict</span></code></p>
<p>From Obspy, but with the difference that some items can be lists and that
corr_start and corr_end are introduced, some other differences only for
correlations.</p>
<p>A container for additional header information of a ObsPy Trace object.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">Stats</span></code> object may contain all header information (also known as meta
data) of a <a class="reference internal" href="#seismic.correlate.stream.CorrTrace" title="seismic.correlate.stream.CorrTrace"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrTrace</span></code></a> object. Those
headers may be accessed or modified either in the dictionary style or
directly via a corresponding attribute. There are various default
attributes which are required by every waveform import and export modules
within ObsPy such as <code class="xref py py-mod docutils literal notranslate"><span class="pre">obspy.io.mseed</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>header</strong> (dict or <code class="xref py py-class docutils literal notranslate"><span class="pre">Stats</span></code>, optional) – Dictionary containing meta information of a single
<code class="xref py py-class docutils literal notranslate"><span class="pre">Trace</span></code> object. Possible keywords are
summarized in the following <a class="reference internal" href="#default-attributes">Default Attributes</a> section.</p>
</dd>
</dl>
<p class="rubric">Basic Usage</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span> <span class="o">=</span> <span class="n">CorrStats</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;BW&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">stats</span><span class="p">[</span><span class="s1">&#39;network&#39;</span><span class="p">])</span>
<span class="go">BW</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="p">[</span><span class="s1">&#39;station&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;MANZ&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">stats</span><span class="o">.</span><span class="n">station</span><span class="p">)</span>
<span class="go">MANZ</span>
</pre></div>
</div>
<p class="rubric"><span class="target" id="default-attributes">Default Attributes</span></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">sampling_rate</span></code><span class="classifier">float, optional</span></dt><dd><p>Sampling rate in hertz (default value is 1.0).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">delta</span></code><span class="classifier">float, optional</span></dt><dd><p>Sample distance in seconds (default value is 1.0).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">calib</span></code><span class="classifier">float, optional</span></dt><dd><p>Calibration factor (default value is 1.0).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">npts</span></code><span class="classifier">int, optional</span></dt><dd><p>Number of sample points (default value is 0, which implies that no data
is present).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">network</span></code><span class="classifier">string, optional</span></dt><dd><p>Network code (default is an empty string).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">location</span></code><span class="classifier">string, optional</span></dt><dd><p>Location code (default is an empty string).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">station</span></code><span class="classifier">string, optional</span></dt><dd><p>Station code (default is an empty string).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">channel</span></code><span class="classifier">string, optional</span></dt><dd><p>Channel code (default is an empty string).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">starttime</span></code><span class="classifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">UTCDateTime</span></code>, optional</span></dt><dd><p>Date and time of the first data sample used for correlation in UTC
(default value is “1970-01-01T00:00:00.0Z”).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">endtime</span></code><span class="classifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">UTCDateTime</span></code>, optional</span></dt><dd><p>Date and time of the last data sample used for correlation in UTC
(default value is “1970-01-01T00:00:00.0Z”).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">corr_start</span></code>: <code class="xref py py-class docutils literal notranslate"><span class="pre">UTCDateTime</span></code>, optional</dt><dd><p>Date and time of the first data sample used for correlation in UTC
(default value is “1970-01-01T00:00:00.0Z”).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">corr_end</span></code>: <code class="xref py py-class docutils literal notranslate"><span class="pre">UTCDateTime</span></code>, optional</dt><dd><p>Date and time of the last data sample used for correlation in UTC
(default value is “1970-01-01T00:00:00.0Z”).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">start_lag</span></code>: float, optional</dt><dd><p>Lag of the first sample in seconds (usually negative)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">end_lag</span></code>: float, optional</dt><dd><p>Lag of the last sample in seconds.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<ol class="arabic">
<li><p>The attributes <code class="docutils literal notranslate"><span class="pre">sampling_rate</span></code> and <code class="docutils literal notranslate"><span class="pre">delta</span></code> are linked to each
other. If one of the attributes is modified the other will be
recalculated.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span> <span class="o">=</span> <span class="n">Stats</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">sampling_rate</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">delta</span> <span class="o">=</span> <span class="mf">0.005</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">sampling_rate</span>
<span class="go">200.0</span>
</pre></div>
</div>
</li>
<li><p>The attributes <code class="docutils literal notranslate"><span class="pre">start_lag</span></code>, <code class="docutils literal notranslate"><span class="pre">npts</span></code>, <code class="docutils literal notranslate"><span class="pre">sampling_rate</span></code> and <code class="docutils literal notranslate"><span class="pre">delta</span></code>
are monitored and used to automatically calculate the <code class="docutils literal notranslate"><span class="pre">end_lag</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span> <span class="o">=</span> <span class="n">Stats</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">npts</span> <span class="o">=</span> <span class="mi">61</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">delta</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">start_lag</span> <span class="o">=</span> <span class="o">-</span><span class="mi">30</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">end_lag</span>
<span class="go">30</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">delta</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">end_lag</span>
<span class="go">0</span>
</pre></div>
</div>
</li>
<li><p>The attribute <code class="docutils literal notranslate"><span class="pre">endtime</span></code>, <code class="docutils literal notranslate"><span class="pre">end_lag</span></code>, and <code class="docutils literal notranslate"><span class="pre">starttime</span></code> are
read only and cannot be modified. <code class="docutils literal notranslate"><span class="pre">starttime</span></code> and <code class="docutils literal notranslate"><span class="pre">endtime</span></code> are
just simply aliases of <code class="docutils literal notranslate"><span class="pre">corr_start</span></code> and <code class="docutils literal notranslate"><span class="pre">corr_end</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span> <span class="o">=</span> <span class="n">Stats</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">endtime</span> <span class="o">=</span> <span class="n">UTCDateTime</span><span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">AttributeError</span>: <span class="n">Attribute &quot;endtime&quot; in Stats object is read only!</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="p">[</span><span class="s1">&#39;endtime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">UTCDateTime</span><span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">AttributeError</span>: <span class="n">Attribute &quot;endtime&quot; in Stats object is read only!</span>
</pre></div>
</div>
</li>
<li><p>The attribute <code class="docutils literal notranslate"><span class="pre">npts</span></code> will be automatically updated from the
<a class="reference internal" href="#seismic.correlate.stream.CorrTrace" title="seismic.correlate.stream.CorrTrace"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrTrace</span></code></a> object.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">trace</span> <span class="o">=</span> <span class="n">CorrTrace</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">npts</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trace</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">npts</span>
<span class="go">4</span>
</pre></div>
</div>
</li>
<li><p>The attribute <code class="docutils literal notranslate"><span class="pre">component</span></code> can be used to get or set the component,
i.e. the last character of the <code class="docutils literal notranslate"><span class="pre">channel</span></code> attribute.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span> <span class="o">=</span> <span class="n">Stats</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">channel</span> <span class="o">=</span> <span class="s1">&#39;HHZ&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">component</span>  
<span class="go">&#39;Z&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="s1">&#39;L&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">channel</span>  
<span class="go">&#39;HHL&#39;</span>
</pre></div>
</div>
</li>
</ol>
<dl class="py attribute">
<dt class="sig sig-object py" id="seismic.correlate.stats.CorrStats.readonly">
<span class="sig-name descname"><span class="pre">readonly</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['endtime',</span> <span class="pre">'end_lag',</span> <span class="pre">'starttime']</span></em><a class="headerlink" href="#seismic.correlate.stats.CorrStats.readonly" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="seismic.correlate.stats.CorrStats.defaults">
<span class="sig-name descname"><span class="pre">defaults</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'calib':</span> <span class="pre">1.0,</span> <span class="pre">'channel':</span> <span class="pre">'',</span> <span class="pre">'corr_end':</span> <span class="pre">UTCDateTime(1970,</span> <span class="pre">1,</span> <span class="pre">1,</span> <span class="pre">0,</span> <span class="pre">0),</span> <span class="pre">'corr_start':</span> <span class="pre">UTCDateTime(1970,</span> <span class="pre">1,</span> <span class="pre">1,</span> <span class="pre">0,</span> <span class="pre">0),</span> <span class="pre">'delta':</span> <span class="pre">1.0,</span> <span class="pre">'end_lag':</span> <span class="pre">0,</span> <span class="pre">'endtime':</span> <span class="pre">UTCDateTime(1970,</span> <span class="pre">1,</span> <span class="pre">1,</span> <span class="pre">0,</span> <span class="pre">0),</span> <span class="pre">'location':</span> <span class="pre">'',</span> <span class="pre">'network':</span> <span class="pre">'',</span> <span class="pre">'npts':</span> <span class="pre">0,</span> <span class="pre">'sampling_rate':</span> <span class="pre">1.0,</span> <span class="pre">'start_lag':</span> <span class="pre">0,</span> <span class="pre">'starttime':</span> <span class="pre">UTCDateTime(1970,</span> <span class="pre">1,</span> <span class="pre">1,</span> <span class="pre">0,</span> <span class="pre">0),</span> <span class="pre">'station':</span> <span class="pre">''}</span></em><a class="headerlink" href="#seismic.correlate.stats.CorrStats.defaults" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="seismic-correlate-preprocessing-stream">
<h3>seismic.correlate.preprocessing_stream<a class="headerlink" href="#seismic-correlate-preprocessing-stream" title="Permalink to this heading">#</a></h3>
<p>Preprocessing functions that are executed on Obspy Streams</p>
<span class="target" id="module-seismic.correlate.preprocessing_stream"></span><p>Module that contains functions for preprocessing on obspy streams</p>
<dl class="field-list">
<dt class="field-odd">copyright<span class="colon">:</span></dt>
<dd class="field-odd"><p>The SeisMIC development team (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>).</p>
</dd>
<dt class="field-even">license<span class="colon">:</span></dt>
<dd class="field-even"><blockquote>
<div><p>EUROPEAN UNION PUBLIC LICENCE v. 1.2</p>
</div></blockquote>
<p>(<a class="reference external" href="https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12">https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12</a>)</p>
</dd>
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Tuesday, 20th July 2021 03:47:00 pm
Last Modified: Thursday, 29th June 2023 11:06:00 am</p>
<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.preprocessing_stream.cos_taper_st">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.preprocessing_stream.</span></span><span class="sig-name descname"><span class="pre">cos_taper_st</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">st</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">taper_len</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lossless</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">taper_at_masked</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Stream</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/preprocessing_stream.html#cos_taper_st"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.preprocessing_stream.cos_taper_st" title="Permalink to this definition">#</a></dt>
<dd><p>Applies a cosine taper to the input Stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tr</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Stream</span></code>) – Input Stream</p></li>
<li><p><strong>taper_len</strong> (<em>float</em>) – Length of the taper per side</p></li>
<li><p><strong>taper_at_masked</strong> (<em>bool</em>) – applies a split to each trace and merges again
afterwards</p></li>
<li><p><strong>lossless</strong> – Lossless tapering pads the trace’s ends with a copy of
the trace’s data before tapering. Note that you will want to trim
the trace later to remove this artificial ends.</p></li>
</ul>
</dd>
</dl>
<p>type lossless: bool
:return: Tapered Stream
:rtype: <code class="xref py py-class docutils literal notranslate"><span class="pre">Stream</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This action is performed in place. If you want to keep the
original data use <code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code>.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.preprocessing_stream.cos_taper">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.preprocessing_stream.</span></span><span class="sig-name descname"><span class="pre">cos_taper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Trace</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">taper_len</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">taper_at_masked</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lossless</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Trace</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/preprocessing_stream.html#cos_taper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.preprocessing_stream.cos_taper" title="Permalink to this definition">#</a></dt>
<dd><p>Applies a cosine taper to the input trace.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tr</strong> (<em>Trace</em>) – Input Trace</p></li>
<li><p><strong>taper_len</strong> (<em>float</em>) – Length of the taper per side in seconds</p></li>
<li><p><strong>taper_at_masked</strong> (<em>bool</em>) – applies a split to each trace and merges again
afterwards. Lossless tapering is not supporting if the trace contains
masked values in the middle of the trace</p></li>
<li><p><strong>lossless</strong> – Lossless tapering pads the trace’s ends with a copy of
the trace’s data before tapering. Note that you will want to trim
the trace later to remove this artificial ends.</p></li>
</ul>
</dd>
</dl>
<p>type lossless: bool
:return: Tapered Trace
:rtype: Trace</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This action is performed in place. If you want to keep the
original data use <code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code>.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.preprocessing_stream.detrend_st">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.preprocessing_stream.</span></span><span class="sig-name descname"><span class="pre">detrend_st</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">st</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stream</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Stream</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/preprocessing_stream.html#detrend_st"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.preprocessing_stream.detrend_st" title="Permalink to this definition">#</a></dt>
<dd><p>Detrends a stream while dealing with data gaps</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>st</strong> (<em>Stream</em>) – input Stream</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the obspy Stream detrended</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Stream</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This action is performed in place. If you want to keep the
original data use <code class="xref py py-func docutils literal notranslate"><span class="pre">copy()</span></code>.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.preprocessing_stream.stream_filter">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.preprocessing_stream.</span></span><span class="sig-name descname"><span class="pre">stream_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">st</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ftype</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_option</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Stream</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/preprocessing_stream.html#stream_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.preprocessing_stream.stream_filter" title="Permalink to this definition">#</a></dt>
<dd><p>Filter each trace of a Stream according to the given parameters</p>
<p>This faction apply the specified filter function to all the traces in the
present in the input <code class="xref py py-class docutils literal notranslate"><span class="pre">Stream</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ftype</strong> (<em>str</em>) – String that specifies which filter is applied (e.g.
<code class="docutils literal notranslate"><span class="pre">&quot;bandpass&quot;</span></code>). See the <a class="reference internal" href="#supported-filter">Supported Filter</a> section below for
further details.</p></li>
<li><p><strong>filter_option</strong> (<em>dict</em>) – Necessary arguments for the respective filter
that will be passed on. (e.g. <code class="docutils literal notranslate"><span class="pre">freqmin=1.0</span></code>, <code class="docutils literal notranslate"><span class="pre">freqmax=20.0</span></code> for
<code class="docutils literal notranslate"><span class="pre">&quot;bandpass&quot;</span></code>)</p></li>
</ul>
</dd>
<dt class="field-even">Pram parallel<span class="colon">:</span></dt>
<dd class="field-even"><p>If the filtering will be run in parallel or not</p>
</dd>
<dt class="field-odd">Pram processes<span class="colon">:</span></dt>
<dd class="field-odd"><p>Number of processes to start (if None it will be equal
to the number of cores available in the hosting machine)</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This operation is performed in place on the actual data arrays. The
raw data is not accessible anymore afterwards. To keep your
original data, use <code class="xref py py-func docutils literal notranslate"><span class="pre">stream_copy()</span></code> to create
a copy of your stream object.
This function can also work in parallel an all or a specified number of
cores available in the hosting machine.</p>
</div>
<p class="rubric"><span class="target" id="supported-filter">Supported Filter</span></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'bandpass'</span></code></dt><dd><p>Butterworth-Bandpass (uses <code class="xref py py-func docutils literal notranslate"><span class="pre">obspy.signal.filter.bandpass()</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'bandstop'</span></code></dt><dd><p>Butterworth-Bandstop (uses <code class="xref py py-func docutils literal notranslate"><span class="pre">obspy.signal.filter.bandstop()</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'lowpass'</span></code></dt><dd><p>Butterworth-Lowpass (uses <code class="xref py py-func docutils literal notranslate"><span class="pre">obspy.signal.filter.lowpass()</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'highpass'</span></code></dt><dd><p>Butterworth-Highpass (uses <code class="xref py py-func docutils literal notranslate"><span class="pre">obspy.signal.filter.highpass()</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'lowpassCheby2'</span></code></dt><dd><p>Cheby2-Lowpass (uses <code class="xref py py-func docutils literal notranslate"><span class="pre">obspy.signal.filter.lowpassCheby2()</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'lowpassFIR'</span></code> (experimental)</dt><dd><p>FIR-Lowpass (uses <code class="xref py py-func docutils literal notranslate"><span class="pre">obspy.signal.filter.lowpassFIR()</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'remezFIR'</span></code> (experimental)</dt><dd><p>Minimax optimal bandpass using Remez algorithm (uses
<code class="xref py py-func docutils literal notranslate"><span class="pre">obspy.signal.filter.remezFIR()</span></code>).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.preprocessing_stream.stream_mask_at_utc">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.preprocessing_stream.</span></span><span class="sig-name descname"><span class="pre">stream_mask_at_utc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">st</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">starts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">UTCDateTime</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ends</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">UTCDateTime</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">masklen</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reverse</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Stream</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/preprocessing_stream.html#stream_mask_at_utc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.preprocessing_stream.stream_mask_at_utc" title="Permalink to this definition">#</a></dt>
<dd><p>Mask the Data in the Stream between the times given by <code class="docutils literal notranslate"><span class="pre">starts</span></code> and
<code class="docutils literal notranslate"><span class="pre">ends</span></code> or between <code class="docutils literal notranslate"><span class="pre">starts</span></code> and <code class="docutils literal notranslate"><span class="pre">starts``+``masklen</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> (<em>Stream</em>) – Input Strem to be tapered</p></li>
<li><p><strong>starts</strong> (<em>List</em><em>[</em><em>UTCDateTime</em><em>]</em>) – Start-time (in UTC) that the masked values should start from</p></li>
<li><p><strong>ends</strong> (<em>List</em><em>[</em><em>UTCDateTime</em><em>]</em><em>, </em><em>optional</em>) – End times (in UTC) of the masked values. Has to have the same
length as starts. If None, <cite>masklen</cite> has to be defined,
defaults to None.</p></li>
<li><p><strong>masklen</strong> (<em>float</em><em>, </em><em>optional</em>) – Alternatively to providing ends, one can provide a constant
length (in s) per mask, defaults to None.</p></li>
<li><p><strong>reverse</strong> (<em>bool</em><em>, </em><em>optional</em>) – Only keep the data in the mask unmasked and mask everything
else. Defaults to False.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If <cite>ends</cite>, <cite>starts</cite>, and <cite>masklen</cite> are incompatible
with each other.</p>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This function will not taper before and after the mask.
If you should desire to do so use.
<a class="reference internal" href="#seismic.correlate.preprocessing_stream.cos_taper_st" title="seismic.correlate.preprocessing_stream.cos_taper_st"><code class="xref py py-func docutils literal notranslate"><span class="pre">cos_taper_st()</span></code></a> and set
<code class="docutils literal notranslate"><span class="pre">taper_at_mask</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.preprocessing_stream.trace_mask_at_utc">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.preprocessing_stream.</span></span><span class="sig-name descname"><span class="pre">trace_mask_at_utc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Trace</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">starts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ends</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reverse</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/correlate/preprocessing_stream.html#trace_mask_at_utc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.preprocessing_stream.trace_mask_at_utc" title="Permalink to this definition">#</a></dt>
<dd><div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#seismic.correlate.preprocessing_stream.stream_mask_at_utc" title="seismic.correlate.preprocessing_stream.stream_mask_at_utc"><code class="xref py py-func docutils literal notranslate"><span class="pre">stream_mask_at_utc()</span></code></a></p>
</div>
</dd></dl>

</section>
<section id="seismic-correlate-preprocessing-td">
<h3>seismic.correlate.preprocessing_td<a class="headerlink" href="#seismic-correlate-preprocessing-td" title="Permalink to this heading">#</a></h3>
<p>Preprocessing functions that are executed in Time Domain</p>
<span class="target" id="module-seismic.correlate.preprocessing_td"></span><p>Module that contains functions for preprocessing in the time domain</p>
<dl class="field-list">
<dt class="field-odd">copyright<span class="colon">:</span></dt>
<dd class="field-odd"><p>The SeisMIC development team (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>).</p>
</dd>
<dt class="field-even">license<span class="colon">:</span></dt>
<dd class="field-even"><blockquote>
<div><p>EUROPEAN UNION PUBLIC LICENCE v. 1.2</p>
</div></blockquote>
<p>(<a class="reference external" href="https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12">https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12</a>)</p>
</dd>
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Tuesday, 20th July 2021 03:24:01 pm
Last Modified: Thursday, 29th June 2023 11:15:56 am</p>
<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.preprocessing_td.clip">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.preprocessing_td.</span></span><span class="sig-name descname"><span class="pre">clip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/preprocessing_td.html#clip"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.preprocessing_td.clip" title="Permalink to this definition">#</a></dt>
<dd><p>Clip time series data at a multiple of the standard deviation</p>
<p>Set amplitudes exeeding a certain threshold to this threshold.
The threshold for clipping is estimated as the standard deviation of each
trace times a factor specified in <cite>args</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Note<span class="colon">:</span></dt>
<dd class="field-odd"><p>Traces should be demeaned before clipping.</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.ndarray</em>) – time series data with time oriented along the first dimension (columns)</p></li>
<li><p><strong>args</strong> (<em>dictionary</em>) – the only keyword allowed is <cite>std_factor</cite> describing the scaling of the standard deviation for the clipping threshold</p></li>
<li><p><strong>params</strong> (<em>dictionary</em>) – not used here</p></li>
</ul>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>clipped time series data</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.preprocessing_td.detrend">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.preprocessing_td.</span></span><span class="sig-name descname"><span class="pre">detrend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/preprocessing_td.html#detrend"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.preprocessing_td.detrend" title="Permalink to this definition">#</a></dt>
<dd><p>Detrend wrapper. Can call scipy.signal.detrend or a faster custom function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>np.ndarray</em>) – 1 or 2D array</p></li>
<li><p><strong>args</strong> (<em>dict</em>) – arguments for detrend function</p></li>
<li><p><strong>params</strong> (<em>dict</em>) – params file</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – For unknown detrend method</p></li>
<li><p><strong>ValueError</strong> – For unknown detrend type</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>detrended data</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.preprocessing_td.detrend_scipy">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.preprocessing_td.</span></span><span class="sig-name descname"><span class="pre">detrend_scipy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/preprocessing_td.html#detrend_scipy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.preprocessing_td.detrend_scipy" title="Permalink to this definition">#</a></dt>
<dd><p>Remove trend from data</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">scipy.signal.detrend()</span></code> for input arguments</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.preprocessing_td.detrendqr">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.preprocessing_td.</span></span><span class="sig-name descname"><span class="pre">detrendqr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/preprocessing_td.html#detrendqr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.preprocessing_td.detrendqr" title="Permalink to this definition">#</a></dt>
<dd><p>Remove trend from data using QR decomposition. Faster than
scipy.signal.detrend. Shamelessly adapted from
NoisePy</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Adapted from <a class="reference external" href="https://doi.org/10.1785/0220190364">NoisePy</a></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<em>np.ndarray</em>) – 1 or 2D array</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – For data with more than 2 dimensions</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>detrended data</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.preprocessing_td.demean">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.preprocessing_td.</span></span><span class="sig-name descname"><span class="pre">demean</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/preprocessing_td.html#demean"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.preprocessing_td.demean" title="Permalink to this definition">#</a></dt>
<dd><p>Demean data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<em>np.ndarray</em>) – 1 or 2D array</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>demeaned data</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.preprocessing_td.mute">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.preprocessing_td.</span></span><span class="sig-name descname"><span class="pre">mute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/preprocessing_td.html#mute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.preprocessing_td.mute" title="Permalink to this definition">#</a></dt>
<dd><p>Mute parts of data that exceed a threshold</p>
<p>To completely surpress the effect of data with high amplitudes e.g. after
aftershocks these parts of the data are muted (set to zero). The respective
parts of the signal are identified as those where the envelope in a given
frequency exceeds a threshold given directly as absolute numer or as a
multiple of the data’s standard deviation. A taper of length <cite>taper_len</cite> is
applied to smooth the edges of muted segments. Setting <cite>extend_gaps</cite> to
True will ensure that the taper is applied outside the segments and data
inside these segments will all zero. Edges of the data will be tapered too
in this case.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.ndarray</em>) – time series data with time oriented along the first dimension
(columns)</p></li>
<li><p><strong>args</strong> (<em>dictionary</em>) – <p>the following keywords are allowed:</p>
<ul>
<li><dl class="simple">
<dt><cite>filter</cite>:</dt><dd><p>(dictionary) description of filter to be applied before
calculation of the signal envelope. If not given the envelope is
calculated from raw data. The value of the keyword filter is the
same as the <cite>args</cite> for the function <cite>TDfilter</cite>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><cite>threshold</cite>:</dt><dd><p>(float) absolute amplitude of threshold for muting</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><cite>std_factor</cite>:</dt><dd><p>(float) alternativly to an absolute number the threhold
can be estimated as a multiple of the standard deviation if the
scaling is given in as value of the keyword <cite>std_factor</cite>. If
neither <cite>threshold</cite> nor <cite>std_factor</cite> are given <cite>std_factor=1</cite> is
assumed.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><cite>extend_gaps</cite>:</dt><dd><p>(boolean) if True date above the threshold is
guaranteed to be muted, otherwise tapering will leak into these
parts. This step involves an additional convolution.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><cite>taper_len</cite>:</dt><dd><p>(float) length of taper for muted segments in seconds</p>
</dd>
</dl>
</li>
</ul>
</p></li>
<li><p><strong>params</strong> (<em>dictionary</em>) – filled automatically by <cite>pxcorr</cite></p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy.ndarray</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>clipped time series data</p>
</dd>
<dt class="field-even">Example<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">args={'filter':{'type':'bandpass',</span> <span class="pre">'freqmin':1.,</span> <span class="pre">'freqmax':6.},</span>
<span class="pre">'taper_len':1.,</span> <span class="pre">'threshold':1000,</span> <span class="pre">'std_factor':1,</span> <span class="pre">'extend_gaps':True}</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.preprocessing_td.normalizeStandardDeviation">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.preprocessing_td.</span></span><span class="sig-name descname"><span class="pre">normalizeStandardDeviation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/preprocessing_td.html#normalizeStandardDeviation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.preprocessing_td.normalizeStandardDeviation" title="Permalink to this definition">#</a></dt>
<dd><p>Divide the time series by their standard deviation</p>
<p>Divide the amplitudes of each trace by its standard deviation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.ndarray</em>) – time series data with time oriented along the first dimension (columns)</p></li>
<li><p><strong>args</strong> (<em>dictionary</em>) – not used here</p></li>
<li><p><strong>params</strong> (<em>dictionary</em>) – not used here</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy.ndarray</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>normalized time series data</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.preprocessing_td.signBitNormalization">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.preprocessing_td.</span></span><span class="sig-name descname"><span class="pre">signBitNormalization</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/preprocessing_td.html#signBitNormalization"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.preprocessing_td.signBitNormalization" title="Permalink to this definition">#</a></dt>
<dd><p>One bit normalization of time series data</p>
<p>Return the sign of the samples (-1, 0, 1).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.ndarray</em>) – time series data with time oriented along the first dimension (columns)</p></li>
<li><p><strong>args</strong> (<em>dictionary</em>) – not used here</p></li>
<li><p><strong>params</strong> (<em>dictionary</em>) – not used here</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy.ndarray</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>1-bit normalized time series data</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.preprocessing_td.taper">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.preprocessing_td.</span></span><span class="sig-name descname"><span class="pre">taper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/preprocessing_td.html#taper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.preprocessing_td.taper" title="Permalink to this definition">#</a></dt>
<dd><p>Taper to the time series data</p>
<p>Apply a simple taper to the time series data.</p>
<p><cite>args</cite> has the following structure:</p>
<blockquote>
<div><p>args = {‘type’:<cite>type of taper</cite>,taper_args}``</p>
<p><cite>type</cite> may be <cite>cosine_taper</cite> with the corresponding taper_args <cite>p</cite> the
percentage of the traces to taper. Possibilities of <cite>type</cite> are given by <cite>obspy.signal</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">args</span> <span class="pre">=</span> <span class="pre">{'type':'cosine_taper','p':0.1}</span></code></p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.ndarray</em>) – time series data with time oriented along the first dimension (columns)</p></li>
<li><p><strong>args</strong> (<em>dictionary</em>) – arguments dictionary as described above</p></li>
<li><p><strong>params</strong> (<em>dictionary</em>) – not used here</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy.ndarray</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>tapered time series data</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.preprocessing_td.TDnormalization">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.preprocessing_td.</span></span><span class="sig-name descname"><span class="pre">TDnormalization</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/preprocessing_td.html#TDnormalization"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.preprocessing_td.TDnormalization" title="Permalink to this definition">#</a></dt>
<dd><p>Amplitude dependent time domain normalization</p>
<p>Calculate the envelope of the filtered trace, smooth it in a window of
length <cite>windowLength</cite> and normalize the waveform by this trace. The two
used keywords in <cite>args</cite> are <cite>filter and `windowLength</cite> that describe the
filter and the length of the envelope smoothing window, respectively.</p>
<p><cite>args</cite> has the following structure:</p>
<blockquote>
<div><p>args = {‘windowLength’:<cite>length of the envelope smoothing window in [s]</cite>,’filter’:{‘type’:<cite>filterType</cite>, fargs}}``</p>
<p><cite>type</cite> may be <cite>bandpass</cite> with the corresponding fargs <cite>freqmin</cite> and <cite>freqmax</cite> or <cite>highpass</cite>/<cite>lowpass</cite> with the <cite>fargs</cite> <cite>freqmin</cite>/<cite>freqmax</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">args</span> <span class="pre">=</span> <span class="pre">{'windowLength':5,'filter':{'type':'bandpass',</span>
<span class="pre">'freqmin':0.5,</span> <span class="pre">'freqmax':2.}}</span></code></p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.ndarray</em>) – time series data with time oriented along the first dimension (columns)</p></li>
<li><p><strong>args</strong> (<em>dictionary</em>) – arguments dictionary as described above</p></li>
<li><p><strong>params</strong> (<em>dictionary</em>) – not used here</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy.ndarray</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>normalized time series data</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.preprocessing_td.TDfilter">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.preprocessing_td.</span></span><span class="sig-name descname"><span class="pre">TDfilter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/preprocessing_td.html#TDfilter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.preprocessing_td.TDfilter" title="Permalink to this definition">#</a></dt>
<dd><p>Filter time series data</p>
<p>Filter in time domain. Types of filters are defined by <cite>obspy.signal</cite>.</p>
<p><cite>args</cite> has the following structure:</p>
<blockquote>
<div><p>args = {‘type’:<cite>filterType</cite>, fargs}</p>
<p><cite>type</cite> may be <cite>bandpass</cite> with the corresponding fargs <cite>freqmin</cite> and
<cite>freqmax</cite> or <cite>highpass</cite>/<cite>lowpass</cite> with the <cite>fargs</cite> <cite>freqmin</cite>/<cite>freqmax</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">args</span> <span class="pre">=</span> <span class="pre">{'type':'bandpass','freqmin':0.5,'freqmax':2.}</span></code></p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.ndarray</em>) – time series data with time oriented along the first dimension (columns)</p></li>
<li><p><strong>args</strong> (<em>dictionary</em>) – arguments dictionary as described above</p></li>
<li><p><strong>params</strong> (<em>dictionary</em>) – not used here</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy.ndarray</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>filtered time series data</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.preprocessing_td.zeroPadding">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.preprocessing_td.</span></span><span class="sig-name descname"><span class="pre">zeroPadding</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/preprocessing_td.html#zeroPadding"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.preprocessing_td.zeroPadding" title="Permalink to this definition">#</a></dt>
<dd><p>Append zeros to the traces</p>
<p>Pad traces with zeros to increase the speed of the Fourier transforms and
to avoid wrap around effects. Three possibilities for the length of the
padding can be set in <code class="docutils literal notranslate"><span class="pre">args['type']</span></code>:</p>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">nextFastLen</span></code>:</dt><dd><p>Traces are padded to a length that is the next fast
fft length</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">avoidWrapAround</span></code>:</dt><dd><p>depending on length of the trace that is to be used
the padded part is just long enough to avoid wrap around</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">avoidWrapFastLen</span></code>:</dt><dd><p>Use the next fast length that avoids wrap around</p>
</dd>
</dl>
</li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">args</span> <span class="pre">=</span> <span class="pre">{'type':'avoidWrapPowerTwo'}</span></code></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.ndarray</em>) – time series data with time oriented along the first dimension (columns)</p></li>
<li><p><strong>args</strong> (<em>dictionary</em>) – arguments dictionary as described above</p></li>
<li><p><strong>params</strong> (<em>dictionary</em>) – not used here</p></li>
<li><p><strong>axis</strong> (<em>tuple</em><em>, </em><em>optional</em>) – axis to pad on</p></li>
</ul>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>zero padded time series data</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="seismic-correlate-preprocessing-fd">
<h3>seismic.correlate.preprocessing_fd<a class="headerlink" href="#seismic-correlate-preprocessing-fd" title="Permalink to this heading">#</a></h3>
<p>Preprocessing functions that are executed in Frequency Domain</p>
<span class="target" id="module-seismic.correlate.preprocessing_fd"></span><p>Module containing functions for preprocessing in the frequency domain</p>
<dl class="field-list">
<dt class="field-odd">copyright<span class="colon">:</span></dt>
<dd class="field-odd"><p>The SeisMIC development team (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>).</p>
</dd>
<dt class="field-even">license<span class="colon">:</span></dt>
<dd class="field-even"><blockquote>
<div><p>EUROPEAN UNION PUBLIC LICENCE v. 1.2</p>
</div></blockquote>
<p>(<a class="reference external" href="https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12">https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12</a>)</p>
</dd>
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Tuesday, 20th July 2021 03:40:11 pm
Last Modified: Wednesday, 28th June 2023 02:00:00 pm</p>
<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.preprocessing_fd.FDfilter">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.preprocessing_fd.</span></span><span class="sig-name descname"><span class="pre">FDfilter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">B</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/preprocessing_fd.html#FDfilter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.preprocessing_fd.FDfilter" title="Permalink to this definition">#</a></dt>
<dd><p>Filter Fourier-transformed data</p>
<p>Filter Fourier tranformed data by tapering in frequency domain. The <cite>args</cite>
dictionary is supposed to contain the key <cite>flimit</cite> with a value that is a
four element list or tuple defines the corner frequencies (f1, f2, f3, f4)
in Hz of the cosine taper which is one between f2 and f3 and tapers to zero
for f1 &lt; f &lt; f2 and f3 &lt; f &lt; f4.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>B</strong> (<em>numpy.ndarray</em>) – Fourier transformed time series data with frequency orientedalong the first dimension (columns)</p></li>
<li><p><strong>args</strong> (<em>dictionary</em>) – arguments dictionary as described above</p></li>
<li><p><strong>params</strong> (<em>dictionary</em>) – params[‘freqs’] contains an array with the freqency values
of the samples in <cite>B</cite></p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy.ndarray</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>filtered spectal data</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.preprocessing_fd.FDsignBitNormalization">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.preprocessing_fd.</span></span><span class="sig-name descname"><span class="pre">FDsignBitNormalization</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">B</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/preprocessing_fd.html#FDsignBitNormalization"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.preprocessing_fd.FDsignBitNormalization" title="Permalink to this definition">#</a></dt>
<dd><p>Sign bit normalization of frequency transformed data</p>
<p>Divides each sample by its amplitude resulting in trace with amplidues of
(-1, 0, 1). As this operation is done in frequency domain it requires two
Fourier transforms and is thus quite costly but alows to be performed
after other steps of frequency domain procesing e.g. whitening.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>B</strong> (<em>numpy.ndarray</em>) – Fourier transformed time series data with frequency orientedalong the first dimension (columns)</p></li>
<li><p><strong>args</strong> (<em>dictionary</em>) – not used in this function</p></li>
<li><p><strong>params</strong> (<em>dictionary</em>) – not used in this function</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy.ndarray</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>frequency transform of the 1-bit normalized data</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.correlate.preprocessing_fd.spectralWhitening">
<span class="sig-prename descclassname"><span class="pre">seismic.correlate.preprocessing_fd.</span></span><span class="sig-name descname"><span class="pre">spectralWhitening</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">B</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/correlate/preprocessing_fd.html#spectralWhitening"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.correlate.preprocessing_fd.spectralWhitening" title="Permalink to this definition">#</a></dt>
<dd><p>Spectal whitening of Fourier-transformed date</p>
<p>Normalize the amplitude spectrum of the complex spectra in <cite>B</cite>. The
<cite>args</cite> dictionary may contain the keyword <cite>joint_norm</cite>. If its value is
True the normalization of sets of three traces are normalized jointly by
the mean of their amplitude spectra. This is useful for later rotation of
correlated traces in the ZNE system into the ZRT system.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>B</strong> (<em>numpy.ndarray</em>) – Fourier transformed time series data with frequency orientedalong the first dimension (columns)</p></li>
<li><p><strong>args</strong> (<em>dictionary</em>) – arguments dictionary as described above</p></li>
<li><p><strong>params</strong> (<em>dictionary</em>) – not used here</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy.ndarray</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>whitened spectal data</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="seismic-db">
<h2>seismic.db<a class="headerlink" href="#seismic-db" title="Permalink to this heading">#</a></h2>
<section id="seismic-db-corr-hdf5">
<h3>seismic.db.corr_hdf5<a class="headerlink" href="#seismic-db-corr-hdf5" title="Permalink to this heading">#</a></h3>
<p>Save your Correlations in h5 format.</p>
<span class="target" id="module-seismic.db.corr_hdf5"></span><p>Manages the file format and class for correlations.</p>
<dl class="field-list">
<dt class="field-odd">copyright<span class="colon">:</span></dt>
<dd class="field-odd"><p>The SeisMIC development team (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>).</p>
</dd>
<dt class="field-even">license<span class="colon">:</span></dt>
<dd class="field-even"><blockquote>
<div><p>EUROPEAN UNION PUBLIC LICENCE v. 1.2</p>
</div></blockquote>
<p>(<a class="reference external" href="https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12">https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12</a>)</p>
</dd>
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Friday, 16th April 2021 03:21:30 pm
Last Modified: Tuesday, 4th April 2023 05:04:21 pm</p>
<dl class="py class">
<dt class="sig sig-object py" id="seismic.db.corr_hdf5.DBHandler">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">seismic.db.corr_hdf5.</span></span><span class="sig-name descname"><span class="pre">DBHandler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compression</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">co</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/db/corr_hdf5.html#DBHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.db.corr_hdf5.DBHandler" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></p>
<p>The actual file handler of the hdf5 correlation files.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Should not be accessed directly. Access
:class:`~seismic.db.corr_hdf5.CorrelationDataBase` instead.</strong></p>
</div>
<p>Child object of <code class="xref py py-class docutils literal notranslate"><span class="pre">h5py.File</span></code> and inherets all its attributes and
functions in addition to functions that are particularly useful for noise
correlations.</p>
<p>Create a new file object.</p>
<p>See the h5py user guide for a detailed explanation of the options.</p>
<dl class="simple">
<dt>name</dt><dd><p>Name of the file on disk, or file-like object.  Note: for files
created with the ‘core’ driver, HDF5 still requires this be
non-empty.</p>
</dd>
<dt>mode</dt><dd><p>r        Readonly, file must exist (default)
r+       Read/write, file must exist
w        Create file, truncate if exists
w- or x  Create file, fail if exists
a        Read/write if exists, create otherwise</p>
</dd>
<dt>driver</dt><dd><p>Name of the driver to use.  Legal values are None (default,
recommended), ‘core’, ‘sec2’, ‘direct’, ‘stdio’, ‘mpio’, ‘ros3’.</p>
</dd>
<dt>libver</dt><dd><p>Library version bounds.  Supported values: ‘earliest’, ‘v108’,
‘v110’, ‘v112’  and ‘latest’. The ‘v108’, ‘v110’ and ‘v112’
options can only be specified with the HDF5 1.10.2 library or later.</p>
</dd>
<dt>userblock_size</dt><dd><p>Desired size of user block.  Only allowed when creating a new
file (mode w, w- or x).</p>
</dd>
<dt>swmr</dt><dd><p>Open the file in SWMR read mode. Only used when mode = ‘r’.</p>
</dd>
<dt>rdcc_nbytes</dt><dd><p>Total size of the raw data chunk cache in bytes. The default size
is 1024**2 (1 MB) per dataset.</p>
</dd>
<dt>rdcc_w0</dt><dd><p>The chunk preemption policy for all datasets.  This must be
between 0 and 1 inclusive and indicates the weighting according to
which chunks which have been fully read or written are penalized
when determining which chunks to flush from cache.  A value of 0
means fully read or written chunks are treated no differently than
other chunks (the preemption is strictly LRU) while a value of 1
means fully read or written chunks are always preempted before
other chunks.  If your application only reads or writes data once,
this can be safely set to 1.  Otherwise, this should be set lower
depending on how often you re-read or re-write the same data.  The
default value is 0.75.</p>
</dd>
<dt>rdcc_nslots</dt><dd><p>The number of chunk slots in the raw data chunk cache for this
file. Increasing this value reduces the number of cache collisions,
but slightly increases the memory used. Due to the hashing
strategy, this value should ideally be a prime number. As a rule of
thumb, this value should be at least 10 times the number of chunks
that can fit in rdcc_nbytes bytes. For maximum performance, this
value should be set approximately 100 times that number of
chunks. The default value is 521.</p>
</dd>
<dt>track_order</dt><dd><p>Track dataset/group/attribute creation order under root group
if True. If None use global default h5.get_config().track_order.</p>
</dd>
<dt>fs_strategy</dt><dd><p>The file space handling strategy to be used.  Only allowed when
creating a new file (mode w, w- or x).  Defined as:
“fsm”        FSM, Aggregators, VFD
“page”       Paged FSM, VFD
“aggregate”  Aggregators, VFD
“none”       VFD
If None use HDF5 defaults.</p>
</dd>
<dt>fs_page_size</dt><dd><p>File space page size in bytes. Only used when fs_strategy=”page”. If
None use the HDF5 default (4096 bytes).</p>
</dd>
<dt>fs_persist</dt><dd><p>A boolean value to indicate whether free space should be persistent
or not.  Only allowed when creating a new file.  The default value
is False.</p>
</dd>
<dt>fs_threshold</dt><dd><p>The smallest free-space section size that the free space manager
will track.  Only allowed when creating a new file.  The default
value is 1.</p>
</dd>
<dt>page_buf_size</dt><dd><p>Page buffer size in bytes. Only allowed for HDF5 files created with
fs_strategy=”page”. Must be a power of two value and greater or
equal than the file space page size when creating the file. It is
not used by default.</p>
</dd>
<dt>min_meta_keep</dt><dd><p>Minimum percentage of metadata to keep in the page buffer before
allowing pages containing metadata to be evicted. Applicable only if
page_buf_size is set. Default value is zero.</p>
</dd>
<dt>min_raw_keep</dt><dd><p>Minimum percentage of raw data to keep in the page buffer before
allowing pages containing raw data to be evicted. Applicable only if
page_buf_size is set. Default value is zero.</p>
</dd>
<dt>locking</dt><dd><p>The file locking behavior. Defined as:
False (or “false”)  Disable file locking
True (or “true”)    Enable file locking
“best-effort”       Enable file locking but ignore some errors
None                Use HDF5 defaults
Warning: The HDF5_USE_FILE_LOCKING environment variable can override
this parameter.
Only available with HDF5 &gt;= 1.12.1 or 1.10.x &gt;= 1.10.7.</p>
</dd>
<dt>alignment_threshold</dt><dd><p>Together with <code class="docutils literal notranslate"><span class="pre">alignment_interval</span></code>, this property ensures that
any file object greater than or equal in size to the alignement
threshold (in bytes) will be aligned on an address which is a
multiple of alignment interval.</p>
</dd>
<dt>alignment_interval</dt><dd><p>This property should be used in conjunction with
<code class="docutils literal notranslate"><span class="pre">alignment_threshold</span></code>. See the description above. For more
details, see
<a class="reference external" href="https://portal.hdfgroup.org/display/HDF5/H5P_SET_ALIGNMENT">https://portal.hdfgroup.org/display/HDF5/H5P_SET_ALIGNMENT</a></p>
</dd>
<dt>Additional keywords</dt><dd><p>Passed on to the selected file driver.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="seismic.db.corr_hdf5.DBHandler.add_corr_options">
<span class="sig-name descname"><span class="pre">add_corr_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">co</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/db/corr_hdf5.html#DBHandler.add_corr_options"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.db.corr_hdf5.DBHandler.add_corr_options" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.db.corr_hdf5.DBHandler.add_correlation">
<span class="sig-name descname"><span class="pre">add_correlation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.correlate.stream.CorrTrace" title="seismic.correlate.stream.CorrTrace"><span class="pre">CorrTrace</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'subdivision'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/db/corr_hdf5.html#DBHandler.add_correlation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.db.corr_hdf5.DBHandler.add_correlation" title="Permalink to this definition">#</a></dt>
<dd><p>Add correlation data to the hdf5 file. Can be accessed using the
<a class="reference internal" href="#seismic.db.corr_hdf5.DBHandler.get_data" title="seismic.db.corr_hdf5.DBHandler.get_data"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_data()</span></code></a> method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<a class="reference internal" href="#seismic.correlate.stream.CorrTrace" title="seismic.correlate.stream.CorrTrace"><em>CorrTrace</em></a><em> or </em><a class="reference internal" href="#seismic.correlate.stream.CorrStream" title="seismic.correlate.stream.CorrStream"><em>CorrStream</em></a>) – Data to save. Either a
<code class="xref py py-class docutils literal notranslate"><span class="pre">CorrTrace</span></code> object or a
<code class="xref py py-class docutils literal notranslate"><span class="pre">CorrStream</span></code> holding one or
several traces.</p></li>
<li><p><strong>tag</strong> – The tag that the data should be saved under. By convention,
unstacked correlations are saved with the tag <cite>‘subdivision’</cite>,
whereas stacks are saved with the tag <cite>stack_$stacklen$</cite>, where
$stacklen$ is to be replaced by the length of the stack in seconds.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>TypeError</strong> – for wrong data type.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.db.corr_hdf5.DBHandler.get_corr_options">
<span class="sig-name descname"><span class="pre">get_corr_options</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../_modules/seismic/db/corr_hdf5.html#DBHandler.get_corr_options"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.db.corr_hdf5.DBHandler.get_corr_options" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.db.corr_hdf5.DBHandler.get_data">
<span class="sig-name descname"><span class="pre">get_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">network</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">station</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">corr_start</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UTCDateTime</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">corr_end</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UTCDateTime</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#seismic.correlate.stream.CorrStream" title="seismic.correlate.stream.CorrStream"><span class="pre">CorrStream</span></a></span></span><a class="reference internal" href="../../_modules/seismic/db/corr_hdf5.html#DBHandler.get_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.db.corr_hdf5.DBHandler.get_data" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">CorrStream</span></code> holding
all the requested data.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Wildcards are allowed for all parameters.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>network</strong> (<em>str</em>) – network (combination), e.g., IU-YP</p></li>
<li><p><strong>station</strong> (<em>str</em>) – station (combination), e.g., HRV-BRK</p></li>
<li><p><strong>channel</strong> (<em>str</em>) – channel (combination), e.g., BZ-BR</p></li>
<li><p><strong>corr_start</strong> (<em>UTCDateTime</em><em>, </em><em>optional</em>) – starttime of the time windows used to computed this
correlation, defaults to None</p></li>
<li><p><strong>corr_end</strong> (<em>UTCDateTime</em><em>, </em><em>optional</em>) – endtime of the time windows used to computed this
correlation, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a <code class="xref py py-class docutils literal notranslate"><span class="pre">CorrStream</span></code> holding
all the requested data.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#seismic.correlate.stream.CorrStream" title="seismic.correlate.stream.CorrStream">CorrStream</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.db.corr_hdf5.DBHandler.get_available_starttimes">
<span class="sig-name descname"><span class="pre">get_available_starttimes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">network</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">station</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'*'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../_modules/seismic/db/corr_hdf5.html#DBHandler.get_available_starttimes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.db.corr_hdf5.DBHandler.get_available_starttimes" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a dictionary with channel codes as keys and available
correlation starttimes as values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>network</strong> (<em>str</em>) – Network code (combined code, e.g., IU-YP)</p></li>
<li><p><strong>station</strong> (<em>str</em>) – Station code (combined)</p></li>
<li><p><strong>tag</strong> (<em>str</em>) – Tag</p></li>
<li><p><strong>channel</strong> (<em>str</em><em>, </em><em>optional</em>) – Channel code (combined), wildcards allowed,
defaults to ‘*’</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionary holding the availabe starttimes for each channel
combination</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.db.corr_hdf5.DBHandler.get_available_channels">
<span class="sig-name descname"><span class="pre">get_available_channels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">network</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">station</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/db/corr_hdf5.html#DBHandler.get_available_channels"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.db.corr_hdf5.DBHandler.get_available_channels" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a list of all available channels (i.e., their combination
codes) in this file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tag</strong> (<em>str</em>) – The tag that this data was save as.</p></li>
<li><p><strong>network</strong> (<em>str</em>) – Network combination code in the form <cite>net0-net1</cite></p></li>
<li><p><strong>station</strong> (<em>str</em>) – Network combination code in the form <cite>stat0-stat1</cite></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of all channel combinations.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[str]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="seismic.db.corr_hdf5.CorrelationDataBase">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">seismic.db.corr_hdf5.</span></span><span class="sig-name descname"><span class="pre">CorrelationDataBase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">corr_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'a'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compression</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'gzip3'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/db/corr_hdf5.html#CorrelationDataBase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.db.corr_hdf5.CorrelationDataBase" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Base class to handle the hdf5 files that contain noise correlations.</p>
<p>Access an hdf5 file holding correlations. The resulting file can be
accessed using all functionalities of
<a class="reference external" href="https://www.h5py.org/">h5py</a> (for example as a dict).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – Full path to the file</p></li>
<li><p><strong>corr_options</strong> (<em>dict</em><em> or </em><em>None</em>) – The dictionary holding the parameters for the
correlation. If set to <cite>None</cite>. The mode will be set to read-only
<cite>= ‘r’</cite>. Defaults to None.</p></li>
<li><p><strong>mode</strong> (<em>str</em><em>, </em><em>optional</em>) – Mode to access the file. Options are: ‘a’ for all, ‘w’ for
write, ‘r+’ for writing in an already existing file, or ‘r’ for
read-only , defaults to ‘a’.</p></li>
<li><p><strong>compression</strong> (<em>str</em><em>, </em><em>optional</em>) – The compression algorithm and compression level
that the arrays should be saved with. ‘gzip3’ tends to perform
well, else you could choose ‘gzipx’ where x is a digit between
1 and 9 (i.e., 9 is the highest compression) or None for fastest
perfomance, defaults to ‘gzip3’.</p></li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Access only through a context manager (see below):</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">CorrelationDataBase</span><span class="p">(</span><span class="n">myfile</span><span class="o">.</span><span class="n">h5</span><span class="p">)</span> <span class="k">as</span> <span class="n">cdb</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">type</span><span class="p">(</span><span class="n">cdb</span><span class="p">)</span>  <span class="c1"># This is a DBHandler</span>
<span class="go">&lt;class &#39;seismic.db.corr_hdf5.DBHandler&#39;&gt;</span>
</pre></div>
</div>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">CorrelationDataBase</span><span class="p">(</span>
<span class="go">            &#39;/path/to/db/XN-XN.NEP06-NEP06.h5&#39;) as cdb:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="c1"># find the available tags for existing db</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">cdb</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
<span class="go">[&#39;co&#39;, &#39;recombined&#39;, &#39;stack_86398&#39;, &#39;subdivision&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="c1"># find available channels with tag subdivision</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">(</span><span class="n">cdb</span><span class="o">.</span><span class="n">get_available_channels</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="s1">&#39;subdivision&#39;</span><span class="p">,</span> <span class="s1">&#39;XN-XN&#39;</span><span class="p">,</span> <span class="s1">&#39;NEP06-NEP06&#39;</span><span class="p">))</span>
<span class="go">[&#39;HHE-HHN&#39;, &#39;HHE-HHZ&#39;, &#39;HHN-HHZ&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="c1"># Get Data from all times, specific channel and tag</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">st</span> <span class="o">=</span> <span class="n">cdb</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="s1">&#39;XN-XN&#39;</span><span class="p">,</span> <span class="s1">&#39;NEP06-NEP06&#39;</span><span class="p">,</span> <span class="s1">&#39;HHE-HHN&#39;</span><span class="p">,</span> <span class="s1">&#39;subdivision&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">count</span><span class="p">())</span>
<span class="go">250</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.db.corr_hdf5.all_traces_recursive">
<span class="sig-prename descclassname"><span class="pre">seismic.db.corr_hdf5.</span></span><span class="sig-name descname"><span class="pre">all_traces_recursive</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Group</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.correlate.stream.CorrStream" title="seismic.correlate.stream.CorrStream"><span class="pre">CorrStream</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">pattern</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#seismic.correlate.stream.CorrStream" title="seismic.correlate.stream.CorrStream"><span class="pre">CorrStream</span></a></span></span><a class="reference internal" href="../../_modules/seismic/db/corr_hdf5.html#all_traces_recursive"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.db.corr_hdf5.all_traces_recursive" title="Permalink to this definition">#</a></dt>
<dd><p>Recursively, appends all traces in a h5py group to the input stream.
In addition this will check whether the data matches a certain pattern.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>group</strong> (class:<cite>h5py._hl.group.Group</cite>) – group to search through</p></li>
<li><p><strong>stream</strong> (<a class="reference internal" href="#seismic.correlate.stream.CorrStream" title="seismic.correlate.stream.CorrStream"><em>CorrStream</em></a>) – Stream to append the traces to</p></li>
<li><p><strong>pattern</strong> (<em>str</em>) – pattern for the path in the hdf5 file, see fnmatch for
details.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Stream with appended traces</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#seismic.correlate.stream.CorrStream" title="seismic.correlate.stream.CorrStream">CorrStream</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.db.corr_hdf5.convert_header_to_hdf5">
<span class="sig-prename descclassname"><span class="pre">seismic.db.corr_hdf5.</span></span><span class="sig-name descname"><span class="pre">convert_header_to_hdf5</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stats</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/db/corr_hdf5.html#convert_header_to_hdf5"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.db.corr_hdf5.convert_header_to_hdf5" title="Permalink to this definition">#</a></dt>
<dd><p>Convert an <code class="xref py py-class docutils literal notranslate"><span class="pre">Stats</span></code> object and adds it to the provided
hdf5 dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<em>h5py.Dataset</em>) – the dataset that the header should be added to</p></li>
<li><p><strong>header</strong> (<em>Stats</em>) – The trace’s header</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.db.corr_hdf5.read_hdf5_header">
<span class="sig-prename descclassname"><span class="pre">seismic.db.corr_hdf5.</span></span><span class="sig-name descname"><span class="pre">read_hdf5_header</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Stats</span></span></span><a class="reference internal" href="../../_modules/seismic/db/corr_hdf5.html#read_hdf5_header"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.db.corr_hdf5.read_hdf5_header" title="Permalink to this definition">#</a></dt>
<dd><p>Takes an hdft5 dataset as input and returns the header of the CorrTrace.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dataset</strong> (<em>h5py.Dataset</em>) – The dataset to be read from</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The trace’s header</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Stats</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.db.corr_hdf5.co_to_hdf5">
<span class="sig-prename descclassname"><span class="pre">seismic.db.corr_hdf5.</span></span><span class="sig-name descname"><span class="pre">co_to_hdf5</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">co</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../_modules/seismic/db/corr_hdf5.html#co_to_hdf5"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.db.corr_hdf5.co_to_hdf5" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</section>
</section>
<section id="seismic-monitor">
<h2>seismic.monitor<a class="headerlink" href="#seismic-monitor" title="Permalink to this heading">#</a></h2>
<section id="seismic-monitor-monitor">
<h3>seismic.monitor.monitor<a class="headerlink" href="#seismic-monitor-monitor" title="Permalink to this heading">#</a></h3>
<p>Compute seismic velocity changes</p>
<span class="target" id="module-seismic.monitor.monitor"></span><dl class="field-list">
<dt class="field-odd">copyright<span class="colon">:</span></dt>
<dd class="field-odd"><p>The SeisMIC development team (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>).</p>
</dd>
<dt class="field-even">license<span class="colon">:</span></dt>
<dd class="field-even"><blockquote>
<div><p>EUROPEAN UNION PUBLIC LICENCE v. 1.2</p>
</div></blockquote>
<p>(<a class="reference external" href="https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12">https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12</a>)</p>
</dd>
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Thursday, 3rd June 2021 04:15:57 pm
Last Modified: Thursday, 24th August 2023 10:45:25 am</p>
<dl class="py class">
<dt class="sig sig-object py" id="seismic.monitor.monitor.Monitor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">seismic.monitor.monitor.</span></span><span class="sig-name descname"><span class="pre">Monitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/monitor/monitor.html#Monitor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.monitor.Monitor" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Object that handles the computation of seismic velocity changes.
This will access correlations that have been computed previously with
the <a class="reference internal" href="#seismic.correlate.correlate.Correlator" title="seismic.correlate.correlate.Correlator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Correlator</span></code></a> class.</p>
<p>Takes the parameter file as input (either as yaml or as dict).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>options</strong> (<em>dict</em><em> or </em><em>str</em>) – Parameters for the monitor. Usually, they come in form
of a <em>yaml</em> file. If this parameter is a str, it will be
interpreted to be the path to said <em>yaml</em> file.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="seismic.monitor.monitor.Monitor.compute_velocity_change">
<span class="sig-name descname"><span class="pre">compute_velocity_change</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">corr_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">network</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">station</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_trcs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/monitor/monitor.html#Monitor.compute_velocity_change"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.monitor.Monitor.compute_velocity_change" title="Permalink to this definition">#</a></dt>
<dd><p>Computes the velocity change for a cross (or auto) correlation
time-series. This process is executed “per station combination”.
Meaning, several processes of this method can be started via MPI
and the method
<a class="reference internal" href="#seismic.monitor.monitor.Monitor.compute_velocity_change_bulk" title="seismic.monitor.monitor.Monitor.compute_velocity_change_bulk"><code class="xref py py-meth docutils literal notranslate"><span class="pre">compute_velocity_change_bulk()</span></code></a>,
which is the function that should rather be acessed than this one.
Data will be written into the defined dv folder and plotted if this
option was previously set to True.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>corr_file</strong> (<em>str</em>) – File to read the correlation data from.</p></li>
<li><p><strong>tag</strong> (<em>str</em>) – Tag of the data in the file (almost always <cite>‘subdivision’</cite>)</p></li>
<li><p><strong>network</strong> (<em>str</em>) – Network combination code</p></li>
<li><p><strong>station</strong> (<em>str</em>) – Station Combination Code</p></li>
<li><p><strong>channel</strong> (<em>str</em>) – Channel combination code</p></li>
<li><p><strong>ref_trcs</strong> (<em>np.ndarray</em><em>, </em><em>optional</em>) – Feed in on or several custom reference traces.
If None the program will determine a reference trace from
the chosen method in the config. Defaults to None</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.monitor.monitor.Monitor.compute_velocity_change_bulk">
<span class="sig-name descname"><span class="pre">compute_velocity_change_bulk</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/monitor/monitor.html#Monitor.compute_velocity_change_bulk"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.monitor.Monitor.compute_velocity_change_bulk" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the velocity change for all correlations using MPI.
The parameters for the correlation defined in the <em>yaml</em> file will be
used.</p>
<p>This function will just call
<a class="reference internal" href="#seismic.monitor.monitor.Monitor.compute_velocity_change" title="seismic.monitor.monitor.Monitor.compute_velocity_change"><code class="xref py py-meth docutils literal notranslate"><span class="pre">compute_velocity_change()</span></code></a>
several times.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.monitor.monitor.Monitor.compute_components_average">
<span class="sig-name descname"><span class="pre">compute_components_average</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'AutoComponents'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/monitor/monitor.html#Monitor.compute_components_average"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.monitor.Monitor.compute_components_average" title="Permalink to this definition">#</a></dt>
<dd><p>Averages the Similarity matrix of different velocity changes in
the whole dv folder. Based upon those values, new dvs and correlations
are computed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>method</strong> (<em>str</em><em>, </em><em>optional</em>) – Which components should be averaged? Can be
‘StationWide’ if all component-combinations for one station should
be averaged, ‘AutoComponents’ if only the dv results of
autocorrelations are to be averaged, ‘CrossComponents’ if you wish
to average dvs from the same station but only intercomponent
corrrelations, or ‘CrossStations’ if cross-station correlations
should be averaged (same station combination and all component
combinations).
Defaults to ‘AutoComponents’</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – For Unknown combination methods.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.monitor.monitor.Monitor.compute_waveform_coherence_bulk">
<span class="sig-name descname"><span class="pre">compute_waveform_coherence_bulk</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/monitor/monitor.html#Monitor.compute_waveform_coherence_bulk"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.monitor.Monitor.compute_waveform_coherence_bulk" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the WFC for all specified (params file) correlations using MPI.
The parameters for the correlation defined in the <em>yaml</em> file will be
used.</p>
<p>This function will just call
<a class="reference internal" href="#seismic.monitor.monitor.Monitor.compute_waveform_coherence" title="seismic.monitor.monitor.Monitor.compute_waveform_coherence"><code class="xref py py-meth docutils literal notranslate"><span class="pre">compute_waveform_coherence()</span></code></a>
several times.
Subsequently, the average of the different component combinations will
be computed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.monitor.monitor.Monitor.compute_waveform_coherence">
<span class="sig-name descname"><span class="pre">compute_waveform_coherence</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">corr_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">network</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">station</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#seismic.monitor.wfc.WFC" title="seismic.monitor.wfc.WFC"><span class="pre">WFC</span></a></span></span><a class="reference internal" href="../../_modules/seismic/monitor/monitor.html#Monitor.compute_waveform_coherence"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.monitor.Monitor.compute_waveform_coherence" title="Permalink to this definition">#</a></dt>
<dd><p>Computes the waveform coherence corresponding to one correlation (i.e.,
one single file).</p>
<p>The waveform coherence can be used as a measure of stability of
a certain correlation. See Steinmann, et. al. (2021) for details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>corr_file</strong> (<em>str</em>) – File to compute the wfc from</p></li>
<li><p><strong>tag</strong> (<em>str</em>) – Tag inside of hdf5 file to retrieve corrs from.</p></li>
<li><p><strong>network</strong> (<em>str</em>) – Network combination code.</p></li>
<li><p><strong>station</strong> (<em>str</em>) – Station combination code</p></li>
<li><p><strong>channel</strong> (<em>str</em>) – Channel combination code.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – For short correlations</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>An object holding the waveform coherence</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#seismic.monitor.wfc.WFC" title="seismic.monitor.wfc.WFC"><code class="xref py py-class docutils literal notranslate"><span class="pre">WFC</span></code></a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>To compute wfc for several correlations use:
<code class="xref py py-meth docutils literal notranslate"><span class="pre">waveform_coherence</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">_bulk()</span></code>.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.monitor.make_time_list">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.monitor.</span></span><span class="sig-name descname"><span class="pre">make_time_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start_date</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_inc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">win_len</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/monitor.html#make_time_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.monitor.make_time_list" title="Permalink to this definition">#</a></dt>
<dd><p>Returns numpy array of starttimes and endtimes, for which each data point
of velocity change should be computed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start_date</strong> (<em>str</em>) – Date (including time) to start monitoring</p></li>
<li><p><strong>end_date</strong> (<em>str</em>) – Last date (including time) of monitoring</p></li>
<li><p><strong>date_inc</strong> (<em>int</em>) – Increment in seconds between each datapoint</p></li>
<li><p><strong>win_len</strong> (<em>int</em>) – Window Length, for which each data point is computed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A numpy array holding the starttimes and endtimes of the computing
time windows in seconds (as UTC timestamps)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[ np.ndarray, np.ndarray]</p>
</dd>
</dl>
<p>..note:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>see `obspy&#39;s documentation
&lt;https://docs.obspy.org/packages/autogen/obspy.core.utcdatetime.UTCDateTime.html&gt;`
for compatible input strings.
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.monitor.corr_find_filter">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.monitor.</span></span><span class="sig-name descname"><span class="pre">corr_find_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">net</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/monitor.html#corr_find_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.monitor.corr_find_filter" title="Permalink to this definition">#</a></dt>
<dd><ol class="arabic simple">
<li><p>Finds the files of available correlations.</p></li>
<li><p>Out of those files, it will extract the ones that are requested.</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>indir</strong> (<em>str</em>) – Directory that the correlations are saved in.</p></li>
<li><p><strong>net</strong> (<em>dict</em>) – Network dictionary from <em>yaml</em> file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>list of network combination codes, list of station combination
codes, and list of the file paths to their corresponding
correlation files.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[List[str], List[str], List[str]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.monitor.correct_dv_shift">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.monitor.</span></span><span class="sig-name descname"><span class="pre">correct_dv_shift</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dv0</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><span class="pre">DV</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">dv1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><span class="pre">DV</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'mean'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_overlap</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><span class="pre">DV</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><span class="pre">DV</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/monitor.html#correct_dv_shift"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.monitor.correct_dv_shift" title="Permalink to this definition">#</a></dt>
<dd><p>Shift dv0 with respect to dv1, so that the same times will have the same
value.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>in-place operation.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dv0</strong> (<a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><em>DV</em></a>) – DV object to be shifted</p></li>
<li><p><strong>dv1</strong> (<a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><em>DV</em></a>) – DV object to compare to</p></li>
<li><p><strong>method</strong> (<em>str</em><em>, </em><em>optional</em>) – either mean or median, defaults to ‘mean’. If mean is chosen
the points will be weighted by the correlation coefficient.</p></li>
<li><p><strong>n_overlap</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of points to compare to beyond the
already overlapping point. Makes sense if, e.g., one station replaces
the other, defaults to 0.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the two dvs only have non-nan value more than
n_overlap apart.</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The two dv object. Only the first one is modified. Modification
also happens in-place.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple[<a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV">DV</a>, <a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV">DV</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.monitor.correct_time_shift_several">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.monitor.</span></span><span class="sig-name descname"><span class="pre">correct_time_shift_several</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dvs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><span class="pre">DV</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_overlap</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/monitor/monitor.html#correct_time_shift_several"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.monitor.correct_time_shift_several" title="Permalink to this definition">#</a></dt>
<dd><p>Suppose you have a number of dv/v time series from the same location,
but station codes changed several times. To stitch these together,
this code will iteratively shift each progressive time-series to the
shift of the end of its precessor.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The shifting correction happens in-place.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dvs</strong> (<em>List</em><em>[</em><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><em>DV</em></a><em>]</em>) – List of dvs to be shifted</p></li>
<li><p><strong>method</strong> (<em>str</em>) – method to be used to measure the shift. Can be ‘mean’ or
‘median’. If ‘mean’ is chosen, the points will be weighted by their
respective correlation coefficient.</p></li>
<li><p><strong>n_overlap</strong> (<em>int</em>) – amount of points beyond the overlap to use to compute
the shift.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.monitor.average_components_mem_save">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.monitor.</span></span><span class="sig-name descname"><span class="pre">average_components_mem_save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dvs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Generator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><span class="pre">DV</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_scatter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><span class="pre">DV</span></a></span></span><a class="reference internal" href="../../_modules/seismic/monitor/monitor.html#average_components_mem_save"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.monitor.average_components_mem_save" title="Permalink to this definition">#</a></dt>
<dd><p>Averages the Similariy matrix of the DV objects. Based on those,
it computes a new dv value and a new correlation value. Less memory intense
but slower than <a class="reference internal" href="#seismic.monitor.monitor.average_components" title="seismic.monitor.monitor.average_components"><code class="xref py py-func docutils literal notranslate"><span class="pre">average_components()</span></code></a>. Should be used if you run
out of memory using the former. Uses the sum of squares rule for the
standard deviation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dvs</strong> (Iterator[class:<cite>~seismic.monitor.dv.DV</cite>]) – Iterator over dvs from the different components to compute an
average from. Note that it is possible to use almost anything as
input as long as the similarity matrices of the dvs have the same shape</p></li>
<li><p><strong>save_scatter</strong> (<em>bool</em><em>, </em><em>optional</em>) – Saves the scattering of old values and correlation
coefficients to later provide a statistical measure. Defaults to True.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>TypeError</strong> – for DVs that were computed with different methods</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A single dv with an averaged similarity matrix.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV">DV</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.monitor.average_components">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.monitor.</span></span><span class="sig-name descname"><span class="pre">average_components</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dvs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><span class="pre">DV</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_scatter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">correct_shift</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">correct_shift_method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'mean'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">correct_shift_overlap</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><span class="pre">DV</span></a></span></span><a class="reference internal" href="../../_modules/seismic/monitor/monitor.html#average_components"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.monitor.average_components" title="Permalink to this definition">#</a></dt>
<dd><p>Averages the Similariy matrix of the DV objects. Based on those,
it computes a new dv value and a new correlation value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dvs</strong> (List[class:<cite>~seismic.monitor.dv.DV</cite>]) – List of dvs from the different components to compute an
average from. Note that it is possible to use almost anything as
input as long as the similarity matrices of the dvs have the same shape</p></li>
<li><p><strong>save_scatter</strong> (<em>bool</em><em>, </em><em>optional</em>) – Saves the scattering of old values and correlation
coefficients to later provide a statistical measure. Defaults to True.</p></li>
<li><p><strong>correct_shift</strong> – Shift the dvs with respect to each other. This is
relevant if not all stations are active all the time and the references
are not describing the same state. This only works if stations were
active almost simultaneously at least for a bit
(i.e., corr-start[n+n_overlap]-corr-start[n])</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>TypeError</strong> – for DVs that were computed with different methods</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A single dv with an averaged similarity matrix.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV">DV</a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>If you should get an <cite>OutOfMemoryError</cite> consider using
<a class="reference internal" href="#seismic.monitor.monitor.average_components_mem_save" title="seismic.monitor.monitor.average_components_mem_save"><code class="xref py py-func docutils literal notranslate"><span class="pre">average_components_mem_save()</span></code></a>.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.monitor.average_dvs_by_coords">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.monitor.</span></span><span class="sig-name descname"><span class="pre">average_dvs_by_coords</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dvs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><span class="pre">DV</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lon</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">el</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">(-1000000.0,</span> <span class="pre">1000000.0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_std</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><span class="pre">DV</span></a></span></span><a class="reference internal" href="../../_modules/seismic/monitor/monitor.html#average_dvs_by_coords"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.monitor.average_dvs_by_coords" title="Permalink to this definition">#</a></dt>
<dd><p>Averages the Similariy matrix of the DV objects if they are inside of the
queried coordionates. Based on those,
it computes a new dv value and a new correlation value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dvs</strong> (List[class:<cite>~seismic.monitor.dv.DV</cite>]) – List of dvs from the different components to compute an
average from. Note that it is possible to use almost anything as
input as long as the similarity matrices of the dvs have the same shape</p></li>
<li><p><strong>lat</strong> (<em>Tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em>) – Minimum and maximum latitude of the stations(s). Note that
for cross-correlations both stations must be inside of the window.</p></li>
<li><p><strong>lon</strong> (<em>Tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em>) – Minimum and maximum longitude of the stations(s). Note that
for cross-correlations both stations must be inside of the window.</p></li>
<li><p><strong>el</strong> (<em>Tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em><em>, </em><em>optional</em>) – Minimum and maximum elevation of the stations(s) in m. Note that
for cross-correlations both stations must be inside of the window.
Defaults to (-1e6, 1e6) - i.e., no filter.</p></li>
<li><p><strong>return_std</strong> (<em>bool</em><em>, </em><em>optional</em>) – Save the standard deviation of the similarity
matrices into the dv object. Defaults to False.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>TypeError</strong> – for DVs that were computed with different methods</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A single dv with an averaged similarity matrix.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV">DV</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.monitor.average_components_wfc">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.monitor.</span></span><span class="sig-name descname"><span class="pre">average_components_wfc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wfcs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#seismic.monitor.wfc.WFC" title="seismic.monitor.wfc.WFC"><span class="pre">WFC</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#seismic.monitor.wfc.WFC" title="seismic.monitor.wfc.WFC"><span class="pre">WFC</span></a></span></span><a class="reference internal" href="../../_modules/seismic/monitor/monitor.html#average_components_wfc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.monitor.average_components_wfc" title="Permalink to this definition">#</a></dt>
<dd><p>Averages the Similariy matrix of the three DV objects. Based on those,
it computes a new dv value and a new correlation value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dvs</strong> (List[class:<cite>~seismic.monitor.dv.DV</cite>]) – List of dvs from the different components to compute an
average from. Note that it is possible to use almost anything as
input (also from different stations). However, at the time,
the function requires the input to be of the same shape</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>TypeError</strong> – for DVs that were computed with different methods</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A single dv with an averaged similarity matrix</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV">DV</a></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="seismic-monitor-dv">
<h3>seismic.monitor.dv<a class="headerlink" href="#seismic-monitor-dv" title="Permalink to this heading">#</a></h3>
<p>Module to handle velocity change objects.</p>
<span class="target" id="module-seismic.monitor.dv"></span><dl class="field-list">
<dt class="field-odd">copyright<span class="colon">:</span></dt>
<dd class="field-odd"><p>The SeisMIC development team (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>).</p>
</dd>
<dt class="field-even">license<span class="colon">:</span></dt>
<dd class="field-even"><blockquote>
<div><p>EUROPEAN UNION PUBLIC LICENCE v. 1.2</p>
</div></blockquote>
<p>(<a class="reference external" href="https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12">https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12</a>)</p>
</dd>
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Tuesday, 15th June 2021 04:12:18 pm
Last Modified: Friday, 16th June 2023 03:54:21 pm</p>
<dl class="py class">
<dt class="sig sig-object py" id="seismic.monitor.dv.DV">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">seismic.monitor.dv.</span></span><span class="sig-name descname"><span class="pre">DV</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">corr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sim_mat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">second_axis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">stretches</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">corrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_stat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dv_processing</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/monitor/dv.html#DV"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.dv.DV" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A simple object to save velocity changes.</p>
<p>Creates an object designed to hold and process velocity changes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>corr</strong> (<em>np.ndarray</em>) – Array with maximum Correlation coefficients.</p></li>
<li><p><strong>value</strong> (<em>np.ndarray</em>) – Array with decimal velocity changes / stretches.</p></li>
<li><p><strong>value_type</strong> (<em>str</em>) – Type of value (e.g., stretch)</p></li>
<li><p><strong>sim_mat</strong> (<em>np.ndarray</em>) – Similarity Matrix with the dimensions time and stretch.</p></li>
<li><p><strong>second_axis</strong> (<em>np.ndarray</em>) – second axis (e.g., the stretch axis)</p></li>
<li><p><strong>method</strong> (<em>str</em>) – Stretching method that was used</p></li>
<li><p><strong>stats</strong> (<a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><em>CorrStats</em></a>) – Stats of the correlation object that was used</p></li>
<li><p><strong>stretches</strong> (<em>np.ndarray</em><em>, </em><em>optional</em>) – Scatter of the value (e.g., stretch).
In case this dv object holds an average
of several dvs, the user can choose to keep all dvs’ stretches.
defaults to None</p></li>
<li><p><strong>corrs</strong> (<em>np.ndarray</em><em>, </em><em>optional</em>) – Scatter of the correlation coefficient (e.g., stretch).
In case this dv object holds an average
of several dvs, the user can choose to keep all dvs’ corrs.
defaults to None</p></li>
<li><p><strong>n_stat</strong> (<em>np.ndarray</em><em>, </em><em>optional</em>) – Number of stations used for the stack at corr_start t.
Has the same shape as <cite>value</cite> and <cite>corr</cite>. Defaults to None</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="seismic.monitor.dv.DV.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/monitor/dv.html#DV.save"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.dv.DV.save" title="Permalink to this definition">#</a></dt>
<dd><p>Saves the dv object to a compressed numpy binary format. The DV can
later be read using <a class="reference internal" href="#seismic.monitor.dv.read_dv" title="seismic.monitor.dv.read_dv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_dv()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – output path</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.monitor.dv.DV.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">save_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figure_file_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mark_time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">datetime</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalize_simmat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sim_mat_Clim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">datetime</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">datetime</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_scatter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">(9,</span> <span class="pre">11)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dpi</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">144</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">style</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'technical'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dateformat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'%d</span> <span class="pre">%b</span> <span class="pre">%y'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">figure</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">axis</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/dv.html#DV.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.dv.DV.plot" title="Permalink to this definition">#</a></dt>
<dd><p>Plots the dv object into a <em>multi-panel-view</em> of <cite>similarity matrix</cite>
<cite>dv-value</cite>, and <cite>correlation coefficient</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>save_dir</strong> (<em>str</em><em>, </em><em>optional</em>) – Directory to save the figure to, defaults to ‘.’</p></li>
<li><p><strong>figure_file_name</strong> (<em>str</em><em>, </em><em>optional</em>) – Filename of the figure. If None, the figure
will not be save, defaults to None.</p></li>
<li><p><strong>mark_time</strong> (<em>datetime</em><em>, </em><em>optional</em>) – times to put ticks to. If not set, they will be
determined automatically, defaults to None.</p></li>
<li><p><strong>normalize_simmat</strong> (<em>bool</em><em>, </em><em>optional</em>) – Normalise the similarity matrix?
Defaults to False.</p></li>
<li><p><strong>sim_mat_Clim</strong> (<em>List</em><em>[</em><em>float</em><em>]</em><em>, </em><em>optional</em>) – Color limits for the similarity matrix
, defaults to []. Format is [low_limit, upper_limit]</p></li>
<li><p><strong>xlim</strong> (<em>Tuple</em><em>[</em><em>datetime</em><em>, </em><em>datetime</em><em>]</em><em>, </em><em>optional</em>) – Time Limits to plot, defaults to None.</p></li>
<li><p><strong>ylim</strong> (<em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em><em>, </em><em>optional</em>) – Y-limits (e.g., stretch) of the plot, defaults to None</p></li>
<li><p><strong>plot_scatter</strong> (<em>bool</em><em>, </em><em>optional</em>) – If set to True, the scatter of all used
combinations is plotted in form of a histogram.
Defaults to False.</p></li>
<li><p><strong>figsize</strong> (<em>Tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em><em>, </em><em>optional</em>) – Size of the figure/canvas, defaults to (9, 11)</p></li>
<li><p><strong>dpi</strong> (<em>int</em><em>, </em><em>optional</em>) – Pixels per inch, defaults to 144</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Define a custom title. Otherwise, an automatic title
will be created, defaults to None</p></li>
<li><p><strong>return_ax</strong> (<em>bool</em><em>, </em><em>optional</em>) – Return plt.figure and list of axes.
Defaults to False.
This overwrites any choice to save the figure.</p></li>
<li><p><strong>style</strong> (<em>str</em><em>, </em><em>optional</em>) – Style of the plot. Defaults to ‘technical’. The other
option would be ‘publication’ (looks better but is less
informative).</p></li>
<li><p><strong>dateformat</strong> (<em>str</em><em>, </em><em>optional</em>) – Format of the date on the x-axis. Defaults to
‘%d %b %y’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>If <cite>return_ax</cite> is set to True it returns fig and axes.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.monitor.dv.DV.smooth_sim_mat">
<span class="sig-name descname"><span class="pre">smooth_sim_mat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">win_len</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_corr_below</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/monitor/dv.html#DV.smooth_sim_mat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.dv.DV.smooth_sim_mat" title="Permalink to this definition">#</a></dt>
<dd><p>Smoothes the similarity matrix along the correlation time axis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>win_len</strong> (<em>int</em>) – Length of the window in number of samples.</p></li>
<li><p><strong>exclude_corr_below</strong> (<em>float</em>) – Exclude data points with a correlation
coefficient below the chosen threshold. Defaults to None (i.e.,
include all)</p></li>
</ul>
</dd>
<dt class="field-even">Note:<span class="colon">:</span></dt>
<dd class="field-even"><p>This action is perfomed in-place and irreversible as the original
data are not accesible any more.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.dv.read_dv">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.dv.</span></span><span class="sig-name descname"><span class="pre">read_dv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><span class="pre">DV</span></a></span></span><a class="reference internal" href="../../_modules/seismic/monitor/dv.html#read_dv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.dv.read_dv" title="Permalink to this definition">#</a></dt>
<dd><p>Reads a saved velocity change object from an <strong>.npz</strong> file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – Path to file, wildcards allowed</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the corresponding and converted DV object</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV">DV</a>, List[<a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV">DV</a>] if path contains wildcards</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="seismic-monitor-spatial">
<h3>seismic.monitor.spatial<a class="headerlink" href="#seismic-monitor-spatial" title="Permalink to this heading">#</a></h3>
<p>Module to invert velocity change time series from a set of correlations to a spatial velocity field. Base on the algorithm proposed in
[Obermann et al. (2013)](<a class="reference external" href="https://doi.org/10.1002/2013JB010399">https://doi.org/10.1002/2013JB010399</a>).</p>
<span class="target" id="module-seismic.monitor.spatial"></span><p>Spatial imaging by means of a Boltzmann-equation-based sensitivity kernel
(see Obermann et al., 2013 and Paasschens, 1997)</p>
<p>Implementation here is just for the 2D case</p>
<dl class="field-list">
<dt class="field-odd">copyright<span class="colon">:</span></dt>
<dd class="field-odd"><p>The SeisMIC development team (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>).</p>
</dd>
<dt class="field-even">license<span class="colon">:</span></dt>
<dd class="field-even"><blockquote>
<div><p>EUROPEAN UNION PUBLIC LICENCE v. 1.2</p>
</div></blockquote>
<p>(<a class="reference external" href="https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12">https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12</a>)</p>
</dd>
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Monday, 16th January 2023 10:53:31 am
Last Modified: Friday, 28th July 2023 03:20:46 pm</p>
<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.spatial.probability">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.spatial.</span></span><span class="sig-name descname"><span class="pre">probability</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dist</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mf_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">atol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/spatial.html#probability"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.spatial.probability" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the probability for a wave with the given properties to pass
through a point at distance <cite>dist</cite>. Following the diffusion law.</p>
<p>Implementation as in Obermann et al. (2013).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dist</strong> (<em>np.ndarray</em><em> | </em><em>float</em>) – distance to the source. Can be a matrix.</p></li>
<li><p><strong>t</strong> (<em>float</em><em> or </em><em>1D numpy array</em>) – time</p></li>
<li><p><strong>vel</strong> (<em>float</em>) – velocity for homogeneous velocities</p></li>
<li><p><strong>mf_path</strong> (<em>float</em>) – Mean free path of the wave.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The probability. In the same shape as <code class="docutils literal notranslate"><span class="pre">dist</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray | float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.spatial.compute_grid_dist">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.spatial.</span></span><span class="sig-name descname"><span class="pre">compute_grid_dist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x0</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y0</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/spatial.html#compute_grid_dist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.spatial.compute_grid_dist" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the distance of each point on the grid x, y to x0, y0.
(2D)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>np.ndarray</em>) – X coordinate axis</p></li>
<li><p><strong>y</strong> (<em>np.ndarray</em>) – y coordiante axis</p></li>
<li><p><strong>x0</strong> (<em>float</em>) – x-position of point</p></li>
<li><p><strong>y0</strong> (<em>float</em>) – y-position of point</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>distance matrix in form of a 2D matrix.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.spatial.sensitivity_kernel">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.spatial.</span></span><span class="sig-name descname"><span class="pre">sensitivity_kernel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mf_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/spatial.html#sensitivity_kernel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.spatial.sensitivity_kernel" title="Permalink to this definition">#</a></dt>
<dd><p>Computes a 2D surface-wave sensitivity kernel for an
ambient noise cross-correlation between two station <code class="docutils literal notranslate"><span class="pre">s1</span></code> and <code class="docutils literal notranslate"><span class="pre">s2</span></code>.
The computation is based on a time-dependendent solution of the Boltzmann
equation for a homogeneous medium (see Obermann et al., 2013 and
Paasschens, 1997).</p>
<p>Implementation as in Obermann et al. (2013). Limits for nan and inf
will return 0, or 1 respectively.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A large <code class="docutils literal notranslate"><span class="pre">dt</span></code> can lead to artefacts in the kernel. <code class="docutils literal notranslate"><span class="pre">dt</span></code> should
always be smaller than dx/(2*vel).</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s1</strong> (<em>np.ndarray</em>) – Position of Station 1, format is [x, y].</p></li>
<li><p><strong>s2</strong> (<em>np.ndarray</em>) – Position of Station 2, format is [x, y].</p></li>
<li><p><strong>x</strong> (<em>np.ndarray</em>) – Monotonously increasing array holding the x-coordinates of the
grid the kernel should be computed on.</p></li>
<li><p><strong>y</strong> (<em>np.ndarray</em>) – Monotonously increasing array holding the y-coordinates of the
grid the kernel should be computed on.</p></li>
<li><p><strong>t</strong> (<em>float</em>) – Time of coda that is probed. Usually set as the middle of the
used time window</p></li>
<li><p><strong>dt</strong> (<em>float</em>) – Sampling interval that the probability will be computed in.
Note that dt should not be too large. Otherwise, numerical artefacts
can occur.</p></li>
<li><p><strong>vel</strong> (<em>float</em>) – Surface wave velocity. Note that units between coordinate grid
and velocity have to be consistent (i.e., km/s and km or m and m/s)</p></li>
<li><p><strong>mf_path</strong> (<em>float</em>) – Mean free path of the wave (see Obermann et al. 2013 for
details)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The sensitivity_kernel of the grid. Can be plotted against.        np.meshgrid(x, y)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.spatial.data_variance">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.spatial.</span></span><span class="sig-name descname"><span class="pre">data_variance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">corr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bandwidth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq_c</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/spatial.html#data_variance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.spatial.data_variance" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the variance of the velocity change data based on the coherence
value between stretched reference trace and correlation function.</p>
<p>(see Obermann et. al. 2013)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>corr</strong> (<em>np.ndarray</em><em> | </em><em>float</em>) – coherence</p></li>
<li><p><strong>bandwidth</strong> (<em>float</em>) – Bandwidth between low and highpass filter</p></li>
<li><p><strong>tw</strong> (<em>Tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em>) – Time Window used for the dv/v computation. In the form
Tuple[tw_start, tw_end]</p></li>
<li><p><strong>freq_c</strong> (<em>float</em>) – Centre frequency.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Data Variance in the same shape as corr</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray | float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.spatial.compute_cm">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.spatial.</span></span><span class="sig-name descname"><span class="pre">compute_cm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scaling_factor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">corr_len</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">std_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/spatial.html#compute_cm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.spatial.compute_cm" title="Permalink to this definition">#</a></dt>
<dd><p>Computes the model variance for the dv/v grid.</p>
<p>(see Obermann et. al. 2013)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scaling_factor</strong> (<em>float</em>) – Scaling factor, dependent on the cell length.
(e.g., 1*cell_length)</p></li>
<li><p><strong>corr_len</strong> (<em>float</em>) – Length over which the parameters are related (high
value means stronger smoothing).</p></li>
<li><p><strong>std_model</strong> (<em>float</em>) – A-priori standard deviation of the model. Corresponds
to the best agreement between 1) the stability of the model for the
velocity variations and 2) the minimised difference between the model
predictions (output of the forward problem) and the data.
Can be estimated via the L-curve criterion (see Hansen 1992)</p></li>
<li><p><strong>dist</strong> (<em>np.ndarray</em>) – Matrix containing distance between the two cells i and j.
Will always be 0 on the diagonal where i==j.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Returns the model variance in the same shape as dist. I.e.,
NxN where N is the number of station combinations.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.spatial.geo2cart">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.spatial.</span></span><span class="sig-name descname"><span class="pre">geo2cart</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lon</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lat0</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">numpy.ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/spatial.html#geo2cart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.spatial.geo2cart" title="Permalink to this definition">#</a></dt>
<dd><p>Convert geographic coordinates to Northing and Easting for a local grid.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="http://wiki.gis.com/wiki/index.php/Easting_and_northing">http://wiki.gis.com/wiki/index.php/Easting_and_northing</a></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lat</strong> (<em>np.ndarray</em><em> | </em><em>float</em>) – Latitude(s)</p></li>
<li><p><strong>lon</strong> (<em>np.ndarray</em><em> | </em><em>float</em>) – Longitude(s)</p></li>
<li><p><strong>lat0</strong> (<em>float</em>) – Latitude of the lower left corner of the grid</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple holding (Easting, Northing) in km and in the same shape
as <code class="docutils literal notranslate"><span class="pre">lat</span></code> and <code class="docutils literal notranslate"><span class="pre">lon</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[np.ndarray, np.ndarray]</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="seismic.monitor.spatial.DVGrid">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">seismic.monitor.spatial.</span></span><span class="sig-name descname"><span class="pre">DVGrid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lat0</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lon0</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">res</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mf_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/monitor/spatial.html#DVGrid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.spatial.DVGrid" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Object to handle spatially gridded DV objects.</p>
<p>Initialises the grid to compute dv/v on. The grid will be in
Cartesian coordinates with the lower left boarder (lon0, lat0)
as reference point.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lat0</strong> (<em>float</em>) – Minimum latitude on the grid.</p></li>
<li><p><strong>lon0</strong> (<em>float</em>) – Minimum longitude on the grid</p></li>
<li><p><strong>res</strong> (<em>float</em>) – Resolution in km</p></li>
<li><p><strong>x</strong> (<em>float</em>) – Eastwards extent of the grid in km</p></li>
<li><p><strong>y</strong> (<em>float</em>) – Northwards extent of the grid in km</p></li>
<li><p><strong>dt</strong> (<em>float</em>) – Sampling interval for the numerical integration of the
sensitivity kernels. Coarse spacing might cause artefacts. Fine
spacing will result in higher computation times.</p></li>
<li><p><strong>vel</strong> (<em>float</em>) – Wave velocity</p></li>
<li><p><strong>mf_path</strong> (<em>float</em>) – Mean free path of a wave</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="seismic.monitor.spatial.DVGrid.forward_model">
<span class="sig-name descname"><span class="pre">forward_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dv_grid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dvs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><span class="pre">DV</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">utc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">UTCDateTime</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stat0</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stat1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/spatial.html#DVGrid.forward_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.spatial.DVGrid.forward_model" title="Permalink to this definition">#</a></dt>
<dd><p>Solves the forward problem associated to the grid computation.
I.e., computes the velocity changes theoretically measured at each
station for a given dv/v grid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dv_grid</strong> (<em>np.ndarray</em>) – dv/v grid. Must have the same shape as self.xgrid</p></li>
<li><p><strong>dvs</strong> (<em>Optional</em><em>[</em><em>Iterable</em><em>[</em><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><em>DV</em></a><em>]</em><em>]</em><em>, </em><em>optional</em>) – Iterator over <a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><code class="xref py py-class docutils literal notranslate"><span class="pre">DV</span></code></a> to
extract the parameters from. If this is defined <code class="docutils literal notranslate"><span class="pre">utc</span></code> has to
be defined as well. If it’s None all other parameters have to be
defined, defaults to None</p></li>
<li><p><strong>utc</strong> (<em>Optional</em><em>[</em><em>UTCDateTime</em><em>]</em><em>, </em><em>optional</em>) – The time to extract the properties from the dv
files from, defaults to None</p></li>
<li><p><strong>tw</strong> (<em>Optional</em><em>[</em><em>Tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em><em>]</em><em>, </em><em>optional</em>) – Lapse time Window used for the dv/v estimation,
defaults to None</p></li>
<li><p><strong>stat0</strong> (<em>Optional</em><em>[</em><em>Iterable</em><em>[</em><em>Tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em><em>]</em><em>]</em><em>, </em><em>optional</em>) – Coordinates of the first station of the
cross-correlation. Given as an array with the form:
[(latitude0, longitude0), (latitude1, longitude1), …],
defaults to None.</p></li>
<li><p><strong>stat1</strong> (<em>Optional</em><em>[</em><em>Iterable</em><em>[</em><em>Tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em><em>]</em><em>]</em><em>, </em><em>optional</em>) – Coordinates of the second station of the
cross-correlation. Given as an array with the form:
[(latitude0, longitude0), (latitude1, longitude1), …],
defaults to None., defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>TypeError</strong> – If too few variables are defined</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A vector with one dv/v value for each station combination
in the stat0-stat1 vectors.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.monitor.spatial.DVGrid.compute_dv_grid">
<span class="sig-name descname"><span class="pre">compute_dv_grid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dvs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><span class="pre">DV</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">utc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UTCDateTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scaling_factor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">corr_len</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">std_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq0</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compute_resolution</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/spatial.html#DVGrid.compute_dv_grid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.spatial.DVGrid.compute_dv_grid" title="Permalink to this definition">#</a></dt>
<dd><p>Perform a linear least-squares inversion of station specific velocity
changes (dv/v) at time <code class="docutils literal notranslate"><span class="pre">t</span></code>.</p>
<p>The algorithm will perform the following steps:
1. Computes the sensitivity kernels for each station pair.
2. Computes model and data variance.
3. Inverts the velocity changes onto a flattened grid.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All computations are performed on a flattened grid, so that the
grid is actually just one-dimensional. The return value is
reshaped onto the shape of self.xgrid.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The returned value and the value in self.vel_change is strictly
speaking not a velocity change, but an epsilon value. That
corresponds to -dv/v</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dvs</strong> (<em>Iterator</em><em>[</em><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><em>DV</em></a><em>]</em>) – The :class:<code class="docutils literal notranslate"><span class="pre">~seismic.monitor.dv.DV</span></code> objects to use.
Note that the input can be an iterator, so that not actually all
dvs have to be loaded into RAM at the same time.</p></li>
<li><p><strong>utc</strong> (<em>UTCDateTime</em>) – Time at which the velocity changes should be inverted.
Has to be covered by the <code class="docutils literal notranslate"><span class="pre">DV</span></code> objects.</p></li>
<li><p><strong>scaling_factor</strong> (<em>float</em>) – Scaling factor, dependent on the cell length.
(e.g., 1*cell_length)</p></li>
<li><p><strong>corr_len</strong> (<em>float</em>) – Length over which the parameters are related (high
value means stronger smoothing).</p></li>
<li><p><strong>std_model</strong> (<em>float</em>) – A-priori standard deviation of the model. Corresponds
to the best agreement between 1) the stability of the model for the
velocity variations and 2) the minimised difference between the
model predictions (output of the forward problem) and the data.
Can be estimated via the L-curve criterion (see Hansen 1992)</p></li>
<li><p><strong>tw</strong> (<em>Tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em><em>, </em><em>optional</em>) – Time window used to evaluate the velocity changes.
Given in the form Tuple[tw_start, tw_end]. Not required if
the used dvs have a <code class="docutils literal notranslate"><span class="pre">dv_processing</span></code> attribute.</p></li>
<li><p><strong>freq0</strong> (<em>float</em><em>, </em><em>optional</em>) – high-pass frequency of the used bandpass filter.
Not required if the used dvs have a <code class="docutils literal notranslate"><span class="pre">dv_processing</span></code> attribute.</p></li>
<li><p><strong>freq1</strong> (<em>float</em><em>, </em><em>optional</em>) – low-pass frequency of the used bandpass filter.
Not required  the used dvs have a <code class="docutils literal notranslate"><span class="pre">dv_processing</span></code> attribute.</p></li>
<li><p><strong>compute_resolution</strong> (<em>bool</em><em>, </em><em>defaults to False</em>) – Compute the resolution matrix?
Will be saved in self.resolution</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – For times that are not covered by the dvs
time-series.</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The dv-grid (with corresponding coordinates in
self.xgrid and self.ygrid or self.xaxis and self.yaxis,
respectively). Note this is actually an epsilon grid (meaning
it represents the stretch value i.e., -dv/v)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.monitor.spatial.DVGrid.compute_resolution">
<span class="sig-name descname"><span class="pre">compute_resolution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dvs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><span class="pre">DV</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">utc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UTCDateTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scaling_factor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">corr_len</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">std_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq0</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/spatial.html#DVGrid.compute_resolution"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.spatial.DVGrid.compute_resolution" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the model resolution of the dv/v model.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Described in the supplement to Obermann (2013)</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that it’s significantly faster to perform a joint inversion
or a gridded dv/v and resolution rather than performing them
separately.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dvs</strong> (<em>Iterator</em><em>[</em><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><em>DV</em></a><em>]</em>) – The :class:<code class="docutils literal notranslate"><span class="pre">~seismic.monitor.dv.DV</span></code> objects to use.
Note that the input can be an iterator, so that not actually all
dvs have to be loaded into RAM at the same time.</p></li>
<li><p><strong>utc</strong> (<em>UTCDateTime</em>) – Time at which the velocity changes should be inverted.
Has to be covered by the <code class="docutils literal notranslate"><span class="pre">DV</span></code> objects.</p></li>
<li><p><strong>scaling_factor</strong> (<em>float</em>) – Scaling factor, dependent on the cell length.
(e.g., 1*cell_length)</p></li>
<li><p><strong>corr_len</strong> (<em>float</em>) – Length over which the parameters are related (high
value means stronger smoothing).</p></li>
<li><p><strong>std_model</strong> (<em>float</em>) – A-priori standard deviation of the model. Corresponds
to the best agreement between 1) the stability of the model for the
velocity variations and 2) the minimised difference between the
model predictions (output of the forward problem) and the data.
Can be estimated via the L-curve criterion (see Hansen 1992)</p></li>
<li><p><strong>tw</strong> (<em>Tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em><em>, </em><em>optional</em>) – Time window used to evaluate the velocity changes.
Given in the form Tuple[tw_start, tw_end]. Not required if dv
has attribute <code class="docutils literal notranslate"><span class="pre">dv_processing</span></code>.</p></li>
<li><p><strong>freq0</strong> (<em>float</em><em>, </em><em>optional</em>) – high-pass frequency of the used bandpass filter.
Not required if dv has attribute <code class="docutils literal notranslate"><span class="pre">dv_processing</span></code>.</p></li>
<li><p><strong>freq1</strong> (<em>float</em><em>, </em><em>optional</em>) – low-pass frequency of the used bandpass filter.
Not required if dv has attribute <code class="docutils literal notranslate"><span class="pre">dv_processing</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – For times that are not covered by the dvs
time-series.</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A gridded resolution matrix.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.monitor.spatial.DVGrid.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plot_stations</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'seismic_r'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Axis</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Axis</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/spatial.html#DVGrid.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.spatial.DVGrid.plot" title="Permalink to this definition">#</a></dt>
<dd><p>Simple heatplot of the dv/v grid in Cartesian coordinates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>plot_stations</strong> (<em>bool</em><em>, </em><em>optional</em>) – plot station coordinates, defaults to True</p></li>
<li><p><strong>cmap</strong> (<em>str</em><em>, </em><em>optional</em>) – Colormap to use, defaults to ‘seismic’</p></li>
<li><p><strong>ax</strong> (<em>Optional</em><em>[</em><em>mpl.axis.Axis</em><em>]</em><em>, </em><em>optional</em>) – Axis to plot into, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Returns the axis handle</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>mpl.axis.Axis</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="seismic-monitor-wfc">
<h3>seismic.monitor.wfc<a class="headerlink" href="#seismic-monitor-wfc" title="Permalink to this heading">#</a></h3>
<p>Module to analyse the waveform coherence.</p>
<span class="target" id="module-seismic.monitor.wfc"></span><dl class="field-list">
<dt class="field-odd">copyright<span class="colon">:</span></dt>
<dd class="field-odd"><p>The SeisMIC development team (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>).</p>
</dd>
<dt class="field-even">license<span class="colon">:</span></dt>
<dd class="field-even"><blockquote>
<div><p>EUROPEAN UNION PUBLIC LICENCE v. 1.2</p>
</div></blockquote>
<p>(<a class="reference external" href="https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12">https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12</a>)</p>
</dd>
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Friday, 5th November 2021 08:19:58 am
Last Modified: Tuesday, 11th July 2023 04:42:52 pm</p>
<dl class="py class">
<dt class="sig sig-object py" id="seismic.monitor.wfc.WFC">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">seismic.monitor.wfc.</span></span><span class="sig-name descname"><span class="pre">WFC</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wfc_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">wfc_processing</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/monitor/wfc.html#WFC"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.wfc.WFC" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
<p>Object to hold the properties of a waveform coherency for a single
frequency and lapse time window.</p>
<p>The waveform coherency can be used as a measure of stability of
a certain correlation. See Steinmann, et. al. (2021) for details.</p>
<p>Initialise WFC object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>wfc_dict</strong> (<em>dict</em>) – Dictionary holding the correlation values for
each of the reference traces. The keys follow the syntax
<cite>reftr_%n</cite> where n is the number of the reference trace
(starting with 0).</p></li>
<li><p><strong>stats</strong> (<a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><em>CorrStats</em></a>) – CorrStats object from the original CorrBulk.
Also has to contain the keys holding the information about the
bandpass filter and the used lapse time window.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="seismic.monitor.wfc.WFC.compute_average">
<span class="sig-name descname"><span class="pre">compute_average</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/monitor/wfc.html#WFC.compute_average"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.wfc.WFC.compute_average" title="Permalink to this definition">#</a></dt>
<dd><p>Computes the average of the waveform coherency over the time axis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>average_reftrcs</strong> (<em>bool</em><em>, </em><em>optional</em>) – Average over all reference traces. Defaults to
True.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seismic.monitor.wfc.WFC.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/monitor/wfc.html#WFC.save"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.wfc.WFC.save" title="Permalink to this definition">#</a></dt>
<dd><p>Saves the object to an npz file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – Path to save to.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="seismic.monitor.wfc.WFCBulk">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">seismic.monitor.wfc.</span></span><span class="sig-name descname"><span class="pre">WFCBulk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wfcl</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#seismic.monitor.wfc.WFC" title="seismic.monitor.wfc.WFC"><span class="pre">WFC</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/monitor/wfc.html#WFCBulk"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.wfc.WFCBulk" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Object to hold the waveform coherency for one station and subsequently plot
it against frequency and lapse time window.</p>
<dl class="py method">
<dt class="sig sig-object py" id="seismic.monitor.wfc.WFCBulk.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'viridis'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Axes</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/wfc.html#WFCBulk.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.wfc.WFCBulk.plot" title="Permalink to this definition">#</a></dt>
<dd><p>Create a plot of the waveform coherency against frequency and lapse
time window.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of the plot, defaults to None</p></li>
<li><p><strong>log</strong> (<em>bool</em><em>, </em><em>optional</em>) – plot on logarithmic frequency axis, defaults to False</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.wfc.read_wfc">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.wfc.</span></span><span class="sig-name descname"><span class="pre">read_wfc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#seismic.monitor.wfc.WFC" title="seismic.monitor.wfc.WFC"><span class="pre">WFC</span></a></span></span><a class="reference internal" href="../../_modules/seismic/monitor/wfc.html#read_wfc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.wfc.read_wfc" title="Permalink to this definition">#</a></dt>
<dd><p>Read a <a class="reference internal" href="#seismic.monitor.wfc.WFC" title="seismic.monitor.wfc.WFC"><code class="xref py py-class docutils literal notranslate"><span class="pre">WFC</span></code></a> object saved as <em>npz</em>.
Returns a list if wildcards are used</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – Path to file</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The WFC object.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#seismic.monitor.wfc.WFC" title="seismic.monitor.wfc.WFC">WFC</a></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="seismic-monitor-post-corr-process">
<h3>seismic.monitor.post_corr_process<a class="headerlink" href="#seismic-monitor-post-corr-process" title="Permalink to this heading">#</a></h3>
<p>Holds the postprocessing functions for CorrBulks.</p>
<span class="target" id="module-seismic.monitor.post_corr_process"></span><dl class="field-list">
<dt class="field-odd">copyright<span class="colon">:</span></dt>
<dd class="field-odd"><p>The SeisMIC development team (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>).</p>
</dd>
<dt class="field-even">license<span class="colon">:</span></dt>
<dd class="field-even"><blockquote>
<div><p>EUROPEAN UNION PUBLIC LICENCE v. 1.2</p>
</div></blockquote>
<p>(<a class="reference external" href="https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12">https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12</a>)</p>
</dd>
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Christoph Sens-Schönefelder
Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Monday, 14th June 2021 08:50:57 am
Last Modified: Monday, 16th January 2023 11:13:58 am</p>
<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.post_corr_process.corr_mat_clip">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.post_corr_process.</span></span><span class="sig-name descname"><span class="pre">corr_mat_clip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thres</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/post_corr_process.html#corr_mat_clip"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.post_corr_process.corr_mat_clip" title="Permalink to this definition">#</a></dt>
<dd><p>Clip the Input Matrix upper and lower bounds to a multiple of its
standard deviation. <cite>thres</cite> determines the factor and <cite>axis</cite> the axis
the std should be computed over</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>np.ndarray</em>) – Input Array to be clipped</p></li>
<li><p><strong>thres</strong> (<em>float</em>) – factor of the standard deviation to clip by</p></li>
<li><p><strong>axis</strong> (<em>int</em>) – Axis to compute the std over and, subsequently clip over.
Can be None, if you wish to compute floating point rather than a
vector. Then, the array will be clipped evenly.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The clipped array</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.post_corr_process.corr_mat_smooth">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.post_corr_process.</span></span><span class="sig-name descname"><span class="pre">corr_mat_smooth</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wsize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wtype</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'flat'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/post_corr_process.html#corr_mat_smooth"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.post_corr_process.corr_mat_smooth" title="Permalink to this definition">#</a></dt>
<dd><p>Smoothing of a correlation matrix.</p>
<p>Smoothes the correlation matrix with a given window function of the given
width along the given axis. This method is based on the convolution of a
scaled window with the signal. Each row/col (i.e. depending on the selected
<code class="docutils literal notranslate"><span class="pre">axis</span></code>) is “prepared” by introducing reflected copies of it (with the
window size) in both ends so that transient parts are minimized in the
beginning and end part of the resulting array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>corr_mat</strong> (<em>dictionary</em><em> of </em><em>the type correlation matrix</em>) – correlation matrix to be smoothed</p></li>
<li><p><strong>wsize</strong> (<em>int</em>) – Window size</p></li>
<li><p><strong>wtype</strong> (<em>string</em>) – Window type. It can be one of:
[‘flat’, ‘hanning’, ‘hamming’, ‘bartlett’, ‘blackman’] defaults to
‘flat’</p></li>
<li><p><strong>axis</strong> (<em>int</em>) – Axis along with apply the filter. O: smooth along correlation
lag time axis 1: smooth along time axis</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>X</strong>: Filtered matrix</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.post_corr_process.unicode_to_string">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.post_corr_process.</span></span><span class="sig-name descname"><span class="pre">unicode_to_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/monitor/post_corr_process.html#unicode_to_string"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.post_corr_process.unicode_to_string" title="Permalink to this definition">#</a></dt>
<dd><p>Convert all unicode strings to utf-8 strings</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.post_corr_process.corr_mat_filter">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.post_corr_process.</span></span><span class="sig-name descname"><span class="pre">corr_mat_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">freqs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/post_corr_process.html#corr_mat_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.post_corr_process.corr_mat_filter" title="Permalink to this definition">#</a></dt>
<dd><p>Filter a correlation matrix.</p>
<p>Filters the correlation matrix corr_mat in the frequency band specified in
freqs using a zero phase filter of twice the order given in order.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>np.ndarray</em>) – correlation matrix</p></li>
<li><p><strong>stats</strong> (<a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrStats</span></code></a>) – The stats object corresponding to the CorrBulk object</p></li>
<li><p><strong>freqs</strong> (<em>array-like</em><em> of </em><em>length 2</em>) – lower and upper limits of the pass band in Hertz</p></li>
<li><p><strong>order</strong> (<em>int</em>) – half the order of the Butterworth filter</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>filtered correlation matrix</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.post_corr_process.corr_mat_resample">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.post_corr_process.</span></span><span class="sig-name descname"><span class="pre">corr_mat_resample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_times</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">UTCDateTime</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_times</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/post_corr_process.html#corr_mat_resample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.post_corr_process.corr_mat_resample" title="Permalink to this definition">#</a></dt>
<dd><p>Function to create correlation matrices with constant sampling</p>
<p>When created with recombine_corr_data the correlation matrix contains all
available correlation streams but homogeneous sampling is not guaranteed
as correlation functions may be missing due to data gaps. This function
restructures the correlation matrix by inserting or averaging correlation
functions to provide temporally homogeneous sampling. Inserted correlation
functions consist of ‘nan’ if gaps are present and averaging is done if
more than one correlation function falls in a bin between start_times[i]
and end_times[i]. If end_time is an empty list (default) end_times[i] is
set to start_times[i] + (start_times[1] - start_times[0])</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>np.ndarray</em>) – 2D matrix holding the correlation data</p></li>
<li><p><strong>Stats</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Stats</span></code>) – The stats object belonging to the
<a class="reference internal" href="#seismic.correlate.stream.CorrBulk" title="seismic.correlate.stream.CorrBulk"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrBulk</span></code></a> object.</p></li>
<li><p><strong>start_times</strong> (list of <code class="xref py py-class docutils literal notranslate"><span class="pre">UTCDateTime</span></code> objects) – list of starting times for the bins of the new
sampling</p></li>
<li><p><strong>end_times</strong> (list of <code class="xref py py-class docutils literal notranslate"><span class="pre">UTCDateTime</span></code> objects) – list of starting times for the bins of the new sampling</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>tuple</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the new data array and altered stats object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.post_corr_process.corr_mat_correct_decay">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.post_corr_process.</span></span><span class="sig-name descname"><span class="pre">corr_mat_correct_decay</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/post_corr_process.html#corr_mat_correct_decay"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.post_corr_process.corr_mat_correct_decay" title="Permalink to this definition">#</a></dt>
<dd><p>Correct for the amplitude decay in a correlation matrix.</p>
<p>Due to attenuation and geometrical spreading the amplitude of the
correlations decays with increasing lapse time. This decay is corrected
by dividing the correlation functions by an exponential function that
models the decay.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>np.ndarray</em>) – Matrix holding correlation data</p></li>
<li><p><strong>stats</strong> (<a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><em>CorrStats</em></a>) – Stats object afiliated to a CorrBulk object</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>correlations with decay corrected amplitudes</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.post_corr_process.corr_mat_envelope">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.post_corr_process.</span></span><span class="sig-name descname"><span class="pre">corr_mat_envelope</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/post_corr_process.html#corr_mat_envelope"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.post_corr_process.corr_mat_envelope" title="Permalink to this definition">#</a></dt>
<dd><p>Calculate the envelope of a correlation matrix.</p>
<p>The corrlation data of the correlation matrix are replaced by their
Hilbert envelopes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<em>np.ndarray</em>) – correlation matrix.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>hilb</strong>: The envelope of the correlation data in the same shape
as the input array.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.post_corr_process.corr_mat_normalize">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.post_corr_process.</span></span><span class="sig-name descname"><span class="pre">corr_mat_normalize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">starttime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endtime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normtype</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'energy'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/post_corr_process.html#corr_mat_normalize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.post_corr_process.corr_mat_normalize" title="Permalink to this definition">#</a></dt>
<dd><p>Correct amplitude variations with time in a correlation matrix.</p>
<p>Measure the maximum of the absolute value of the correlation matrix in
a specified lapse time window and normalize the correlation traces by
this values. A coherent phase in the respective lapse time window will
have constant ampitude afterwards..</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>np.ndarray</em>) – correlation matrix from CorrBulk</p></li>
<li><p><strong>stats</strong> (<a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrStats</span></code></a>) – The stats object from the
<a class="reference internal" href="#seismic.correlate.stream.CorrBulk" title="seismic.correlate.stream.CorrBulk"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrBulk</span></code></a> object.</p></li>
<li><p><strong>starttime</strong> (<em>float</em>) – beginning of time window in seconds with respect to the
zero position</p></li>
<li><p><strong>endtime</strong> (<em>float</em>) – end time window in seconds with respect to the zero
position</p></li>
<li><p><strong>normtype</strong> (<em>string</em>) – one of the following ‘energy’, ‘max’, ‘absmax’, ‘abssum’
to decide about the way to calculate the normalization.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Correlation matrix with normalized ampitudes.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.post_corr_process.corr_mat_mirror">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.post_corr_process.</span></span><span class="sig-name descname"><span class="pre">corr_mat_mirror</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/post_corr_process.html#corr_mat_mirror"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.post_corr_process.corr_mat_mirror" title="Permalink to this definition">#</a></dt>
<dd><p>Average the causal and acausal parts of a correlation matrix.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>np.ndarray</em>) – A matrix holding correlation data</p></li>
<li><p><strong>stats</strong> (<a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><em>CorrStats</em></a>) – the stats object corresponding to a CorrBulk object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>as the input but with
avaraged causal and acausal parts of the correlation data</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[np.ndarray, <a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats">CorrStats</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.post_corr_process.corr_mat_taper">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.post_corr_process.</span></span><span class="sig-name descname"><span class="pre">corr_mat_taper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/post_corr_process.html#corr_mat_taper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.post_corr_process.corr_mat_taper" title="Permalink to this definition">#</a></dt>
<dd><p>Taper a correlation matrix.</p>
<p>Apply a taper to all traces in the correlation matrix.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>np.ndarray</em>) – correlation matrix`</p></li>
<li><p><strong>width</strong> (<em>float</em>) – width to be tapered in seconds (per side)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The tapered matrix</p>
</dd>
</dl>
<p>..note:: <strong>In-place operation</strong></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.post_corr_process.corr_mat_taper_center">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.post_corr_process.</span></span><span class="sig-name descname"><span class="pre">corr_mat_taper_center</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slope_frac</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.05</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/post_corr_process.html#corr_mat_taper_center"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.post_corr_process.corr_mat_taper_center" title="Permalink to this definition">#</a></dt>
<dd><p>Taper the central part of a correlation matrix.</p>
<p>Due to electromagnetic cross-talk, signal processing or other effects the
correlaton matrices are often contaminated around the zero lag time. This
function tapers (multiples by zero) the central part of width <cite>width</cite>. To
avoid problems with interpolation and filtering later on this is done with
cosine taper</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>np.ndarray</em>) – Correlation data from CorrBulk object</p></li>
<li><p><strong>stats</strong> (<a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><em>CorrStats</em></a>) – Stats object from CorrBulk</p></li>
<li><p><strong>width</strong> (<em>float</em>) – width of the central window to be tapered in seconds
(in total, i.e. not per taper side)</p></li>
<li><p><strong>slope_frac</strong> (<em>float</em><em>, </em><em>optional</em>) – fraction of <cite>width</cite> used for soothing of edges,
defaults to 0.05</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The tapered matrix</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.post_corr_process.corr_mat_resample_time">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.post_corr_process.</span></span><span class="sig-name descname"><span class="pre">corr_mat_resample_time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/post_corr_process.html#corr_mat_resample_time"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.post_corr_process.corr_mat_resample_time" title="Permalink to this definition">#</a></dt>
<dd><p>Resample the lapse time axis of a correlation matrix. The correlations are
automatically filtered with a highpass filter of 0.4*sampling frequency to
avoid aliasing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>np.ndarray</em>) – correlation matrix</p></li>
<li><p><strong>stats</strong> (<a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrStats</span></code></a>) – The stats object associated to the
<a class="reference internal" href="#seismic.correlate.stream.CorrBulk" title="seismic.correlate.stream.CorrBulk"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrBulk</span></code></a> object.</p></li>
<li><p><strong>freq</strong> (<em>float</em>) – new sampling frequency</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple[np.ndarray, <a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats">CorrStats</a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Resampled data and changed stats object.</p>
</dd>
</dl>
<p>..note:: This action is performed <strong>in-place</strong>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.post_corr_process.corr_mat_decimate">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.post_corr_process.</span></span><span class="sig-name descname"><span class="pre">corr_mat_decimate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">factor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/post_corr_process.html#corr_mat_decimate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.post_corr_process.corr_mat_decimate" title="Permalink to this definition">#</a></dt>
<dd><p>Downsample a correlation matrix by an integer sample. A low-pass filter
is applied before decimating.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>np.ndarray</em>) – correlation matrix</p></li>
<li><p><strong>stats</strong> (<a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrStats</span></code></a>) – The stats object associated to the
<a class="reference internal" href="#seismic.correlate.stream.CorrBulk" title="seismic.correlate.stream.CorrBulk"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrBulk</span></code></a> object.</p></li>
<li><p><strong>factor</strong> (<em>int</em>) – The factor to reduce the sampling frequency by</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple[np.ndarray, <a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats">CorrStats</a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Decimated data and changed stats object.</p>
</dd>
</dl>
<p>..note:: This action is performed <strong>in-place</strong>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.post_corr_process.corr_mat_resample_or_decimate">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.post_corr_process.</span></span><span class="sig-name descname"><span class="pre">corr_mat_resample_or_decimate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/post_corr_process.html#corr_mat_resample_or_decimate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.post_corr_process.corr_mat_resample_or_decimate" title="Permalink to this definition">#</a></dt>
<dd><p>Downsample a correlation matrix. Decides automatically whether to decimate
or downsampled depneding on the target frequency. A low-pass filter
is applied to avoid aliasing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>np.ndarray</em>) – correlation matrix</p></li>
<li><p><strong>stats</strong> (<a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrStats</span></code></a>) – The stats object associated to the
<a class="reference internal" href="#seismic.correlate.stream.CorrBulk" title="seismic.correlate.stream.CorrBulk"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrBulk</span></code></a> object.</p></li>
<li><p><strong>freq</strong> (<em>float</em>) – new sampling frequency</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple[np.ndarray, <a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats">CorrStats</a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Decimated data and changed stats object.</p>
</dd>
</dl>
<p>..note:: This action is performed <strong>in-place</strong>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.post_corr_process.corr_mat_extract_trace">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.post_corr_process.</span></span><span class="sig-name descname"><span class="pre">corr_mat_extract_trace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'mean'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percentile</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">50.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/post_corr_process.html#corr_mat_extract_trace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.post_corr_process.corr_mat_extract_trace" title="Permalink to this definition">#</a></dt>
<dd><p>Extract a representative trace from a correlation matrix.</p>
<p>Extract a correlation trace from the that best represents the correlation
matrix. <code class="docutils literal notranslate"><span class="pre">Method</span></code> decides about method to extract the trace. The following
possibilities are available</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mean</span></code> averages all traces in the matrix</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">median</span></code> extracts the median trace</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">norm_mean</span></code> averages the traces normalized after normalizing for maxima</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">similarity_percentile</span></code> averages the <code class="docutils literal notranslate"><span class="pre">percentile</span></code> % of traces that</dt><dd><p>best correlate with the mean of all traces. This will exclude abnormal
traces. <code class="docutils literal notranslate"><span class="pre">percentile</span></code> = 50 will return an average of traces with
correlation (with mean trace) above the median.</p>
</dd>
</dl>
</li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>corr_mat</strong> (<em>dictionary</em>) – correlation matrix dictionary</p></li>
<li><p><strong>method</strong> (<em>string</em>) – method to extract the trace</p></li>
<li><p><strong>percentile</strong> (<em>float</em>) – only used for method==’similarity_percentile’</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>trace dictionary of type correlation trace</p>
</dd>
<dt class="field-odd">Return trace<strong>trace</strong><span class="colon">:</span></dt>
<dd class="field-odd"><p>extracted trace</p>
</dd>
</dl>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="seismic.monitor.post_corr_process.Error">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">seismic.monitor.post_corr_process.</span></span><span class="sig-name descname"><span class="pre">Error</span></span><a class="reference internal" href="../../_modules/seismic/monitor/post_corr_process.html#Error"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.post_corr_process.Error" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="seismic.monitor.post_corr_process.InputError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">seismic.monitor.post_corr_process.</span></span><span class="sig-name descname"><span class="pre">InputError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/monitor/post_corr_process.html#InputError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.post_corr_process.InputError" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#seismic.monitor.post_corr_process.Error" title="seismic.monitor.post_corr_process.Error"><code class="xref py py-class docutils literal notranslate"><span class="pre">Error</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.post_corr_process.corr_mat_stretch">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.post_corr_process.</span></span><span class="sig-name descname"><span class="pre">corr_mat_stretch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cdata</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_trc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stretch_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stretch_steps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sides</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'both'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_sim_mat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_tr_trim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_tr_stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/post_corr_process.html#corr_mat_stretch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.post_corr_process.corr_mat_stretch" title="Permalink to this definition">#</a></dt>
<dd><p>Time stretch estimate through stretch and comparison.</p>
<p>This function estimates stretching of the time axis of traces as it can
occur if the propagation velocity changes.</p>
<p>Time stretching is estimated comparing each correlation function stored
in the <code class="docutils literal notranslate"><span class="pre">corr_data</span></code> matrix (one for each row) with <code class="docutils literal notranslate"><span class="pre">stretch_steps</span></code>
stretched versions  of reference trace stored in <code class="docutils literal notranslate"><span class="pre">ref_trc</span></code>. If
<code class="docutils literal notranslate"><span class="pre">ref_trc</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code> the mean of all traces is used.
The maximum amount of stretching may be passed in <code class="docutils literal notranslate"><span class="pre">stretch_range</span></code>. The
time axis is multiplied by 1/(1 + stretch).
The best match (stretching amount and corresponding correlation value) is
calculated on different time windows. If <code class="docutils literal notranslate"><span class="pre">tw</span> <span class="pre">=</span> <span class="pre">None</span></code> the stretching is
estimated on the whole trace.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>corr_mat</strong> (<em>dictionary</em>) – correlation matrix dictionary as produced by
<code class="xref py py-class docutils literal notranslate"><span class="pre">recombine_corr_data</span></code></p></li>
<li><p><strong>ref_trc</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 1D array containing the reference trace to be stretched
and compared to the individual traces in <code class="docutils literal notranslate"><span class="pre">mat</span></code></p></li>
<li><p><strong>tw</strong> (list of <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code> of int) – list of 1D ndarrays holding the indices of samples in the time
windows to be use in the time shift estimate. The samples are counted
from the zero lag time with the index of the first sample being 0. If
<code class="docutils literal notranslate"><span class="pre">tw</span> <span class="pre">=</span> <span class="pre">None</span></code> the full time range is used.</p></li>
<li><p><strong>stretch_range</strong> (<em>scalar</em>) – Maximum amount of relative stretching.
Stretching and compression is tested from <code class="docutils literal notranslate"><span class="pre">-stretch_range</span></code> to
<code class="docutils literal notranslate"><span class="pre">stretch_range</span></code>.</p></li>
<li><p><strong>stretch_steps</strong> (<em>scalar`</em>) – Number of shifted version to be tested. The
increment will be <code class="docutils literal notranslate"><span class="pre">(2</span> <span class="pre">*</span> <span class="pre">stretch_range)</span> <span class="pre">/</span> <span class="pre">stretch_steps</span></code></p></li>
<li><p><strong>sides</strong> (<em>str</em>) – Side of the reference matrix to be used for the stretching
estimate (‘both’ | ‘left’ | ‘right’ | ‘single’) <code class="docutils literal notranslate"><span class="pre">single</span></code> is used for
one-sided signals from active sources with zero lag time is on the
first sample. Other options assume that the zero lag time is in the
center of the traces.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><p><strong>dv</strong>: Dictionary with the following keys</p>
<dl class="simple">
<dt><em>corr</em>: 2d ndarray containing the correlation value for the best</dt><dd><p>match for each row of <code class="docutils literal notranslate"><span class="pre">mat</span></code> and for each time window.
Its dimension is: :func:(len(tw),mat.shape[1])</p>
</dd>
<dt><em>value</em>: 2d ndarray containing the stretch amount corresponding to</dt><dd><p>the best match for each row of <code class="docutils literal notranslate"><span class="pre">mat</span></code> and for each time window.
Stretch is a relative value corresponding to the negative relative
velocity change -dv/v.
Its dimension is: :func:(len(tw),mat.shape[1])</p>
</dd>
<dt><em>sim_mat</em>: 3d ndarray containing the similarity matricies that</dt><dd><p>indicate the correlation coefficient with the reference for the
different time windows, different times and different amount of
stretching.
Its dimension is: <code class="xref py py-func docutils literal notranslate"><span class="pre">(len(tw),mat.shape[1],len(strvec))()</span></code></p>
</dd>
<dt><em>second_axis</em>: It contains the stretch vector used for the velocity</dt><dd><p>change estimate.</p>
</dd>
<dt><em>vale_type</em>: It is equal to ‘stretch’ and specify the content of</dt><dd><p>the returned ‘value’.</p>
</dd>
<dt><em>method</em>: It is equal to ‘single_ref’ and specify in which “way” the</dt><dd><p>values have been obtained.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.post_corr_process.corr_mat_shift">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.post_corr_process.</span></span><span class="sig-name descname"><span class="pre">corr_mat_shift</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_trc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift_steps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">101</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sides</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'both'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_sim_mat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/post_corr_process.html#corr_mat_shift"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.post_corr_process.corr_mat_shift" title="Permalink to this definition">#</a></dt>
<dd><p>Time shift estimate through shifting and comparison.</p>
<p>This function estimates shifting of the time axis of traces as it can
occur if the clocks of digitizers drift.</p>
<p>Time shifts are estimated comparing each correlation function stored
in the <code class="docutils literal notranslate"><span class="pre">corr_data</span></code> matrix (one for each row) with <code class="docutils literal notranslate"><span class="pre">shift_steps</span></code>
shifted versions  of reference trace stored in <code class="docutils literal notranslate"><span class="pre">ref_trc</span></code>.
The maximum amount of shifting may be passed in <code class="docutils literal notranslate"><span class="pre">shift_range</span></code>.
The best match (shifting amount and corresponding correlation value) is
calculated on different time windows. If <code class="docutils literal notranslate"><span class="pre">tw</span> <span class="pre">=</span> <span class="pre">None</span></code> the shifting is
estimated on the whole trace.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>corr_mat</strong> (<em>dictionary</em>) – correlation matrix dictionary as produced by
<code class="xref py py-class docutils literal notranslate"><span class="pre">recombine_corr_data</span></code></p></li>
<li><p><strong>ref_trc</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 1D array containing the reference trace to be stretched
and compared to the individual traces in <code class="docutils literal notranslate"><span class="pre">mat</span></code></p></li>
<li><p><strong>tw</strong> (list of <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code> of int) – list of 1D ndarrays holding the indices of sampels in the time
windows to be use in the time shift estimate. The sampels are counted
from the zero lag time with the index of the first sample being 0. If
<code class="docutils literal notranslate"><span class="pre">tw</span> <span class="pre">=</span> <span class="pre">None</span></code> the full time range is used.</p></li>
<li><p><strong>shift_range</strong> (<em>scalar</em>) – Maximum amount of shifting in samples.
Shifting is tested from <code class="docutils literal notranslate"><span class="pre">-stretch_range</span></code> to
<code class="docutils literal notranslate"><span class="pre">stretch_range</span></code>.</p></li>
<li><p><strong>shift_steps</strong> (<em>scalar`</em>) – Number of shifted version to be tested. The
increment will be <code class="docutils literal notranslate"><span class="pre">(2</span> <span class="pre">*</span> <span class="pre">shift_range)</span> <span class="pre">/</span> <span class="pre">shift_steps</span></code></p></li>
<li><p><strong>sides</strong> (<em>str</em>) – Side of the reference matrix to be used for the shifting
estimate (‘both’ | ‘right’) <code class="docutils literal notranslate"><span class="pre">single</span></code> is used for
one-sided signals from active sources with zero lag time is on the
first sample. Other options assume that the zero lag time is in the
center of the traces.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><p><strong>dv</strong>: Dictionary with the following keys</p>
<dl class="simple">
<dt><em>corr</em>: 2d ndarray containing the correlation value for the best</dt><dd><p>match for each row of <code class="docutils literal notranslate"><span class="pre">mat</span></code> and for each time window.
Its dimension is: :func:(len(tw),mat.shape[1])</p>
</dd>
<dt><em>value</em>: 2d ndarray containing the stretch amount corresponding to</dt><dd><p>the best match for each row of <code class="docutils literal notranslate"><span class="pre">mat</span></code> and for each time window.
Stretch is a relative value corresponding to the negative relative
velocity change -dv/v.
Its dimension is: :func:(len(tw),mat.shape[1])</p>
</dd>
<dt><em>sim_mat</em>: 3d ndarray containing the similarity matricies that</dt><dd><p>indicate the correlation coefficient with the reference for the
different time windows, different times and different amount of
stretching.
Its dimension is: <code class="xref py py-func docutils literal notranslate"><span class="pre">(len(tw),mat.shape[1],len(strvec))()</span></code></p>
</dd>
<dt><em>second_axis</em>: It contains the stretch vector used for the velocity</dt><dd><p>change estimate.</p>
</dd>
<dt><em>vale_type</em>: It is equal to ‘shift’ and specify the content of</dt><dd><p>the returned ‘value’.</p>
</dd>
<dt><em>method</em>: It is equal to ‘single_ref’ and specify in which “way” the</dt><dd><p>values have been obtained.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.post_corr_process.measure_shift">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.post_corr_process.</span></span><span class="sig-name descname"><span class="pre">measure_shift</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_trc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift_steps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">101</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sides</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'both'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_sim_mat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><span class="pre">DV</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/post_corr_process.html#measure_shift"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.post_corr_process.measure_shift" title="Permalink to this definition">#</a></dt>
<dd><p>Time shift estimate through shifting and comparison.</p>
<p>This function estimates shifting of the time axis of traces as it can
occur if the clocks of digitizers drift.</p>
<p>Time shifts are estimated comparing each trace (e.g. correlation function
stored in the <code class="docutils literal notranslate"><span class="pre">corr_data</span></code> matrix (one for each row) with shifted
versions  of reference trace stored in <code class="docutils literal notranslate"><span class="pre">ref_trc</span></code>. The range of shifting
to be tested is given in <code class="docutils literal notranslate"><span class="pre">shift_range</span></code> in seconds. It is used in a
symmetric way from -<code class="docutils literal notranslate"><span class="pre">shift_range</span></code> to +``shift_range``. Shifting ist
tested <code class="docutils literal notranslate"><span class="pre">shift_steps</span></code> times. <code class="docutils literal notranslate"><span class="pre">shift_steps</span></code> should be an odd number to
test zero shifting. The best match (shifting amount and corresponding
correlation value) is calculated in specified time windows. Multiple time
windows may be specified in  <code class="docutils literal notranslate"><span class="pre">tw</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – correlation matrix or collection of traces. lag time runs
along rows and number of traces is <code class="docutils literal notranslate"><span class="pre">data.shape[0]</span></code>.</p></li>
<li><p><strong>ref_trc</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 1D array containing the reference trace to be shifted
and compared to the individual traces in <code class="docutils literal notranslate"><span class="pre">data</span></code>. If <code class="docutils literal notranslate"><span class="pre">ref_trc``is</span>
<span class="pre">None,</span> <span class="pre">the</span> <span class="pre">average</span> <span class="pre">of</span> <span class="pre">all</span> <span class="pre">traces</span> <span class="pre">in</span> <span class="pre">``data</span></code> is used.</p></li>
<li><p><strong>tw</strong> (<em>list</em><em> of </em><em>lists with two floats</em>) – list of lists that contain the start and end times of the time
windows in which the similarity is to be estimated. Time are given in
seconds of lag time with respect to zero lag time. Using multiple
lists of start end end time the best shift can be estimated in
multiple time windows. If <code class="docutils literal notranslate"><span class="pre">tw</span> <span class="pre">=</span> <span class="pre">None</span></code> one time window is used
containing the full time range of lag times in the traces.</p></li>
<li><p><strong>shift_range</strong> (<em>scalar</em>) – Maximum amount of shifting in second.
Shifting is tested from <code class="docutils literal notranslate"><span class="pre">-stretch_range</span></code> to
<code class="docutils literal notranslate"><span class="pre">stretch_range</span></code>.</p></li>
<li><p><strong>shift_steps</strong> (<em>scalar`</em>) – Number of shifted version to be tested. The
increment will be <code class="docutils literal notranslate"><span class="pre">(2</span> <span class="pre">*</span> <span class="pre">shift_range)</span> <span class="pre">/</span> <span class="pre">shift_steps</span></code></p></li>
<li><p><strong>sides</strong> (<em>str</em>) – Side of the traces to be used for the shifting estimate
(‘both’ | ‘single’). <code class="docutils literal notranslate"><span class="pre">single</span></code> is used for
one-sided signals from active sources or if the time window shall
not be symmetric. For <code class="docutils literal notranslate"><span class="pre">both</span></code> the time window will be mirrowd about
zero lag time, e.g. [start,end] will result in time windows
[-end:-start] and [start:end] being used simultaneousy</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>List[Dictionary]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><p><strong>dv</strong>: List of <code class="docutils literal notranslate"><span class="pre">len(tw)</span></code> Dictionaries with the following keys</p>
<dl class="simple">
<dt><em>corr</em>: 2d ndarray containing the correlation value for the best</dt><dd><p>match for each row of <code class="docutils literal notranslate"><span class="pre">mat</span></code> and for each time window.
Its dimension is: :func:(len(tw),mat.shape[1])</p>
</dd>
<dt><em>value</em>: 2d ndarray containing the stretch amount corresponding to</dt><dd><p>the best match for each row of <code class="docutils literal notranslate"><span class="pre">mat</span></code> and for each time window.
Stretch is a relative value corresponding to the negative relative
velocity change -dv/v.
Its dimension is: :func:(len(tw),mat.shape[1])</p>
</dd>
<dt><em>sim_mat</em>: 3d ndarray containing the similarity matricies that</dt><dd><p>indicate the correlation coefficient with the reference for the
different time windows, different times and different amount of
stretching.
Its dimension is: <code class="xref py py-func docutils literal notranslate"><span class="pre">(len(tw),mat.shape[1],len(strvec))()</span></code></p>
</dd>
<dt><em>second_axis</em>: It contains the stretch vector used for the velocity</dt><dd><p>change estimate.</p>
</dd>
<dt><em>vale_type</em>: It is equal to ‘shift’ and specify the content of</dt><dd><p>the returned ‘value’.</p>
</dd>
<dt><em>method</em>: It is equal to ‘single_ref’ and specify in which “way” the</dt><dd><p>values have been obtained.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.post_corr_process.apply_shift">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.post_corr_process.</span></span><span class="sig-name descname"><span class="pre">apply_shift</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">shifts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/post_corr_process.html#apply_shift"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.post_corr_process.apply_shift" title="Permalink to this definition">#</a></dt>
<dd><p>Apply a shift to a correlation matrix.</p>
<p>This function applies a shift given in seconds to each trace in the matrix.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – correlation matrix or collection of traces. lag time runs
along rows and number of traces is <code class="docutils literal notranslate"><span class="pre">data.shape[0]</span></code>.</p></li>
<li><p><strong>shifts</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – shifts in seconds for each trace in ‘data’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.post_corr_process.apply_stretch">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.post_corr_process.</span></span><span class="sig-name descname"><span class="pre">apply_stretch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">stretches</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/post_corr_process.html#apply_stretch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.post_corr_process.apply_stretch" title="Permalink to this definition">#</a></dt>
<dd><p>Apply a stretches to a correlation matrix.</p>
<p>This function applies a stretch given in relative units to each trace
in the matrix.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – correlation matrix or collection of traces. lag time runs
along rows and number of traces is <code class="docutils literal notranslate"><span class="pre">data.shape[0]</span></code>.</p></li>
<li><p><strong>stretches</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – stretches in relative units for each trace in ‘data’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="seismic-monitor-stretch-mod">
<h3>seismic.monitor.stretch_mod<a class="headerlink" href="#seismic-monitor-stretch-mod" title="Permalink to this heading">#</a></h3>
<p>Holds functions for the velocity estimation via stretching.</p>
<span class="target" id="module-seismic.monitor.stretch_mod"></span><dl class="field-list">
<dt class="field-odd">copyright<span class="colon">:</span></dt>
<dd class="field-odd"><p></p></dd>
<dt class="field-even">license<span class="colon">:</span></dt>
<dd class="field-even"><blockquote>
<div><p>EUROPEAN UNION PUBLIC LICENCE v. 1.2</p>
</div></blockquote>
<p>(<a class="reference external" href="https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12">https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12</a>)</p>
</dd>
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Tuesday, 15th June 2021 03:42:14 pm
Last Modified: Monday, 7th August 2023 08:15:39 pm</p>
<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.stretch_mod.time_windows_creation">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.stretch_mod.</span></span><span class="sig-name descname"><span class="pre">time_windows_creation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">starting_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t_width</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/stretch_mod.html#time_windows_creation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.stretch_mod.time_windows_creation" title="Permalink to this definition">#</a></dt>
<dd><p>Time windows creation.</p>
<p>A matrix containing one time window for each row is created. The starting
samples of each one of them are passed in the <code class="docutils literal notranslate"><span class="pre">starting_list</span></code> parameter.
The windows length <code class="docutils literal notranslate"><span class="pre">t_width</span></code> can be scalar or a list of values.
In the latter case both lists <code class="docutils literal notranslate"><span class="pre">starting_list</span></code> and <code class="docutils literal notranslate"><span class="pre">t_width</span></code> must
have the same length.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>starting_list</strong> (<em>list</em>) – List of starting points</p></li>
<li><p><strong>t_width</strong> (<em>int</em><em> or </em><em>list</em><em> of </em><em>int</em>) – Windows length</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>tw_mat</strong>: 2d ndarray containing the indexes of one time window
for each row</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.stretch_mod.compute_wfc">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.stretch_mod.</span></span><span class="sig-name descname"><span class="pre">compute_wfc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refcorr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sides</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_nans</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/stretch_mod.html#compute_wfc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.stretch_mod.compute_wfc" title="Permalink to this definition">#</a></dt>
<dd><p>Computes the waveform coherency (<strong>WFC</strong>) between the given reference
correlation and correlationmatrix.</p>
<p>See Steinmann, et. al. (2021) for details</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mat</strong> (<em>np.ndarray</em>) – 2D Correlation Matrix (function of corrstart and time lag)</p></li>
<li><p><strong>tw</strong> (<em>np.ndarray</em>) – Lag time window to use for the computation</p></li>
<li><p><strong>refcorr</strong> (<em>np.ndarray</em>) – 1D reference Correlation Trace extracted from <cite>mat</cite>.</p></li>
<li><p><strong>sides</strong> (<em>str</em>) – Which sides to use. Can be <cite>both</cite>, <cite>right</cite>, <cite>left</cite>,
or <cite>single</cite>.</p></li>
<li><p><strong>remove_nans</strong> (<em>bool</em><em>, </em><em>optional</em>) – Remove nans from CorrMatrix, defaults to True</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – unknown option in sides</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A 1D array with len=N(time windows)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.stretch_mod.wfc_multi_reftr">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.stretch_mod.</span></span><span class="sig-name descname"><span class="pre">wfc_multi_reftr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">corr_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_trs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sides</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_nans</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/stretch_mod.html#wfc_multi_reftr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.stretch_mod.wfc_multi_reftr" title="Permalink to this definition">#</a></dt>
<dd><p>Computes the waveform coherency (<strong>WFC</strong>) between the given reference
correlation(s) and correlation matrix.
If several references are given, it will loop over these</p>
<p>See Steinmann, et. al. (2021) for details</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>corr_data</strong> (<em>np.ndarray</em>) – 2D Correlation Matrix
(function of corrstart and time lag)</p></li>
<li><p><strong>refcorr</strong> (<em>np.ndarray</em>) – 1 or 2D reference Correlation Trace extracted from
<cite>corr_data</cite>.
If 2D, it will be interpreted as one refcorr trace per row.</p></li>
<li><p><strong>tw</strong> (<em>np.ndarray</em>) – Lag time window to use for the computation</p></li>
<li><p><strong>sides</strong> (<em>str</em>) – Which sides to use. Can be <cite>both</cite>, <cite>right</cite>, <cite>left</cite>,
or <cite>single</cite>.</p></li>
<li><p><strong>remove_nans</strong> – Remove nans from CorrMatrix, defaults to True</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionary with one correlation array for each reference trace.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.stretch_mod.velocity_change_estimate">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.stretch_mod.</span></span><span class="sig-name descname"><span class="pre">velocity_change_estimate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strrefmat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strvec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sides</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'both'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_sim_mat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_nans</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/stretch_mod.html#velocity_change_estimate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.stretch_mod.velocity_change_estimate" title="Permalink to this definition">#</a></dt>
<dd><p>Velocity change estimate through stretching and comparison.</p>
<p>Velocity changes are estimated comparing each correlation function stored
in the <code class="docutils literal notranslate"><span class="pre">mat</span></code> matrix (one for each row) with <code class="docutils literal notranslate"><span class="pre">strrefmat.shape[0]</span></code>
stretched versions  of a reference trace stored in <code class="docutils literal notranslate"><span class="pre">strrefmat</span></code>.
The stretch amount for each row of <code class="docutils literal notranslate"><span class="pre">strrefmat</span></code> must be passed in the
<code class="docutils literal notranslate"><span class="pre">strvec</span></code> vector.
The best match (stretch amount and corresponding correlation value) is
calculated on different time windows (each row of <code class="docutils literal notranslate"><span class="pre">tw</span></code> is a different
one) instead of on the whole trace.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mat</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 2d ndarray containing the correlation functions.
One for each row.</p></li>
<li><p><strong>tw</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code> of int) – 2d ndarray of time windows to be use in the velocity change
estimate.</p></li>
<li><p><strong>strrefmat</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 2D array containing stretched version of the reference
matrix</p></li>
<li><p><strong>strvec</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code> or list) – Stretch amount for each row of <code class="docutils literal notranslate"><span class="pre">strrefmat</span></code></p></li>
<li><p><strong>sides</strong> (<em>string</em>) – Side of the reference matrix to be used for the velocity
change estimate (‘both’ | ‘left’ | ‘right’ | ‘single’)</p></li>
<li><p><strong>remove_nans</strong> (<em>bool</em>) – If <cite>True</cite> applay <code class="xref py py-func docutils literal notranslate"><span class="pre">nan_to_num()</span></code> to the
given correlation matrix before any other operation.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><p><strong>dv</strong>: Dictionary with the following keys</p>
<dl class="simple">
<dt><em>corr</em>: 2d ndarray containing the correlation value for the best</dt><dd><p>match for each row of <code class="docutils literal notranslate"><span class="pre">mat</span></code> and for each time window.
Its dimension is: :func:(len(tw),mat.shape[1])</p>
</dd>
<dt><em>value</em>: 2d ndarray containing the stretch amount corresponding to</dt><dd><p>the best match for each row of <code class="docutils literal notranslate"><span class="pre">mat</span></code> and for each time window.
Its dimension is: :func:(len(tw),mat.shape[1])</p>
</dd>
<dt><em>sim_mat</em>: 3d ndarray containing the similarity matricies that</dt><dd><p>indicate the correlation coefficient with the reference for the
different time windows, different times and different amount of
stretching.
Its dimension is: <code class="xref py py-func docutils literal notranslate"><span class="pre">(len(tw),mat.shape[1],len(strvec))()</span></code></p>
</dd>
<dt><em>second_axis</em>: It contains the stretch vector used for the velocity</dt><dd><p>change estimate.</p>
</dd>
<dt><em>vale_type</em>: It is equal to ‘stretch’ and specify the content of</dt><dd><p>the returned ‘value’.</p>
</dd>
<dt><em>method</em>: It is equal to ‘single_ref’ and specify in which “way” the</dt><dd><p>values have been obtained.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.stretch_mod.time_stretch_estimate">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.stretch_mod.</span></span><span class="sig-name descname"><span class="pre">time_stretch_estimate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">corr_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_trc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stretch_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stretch_steps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sides</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'both'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_nans</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_tr_trim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_tr_stats</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/stretch_mod.html#time_stretch_estimate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.stretch_mod.time_stretch_estimate" title="Permalink to this definition">#</a></dt>
<dd><p>Time stretch estimate through stretch and comparison.</p>
<p>This function estimates stretching of the time axis of traces as it can
occur if the propagation velocity changes.</p>
<p>Time stretching is estimated comparing each correlation function stored
in the <code class="docutils literal notranslate"><span class="pre">corr_data</span></code> matrix (one for each row) with <code class="docutils literal notranslate"><span class="pre">stretch_steps</span></code>
stretched versions  of reference trace stored in <code class="docutils literal notranslate"><span class="pre">ref_trc</span></code>.
The maximum amount of stretching may be passed in <code class="docutils literal notranslate"><span class="pre">stretch_range</span></code>. The
time axis is multiplied by 1/(1 + stretch).
The best match (stretching amount and corresponding correlation value) is
calculated on different time windows. If <code class="docutils literal notranslate"><span class="pre">tw</span> <span class="pre">=</span> <span class="pre">None</span></code> the stretching is
estimated on the whole trace.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>corr_data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 2d ndarray containing the correlation functions.
One for each row.</p></li>
<li><p><strong>ref_trc</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 1D array containing the reference trace to be shifted and
compared to the individual traces in <code class="docutils literal notranslate"><span class="pre">mat</span></code></p></li>
<li><p><strong>tw</strong> (list of <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code> of int) – list of 1D ndarrays holding the indices of sampels in the time
windows to be use in the time shift estimate. The sampels are counted
from the zero lag time with the index of the first sample being 0. If
<code class="docutils literal notranslate"><span class="pre">tw</span> <span class="pre">=</span> <span class="pre">None</span></code> the full time range is used.</p></li>
<li><p><strong>stretch_range</strong> (<em>scalar</em>) – Maximum amount of relative stretching.
Stretching and compression is tested from <code class="docutils literal notranslate"><span class="pre">-stretch_range</span></code> to
<code class="docutils literal notranslate"><span class="pre">stretch_range</span></code>.</p></li>
<li><p><strong>stretch_steps</strong> (<em>scalar`</em>) – Number of shifted version to be tested. The
increment will be <code class="docutils literal notranslate"><span class="pre">(2</span> <span class="pre">*</span> <span class="pre">stretch_range)</span> <span class="pre">/</span> <span class="pre">stretch_steps</span></code></p></li>
<li><p><strong>sides</strong> (<em>str</em>) – Side of the reference matrix to be used for the stretching
estimate (‘both’ | ‘left’ | ‘right’ | ‘single’) <code class="docutils literal notranslate"><span class="pre">single</span></code> is used for
one-sided signals from active sources with zero lag time is on the
first sample. Other options assume that the zero lag time is in the
center of the traces.</p></li>
<li><p><strong>remove_nans</strong> (<em>bool</em>) – If <cite>True</cite> applay <code class="xref py py-func docutils literal notranslate"><span class="pre">nan_to_num()</span></code> to the
given correlation matrix before any other operation.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><p><strong>dv</strong>: Dictionary with the following keys</p>
<dl class="simple">
<dt><em>corr</em>: 2d ndarray containing the correlation value for the best</dt><dd><p>match for each row of <code class="docutils literal notranslate"><span class="pre">mat</span></code> and for each time window.
Its dimension is: :func:(len(tw),mat.shape[1])</p>
</dd>
<dt><em>value</em>: 2d ndarray containing the stretch amount corresponding to</dt><dd><p>the best match for each row of <code class="docutils literal notranslate"><span class="pre">mat</span></code> and for each time window.
Stretch is a relative value corresponding to the negative relative
velocity change -dv/v.
Its dimension is: :func:(len(tw),mat.shape[1])</p>
</dd>
<dt><em>sim_mat</em>: 3d ndarray containing the similarity matricies that</dt><dd><p>indicate the correlation coefficient with the reference for the
different time windows, different times and different amount of
stretching.
Its dimension is: <code class="xref py py-func docutils literal notranslate"><span class="pre">(len(tw),mat.shape[1],len(strvec))()</span></code></p>
</dd>
<dt><em>second_axis</em>: It contains the stretch vector used for the velocity</dt><dd><p>change estimate.</p>
</dd>
<dt><em>vale_type</em>: It is equal to ‘stretch’ and specify the content of</dt><dd><p>the returned ‘value’.</p>
</dd>
<dt><em>method</em>: It is equal to ‘single_ref’ and specify in which “way” the</dt><dd><p>values have been obtained.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.stretch_mod.multi_ref_vchange">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.stretch_mod.</span></span><span class="sig-name descname"><span class="pre">multi_ref_vchange</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">corr_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_trs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stretch_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stretch_steps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sides</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'both'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_nans</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_tr_trim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_tr_stats</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/stretch_mod.html#multi_ref_vchange"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.stretch_mod.multi_ref_vchange" title="Permalink to this definition">#</a></dt>
<dd><p>Velocity change estimate with single or multiple reference traces.</p>
<p>This function estimates the velocity change corresponding to each row of
the <code class="docutils literal notranslate"><span class="pre">corr_data</span></code> matrix respect to the reference trace/s passed in
<code class="docutils literal notranslate"><span class="pre">ref_trs</span></code>.</p>
<p>The velocity change is estimated comparing each correlation function stored
in the <code class="docutils literal notranslate"><span class="pre">corr_data</span></code> matrix (one for each row) with <code class="docutils literal notranslate"><span class="pre">stretch_steps</span></code>
stretched versions of reference/s trace stored in <code class="docutils literal notranslate"><span class="pre">ref_trs</span></code>.
The maximum amount of stretching may be passed in <code class="docutils literal notranslate"><span class="pre">stretch_range</span></code>.
The best match (stretching amount and corresponding correlation value) is
calculated on different time windows. If <code class="docutils literal notranslate"><span class="pre">tw</span> <span class="pre">=</span> <span class="pre">None</span></code> the stretching is
estimated on the whole trace.</p>
<p>The output is a dictionary with keys of the form <code class="docutils literal notranslate"><span class="pre">&quot;reftr_%d&quot;</span> <span class="pre">%</span> <span class="pre">i</span></code>: One
for each reference trace. The corresponding <code class="docutils literal notranslate"><span class="pre">value</span></code> is aslo a dictionary
that has a structure conforming with
<code class="xref py py-class docutils literal notranslate"><span class="pre">time_stretch_estimate</span></code> output.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>corr_data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 2d ndarray containing the correlation functions.
One for each row.</p></li>
<li><p><strong>ref_trc</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 1D array containing the reference trace to be shifted and
compared to the individual traces in <code class="docutils literal notranslate"><span class="pre">mat</span></code></p></li>
<li><p><strong>tw</strong> (list of <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code> of int) – list of 1D ndarrays holding the indices of sampels in the time
windows to be use in the time shift estimate. The sampels are counted
from the zero lag time with the index of the first sample being 0. If
<code class="docutils literal notranslate"><span class="pre">tw</span> <span class="pre">=</span> <span class="pre">None</span></code> the full time range is used.</p></li>
<li><p><strong>stretch_range</strong> (<em>scalar</em>) – Maximum amount of relative stretching.
Stretching and compression is tested from <code class="docutils literal notranslate"><span class="pre">-stretch_range</span></code> to
<code class="docutils literal notranslate"><span class="pre">stretch_range</span></code>.</p></li>
<li><p><strong>stretch_steps</strong> (<em>scalar`</em>) – Number of shifted version to be tested. The
increment will be <code class="docutils literal notranslate"><span class="pre">(2</span> <span class="pre">*</span> <span class="pre">stretch_range)</span> <span class="pre">/</span> <span class="pre">stretch_steps</span></code></p></li>
<li><p><strong>single_sided</strong> (<em>bool</em>) – if True zero lag time is on the first sample. If
False the zero lag time is in the center of the traces.</p></li>
<li><p><strong>sides</strong> (<em>str</em>) – Side of the reference matrix to be used for the stretching
estimate (‘both’ | ‘left’ | ‘right’ | ‘single’) <code class="docutils literal notranslate"><span class="pre">single</span></code> is used for
one-sided signals from active sources with zero lag time is on the
first sample. Other options assume that the zero lag time is in the
center of the traces.</p></li>
<li><p><strong>remove_nans</strong> (<em>bool</em>) – If <cite>True</cite> applay <code class="xref py py-func docutils literal notranslate"><span class="pre">nan_to_num()</span></code> to the
given correlation matrix before any other operation.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dictionary</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>multi_ref_panel</strong>: It is a dictionary that contains as much
dictionaries as reference traces have been used. The key format is
<code class="docutils literal notranslate"><span class="pre">&quot;reftr_%d&quot;</span> <span class="pre">%</span> <span class="pre">i</span></code> and the corresponding value is also a dictionary
with the structure described in
<code class="xref py py-class docutils literal notranslate"><span class="pre">time_stretch_estimate</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.stretch_mod.est_shift_from_dt_corr">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.stretch_mod.</span></span><span class="sig-name descname"><span class="pre">est_shift_from_dt_corr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dt1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">corr1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">corr2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/stretch_mod.html#est_shift_from_dt_corr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.stretch_mod.est_shift_from_dt_corr" title="Permalink to this definition">#</a></dt>
<dd><p>Estimation of a baseline shift between velocity-change measurements
preformed with different references.</p>
<p>The use of different reference traces obtaind from different reference
periods will result in a shift of the velocity-change curves that ideally
characterizes the velocity variation between the two reference periods.
Instead of directly measuring this velocity change from the two reference
traces it is calulated here as the weighted average of the point
differences between the two velocity-change curves weighted by their
inverse variance according to Weaver et al. GJI 2011 (On the precision of
noise correlation interferometry)</p>
<p>Input vertors must all be of the same lenth.</p>
<dl class="field-list simple">
<dt class="field-odd">Pram dt1<span class="colon">:</span></dt>
<dd class="field-odd"><p>Velocity variation measured for reference A</p>
</dd>
<dt class="field-even">Pram dt2<span class="colon">:</span></dt>
<dd class="field-even"><p>Velocity variation measured for reference B</p>
</dd>
<dt class="field-odd">Pram corr1<span class="colon">:</span></dt>
<dd class="field-odd"><p>Correlation between velocity corrected trace and reference A</p>
</dd>
<dt class="field-even">Pram corr2<span class="colon">:</span></dt>
<dd class="field-even"><p>Correlation between velocity corrected trace and reference B</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.stretch_mod.estimate_reftr_shifts_from_dt_corr">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.stretch_mod.</span></span><span class="sig-name descname"><span class="pre">estimate_reftr_shifts_from_dt_corr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">multi_ref_panel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_sim_mat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/stretch_mod.html#estimate_reftr_shifts_from_dt_corr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.stretch_mod.estimate_reftr_shifts_from_dt_corr" title="Permalink to this definition">#</a></dt>
<dd><p>Combine velocity-change measurements of the same data performed with
different references to a single curve.</p>
<p>For a set of velocity-change measurements performed with different
references this function estimates the relative offsets between all pairs
of the measurements as a weighted average of their difference with the
function <code class="xref py py-class docutils literal notranslate"><span class="pre">est_shift_from_dt_corr</span></code>.
A least squares solution in computed that combines the pairwise
differences to a consistent set of reference shifts. These shifts should
be similar to the velocity variations measured between the reference
traces. The consistent set of reference shifts is used to correct i.e.
shift the similarity matricies to a common reference. Finally the
corrected similarity matrices are averaged resulting in a single matrix
that is interpreted as before. The position of the crest is the combined
velocity change and the height of the crest is the correlation value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>multi_ref_panel</strong> (<em>dictionay</em>) – It is a dictionary with one (key,value) pair
for each reference trace. Its structure is described
in <a class="reference internal" href="#seismic.monitor.stretch_mod.multi_ref_vchange" title="seismic.monitor.stretch_mod.multi_ref_vchange"><code class="xref py py-func docutils literal notranslate"><span class="pre">multi_ref_vchange()</span></code></a></p></li>
<li><p><strong>return_sim_mat</strong> (<em>bool</em>) – If <cite>True</cite> the returning dictionary contains also the
similarity matrix <cite>sim_mat</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dv</strong>: Dictionary with the following keys
- <em>corr</em>: 2d ndarray containing the correlation value for the best
match for each row of <cite>mat</cite> and for each time window.
Its shape is: (len(tw),mat.shape[1])
- <em>value</em>: 2d ndarray containing the stretch amount corresponding to
the best match for each row of <cite>mat</cite> and for each time window.
Stretch is a relative value corresponding to the negative relative
velocity change -dv/v.
Its shape is: (len(tw),mat.shape[1])
- <em>sim_mat</em>: 3d array containing the similarity matricies that
indicate the correlation coefficient with the reference for the
different time windows, different times and different amount of
stretching.
Its shape is: (len(tw),mat.shape[1],len(strvec))
- <em>second_axis</em>: It contains the stretch vector used for the velocity
change estimate.
- <em>value_type</em>: It is equal to stretch and specify the content of
the returned value.
- <em>method</em>: It is equal to single_ref and specify in which way the
values have been obtained.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.stretch_mod.multi_ref_vchange_and_align">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.stretch_mod.</span></span><span class="sig-name descname"><span class="pre">multi_ref_vchange_and_align</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">corr_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_trs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stretch_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stretch_steps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sides</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'both'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_sim_mat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_nans</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_tr_trim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_tr_stats</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/stretch_mod.html#multi_ref_vchange_and_align"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.stretch_mod.multi_ref_vchange_and_align" title="Permalink to this definition">#</a></dt>
<dd><p>Multi-reference dv estimate and alignment</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>corr_data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 2d ndarray containing the correlation functions.
One for each row.</p></li>
<li><p><strong>ref_trc</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 1D array containing the reference trace to be shifted and
compared to the individual traces in <code class="docutils literal notranslate"><span class="pre">mat</span></code></p></li>
<li><p><strong>tw</strong> (list of <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code> of int) – list of 1D ndarrays holding the indices of sampels in the time
windows to be use in the time shift estimate. The sampels are counted
from the zero lag time with the index of the first sample being 0. If
<code class="docutils literal notranslate"><span class="pre">tw</span> <span class="pre">=</span> <span class="pre">None</span></code> the full time range is used.</p></li>
<li><p><strong>stretch_range</strong> (<em>scalar</em>) – Maximum amount of relative stretching.
Stretching and compression is tested from <code class="docutils literal notranslate"><span class="pre">-stretch_range</span></code> to
<code class="docutils literal notranslate"><span class="pre">stretch_range</span></code>.</p></li>
<li><p><strong>stretch_steps</strong> (<em>scalar`</em>) – Number of shifted version to be tested. The
increment will be <code class="docutils literal notranslate"><span class="pre">(2</span> <span class="pre">*</span> <span class="pre">stretch_range)</span> <span class="pre">/</span> <span class="pre">stretch_steps</span></code></p></li>
<li><p><strong>single_sided</strong> (<em>bool</em>) – if True zero lag time is on the first sample. If
False the zero lag time is in the center of the traces.</p></li>
<li><p><strong>sides</strong> (<em>str</em>) – Side of the reference matrix to be used for the stretching
estimate (‘both’ | ‘left’ | ‘right’ | ‘single’) <code class="docutils literal notranslate"><span class="pre">single</span></code> is used for
one-sided signals from active sources with zero lag time is on the
first sample. Other options assume that the zero lag time is in the
center of the traces.</p></li>
<li><p><strong>return_sim_mat</strong> (<em>bool</em>) – If <cite>True</cite> the returning dictionary contains also the
similarity matrix <cite>sim_mat</cite>.</p></li>
<li><p><strong>remove_nans</strong> (<em>bool</em>) – If <cite>True</cite> applay <code class="xref py py-func docutils literal notranslate"><span class="pre">nan_to_num()</span></code> to the
given correlation matrix before any other operation.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><p><strong>dv</strong>: Dictionary with the following keys</p>
<dl class="simple">
<dt><em>corr</em>: 2d ndarray containing the correlation value for the best</dt><dd><p>match for each row of <code class="docutils literal notranslate"><span class="pre">mat</span></code> and for each time window.
Its dimension is: :func:(len(tw),mat.shape[1])</p>
</dd>
<dt><em>value</em>: 2d ndarray containing the stretch amount corresponding to</dt><dd><p>the best match for each row of <code class="docutils literal notranslate"><span class="pre">mat</span></code> and for each time window.
Stretch is a relative value corresponding to the negative relative
velocity change -dv/v.
Its dimension is: :func:(len(tw),mat.shape[1])</p>
</dd>
<dt><em>sim_mat</em>: 3d ndarray containing the similarity matricies that</dt><dd><p>indicate the correlation coefficient with the reference for the
different time windows, different times and different amount of
stretching.
Its dimension is: <code class="xref py py-func docutils literal notranslate"><span class="pre">(len(tw),mat.shape[1],len(strvec))()</span></code></p>
</dd>
<dt><em>second_axis</em>: It contains the stretch vector used for the velocity</dt><dd><p>change estimate.</p>
</dd>
<dt><em>vale_type</em>: It is equal to ‘stretch’ and specify the content of</dt><dd><p>the returned ‘value’.</p>
</dd>
<dt><em>method</em>: It is equal to ‘single_ref’ and specify in which “way” the</dt><dd><p>values have been obtained.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.stretch_mod.time_shift_estimate">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.stretch_mod.</span></span><span class="sig-name descname"><span class="pre">time_shift_estimate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">corr_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_trc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift_steps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">single_sided</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_sim_mat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_nans</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/stretch_mod.html#time_shift_estimate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.stretch_mod.time_shift_estimate" title="Permalink to this definition">#</a></dt>
<dd><p>Time shift estimate through shifting and comparison.</p>
<p>This function is intended to estimate shift of traces as they can occur
in noise cross-correlation in case of drifting clocks.</p>
<p>Time shifts are estimated comparing each correlation function stored
in the <code class="docutils literal notranslate"><span class="pre">corr_data</span></code> matrix (one for each row) with <code class="docutils literal notranslate"><span class="pre">shift_steps</span></code>
shifted versions  of reference trace stored in <code class="docutils literal notranslate"><span class="pre">ref_trc</span></code>.
The maximum amount of shifting may be passed in <code class="docutils literal notranslate"><span class="pre">shift_range</span></code>.
The best match (shifting amount and corresponding correlation value) is
calculated on different time windows. If <code class="docutils literal notranslate"><span class="pre">tw</span> <span class="pre">=</span> <span class="pre">None</span></code> the shifting is
estimated on the whole trace.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>corr_data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 2d ndarray containing the correlation functions.
One for each row.</p></li>
<li><p><strong>ref_trc</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 1D array containing the reference trace to be shifted and
compared to the individual traces in <code class="docutils literal notranslate"><span class="pre">mat</span></code></p></li>
<li><p><strong>tw</strong> (list of <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code> of int) – list of 1D ndarrays holding the indices of sampels in the time
windows to be use in the time shift estimate. The sampels are counted
from the zero lag time with the index of the first sample being 0. If
<code class="docutils literal notranslate"><span class="pre">tw</span> <span class="pre">=</span> <span class="pre">None</span></code> the full time range is used.</p></li>
<li><p><strong>shift_range</strong> (<em>scalar</em>) – Maximum amount of time shift in samples (in one
direction).
Shifting is tested in both directions from <code class="docutils literal notranslate"><span class="pre">-shift_range</span></code> to
<code class="docutils literal notranslate"><span class="pre">shift_range</span></code></p></li>
<li><p><strong>shift_steps</strong> (<em>scalar`</em>) – Number of shifted version to be tested. The increment
will be <code class="docutils literal notranslate"><span class="pre">(2</span> <span class="pre">*</span> <span class="pre">shift_range)</span> <span class="pre">/</span> <span class="pre">shift_steps</span></code></p></li>
<li><p><strong>single_sided</strong> – If <code class="docutils literal notranslate"><span class="pre">True</span></code> the zero lag time of the traces is in the
first sample. If <code class="docutils literal notranslate"><span class="pre">False</span></code> zero lag is assumed to be in the center of
the traces and the shifting is evaluated on the causal and acausal
parts of the traces separately and averaged. This is done to avoid bias
from velocity changes (stretching) in the case of strongly asymmetric
traces.</p></li>
<li><p><strong>remove_nans</strong> (<em>bool</em>) – If <cite>True</cite> applay <code class="xref py py-func docutils literal notranslate"><span class="pre">nan_to_num()</span></code> to the
given correlation matrix before any other operation.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><p><strong>dt</strong>: Dictionary with the following keys</p>
<dl class="simple">
<dt><em>corr</em>: <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code> 2d ndarray containing the correlation</dt><dd><p>value for the best match for each row of <code class="docutils literal notranslate"><span class="pre">mat</span></code> and for each
time window.
Its dimension is: :func:(len(tw),mat.shape[1])</p>
</dd>
<dt><em>value</em>: <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code> 2d ndarray containing the amount of</dt><dd><p>shifting corresponding to the best match for each row of <code class="docutils literal notranslate"><span class="pre">mat</span></code>
and for each time window. Shift is measured in units of the
sampling interval.
Its dimension is: <code class="xref py py-func docutils literal notranslate"><span class="pre">(len(tw),mat.shape[1])()</span></code></p>
</dd>
<dt><em>sim_mat</em>: 2d ndarray containing the similarity matrix that</dt><dd><p>indicate the time shift respect to the reference for the
selected time windows, for different times and different amount of
shift.
Its dimension is: <code class="xref py py-func docutils literal notranslate"><span class="pre">(mat.shape[1],shift_steps)()</span></code></p>
</dd>
<dt><em>second_axis</em>: It contains the shift vector used for the velocity</dt><dd><p>change estimate.</p>
</dd>
<dt><em>vale_type</em>: It is equal to ‘shift’ and specify the content of</dt><dd><p>the returned ‘value’.</p>
</dd>
<dt><em>method</em>: It is equal to ‘time_shift’ and specify in which “way” the</dt><dd><p>values have been obtained.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.stretch_mod.time_shift_apply">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.stretch_mod.</span></span><span class="sig-name descname"><span class="pre">time_shift_apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">corr_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">single_sided</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/stretch_mod.html#time_shift_apply"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.stretch_mod.time_shift_apply" title="Permalink to this definition">#</a></dt>
<dd><p>Correct for clock drifts that are given in shifts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>corr_data</strong> (<em>np.ndarray</em>) – Matrix with one correlation trace per row</p></li>
<li><p><strong>shift</strong> (<em>np.ndarray</em>) – 1 or 2D array holding shifts in number of samples compared to
a reference that is assumed to be accurate. Hence, the input CorrStream
will be shifted by -shift.
If 1D: each correlation trace will be shifted by a scalar value.
If 2D: Shape has to be equal to corr_data. The clock drift varies
in the CorrTrace (i..e, shift is not constant anymore).</p></li>
<li><p><strong>single_sided</strong> (<em>bool</em><em>, </em><em>optional</em>) – corr_data contains only causal side, defaults to False</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The shifted correlation matrix</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.stretch_mod.time_stretch_apply">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.stretch_mod.</span></span><span class="sig-name descname"><span class="pre">time_stretch_apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">corr_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stretch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">single_sided</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/stretch_mod.html#time_stretch_apply"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.stretch_mod.time_stretch_apply" title="Permalink to this definition">#</a></dt>
<dd><p>Apply time axis stretch to traces.</p>
<p>Stretch the time axis of traces e.g. to compensate a velocity shift in the
propagation medium.
Such shifts can occur in corrlation traces in case of a drifting clock.
This function applies the stretches. To correct for stretching
estimated with <a class="reference internal" href="#seismic.monitor.stretch_mod.time_stretch_estimate" title="seismic.monitor.stretch_mod.time_stretch_estimate"><code class="xref py py-func docutils literal notranslate"><span class="pre">time_stretch_estimate()</span></code></a>
you need to apply negative stretching.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>corr_data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 2d ndarray containing the correlation functions that are
to be shifted.
One for each row.</p></li>
<li><p><strong>stretch</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – ndarray with stretch.shape[0] = corr_data.shape[0]
containing the stretches relative units.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>stretched_mat</strong>: stretched version of the input matrix</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.stretch_mod.create_shifted_ref_mat">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.stretch_mod.</span></span><span class="sig-name descname"><span class="pre">create_shifted_ref_mat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref_trc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">shifts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">array</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/stretch_mod.html#create_shifted_ref_mat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.stretch_mod.create_shifted_ref_mat" title="Permalink to this definition">#</a></dt>
<dd><p>Create a matrix of shifted versions of a reference trace.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.stretch_mod.compare_with_modified_reference">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.stretch_mod.</span></span><span class="sig-name descname"><span class="pre">compare_with_modified_reference</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_mat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/stretch_mod.html#compare_with_modified_reference"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.stretch_mod.compare_with_modified_reference" title="Permalink to this definition">#</a></dt>
<dd><p>Compare a correlation matrix with a modified references.</p>
</dd></dl>

</section>
<section id="seismic-monitor-trim">
<h3>seismic.monitor.trim<a class="headerlink" href="#seismic-monitor-trim" title="Permalink to this heading">#</a></h3>
<p>Trim correlation matrices.</p>
<span class="target" id="module-seismic.monitor.trim"></span><dl class="field-list">
<dt class="field-odd">copyright<span class="colon">:</span></dt>
<dd class="field-odd"><p>The SeisMIC development team (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>).</p>
</dd>
<dt class="field-even">license<span class="colon">:</span></dt>
<dd class="field-even"><blockquote>
<div><p>EUROPEAN UNION PUBLIC LICENCE v. 1.2</p>
</div></blockquote>
<p>(<a class="reference external" href="https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12">https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12</a>)</p>
</dd>
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Tuesday, 15th November 2022 05:15:30 pm
Last Modified: Monday, 16th January 2023 11:14:37 am</p>
<dl class="py function">
<dt class="sig sig-object py" id="seismic.monitor.trim.corr_mat_trim">
<span class="sig-prename descclassname"><span class="pre">seismic.monitor.trim.</span></span><span class="sig-name descname"><span class="pre">corr_mat_trim</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">starttime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endtime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#seismic.correlate.stats.CorrStats" title="seismic.correlate.stats.CorrStats"><span class="pre">CorrStats</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/monitor/trim.html#corr_mat_trim"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.monitor.trim.corr_mat_trim" title="Permalink to this definition">#</a></dt>
<dd><p>Trim the correlation matrix to a given period.</p>
<p>Trim the correlation matrix <cite>corr_mat</cite> to the period from <cite>starttime</cite> to
<cite>endtime</cite> given in seconds from the zero position, so both can be
positive and negative. If <cite>starttime</cite> and <cite>endtime</cite> are datetime.datetime
objects they are taken as absolute start and endtime.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>corr_mat</strong> – correlation matrix to be trimmed</p></li>
<li><p><strong>starttime</strong> (<em>float</em>) – start time in seconds with respect to the zero position.
Hence, this parameter describes a lag!</p></li>
<li><p><strong>order</strong> – end time in seconds with respect to the zero position</p></li>
</ul>
</dd>
<dt class="field-even">Rtype tuple<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple[np.ndarray, CorrStats]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>trimmed correlation matrix and new stats object</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="seismic-plot">
<h2>seismic.plot<a class="headerlink" href="#seismic-plot" title="Permalink to this heading">#</a></h2>
<section id="seismic-plot-plot-correlation">
<h3>seismic.plot.plot_correlation<a class="headerlink" href="#seismic-plot-plot-correlation" title="Permalink to this heading">#</a></h3>
<p>Plot Green’s function estimations.</p>
<span class="target" id="module-seismic.plot.plot_correlation"></span><dl class="field-list simple">
<dt class="field-odd">copyright<span class="colon">:</span></dt>
<dd class="field-odd"><p>The SeisMIC development team (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>).</p>
</dd>
<dt class="field-even">license<span class="colon">:</span></dt>
<dd class="field-even"><p>GNU Lesser General Public License, Version 3
(<a class="reference external" href="https://www.gnu.org/copyleft/lesser.html">https://www.gnu.org/copyleft/lesser.html</a>)</p>
</dd>
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Monday, 19th July 2021 11:37:54 am
Last Modified: Monday, 21st August 2023 12:21:53 pm</p>
<dl class="py function">
<dt class="sig sig-object py" id="seismic.plot.plot_correlation.plot_ctr">
<span class="sig-prename descclassname"><span class="pre">seismic.plot.plot_correlation.</span></span><span class="sig-name descname"><span class="pre">plot_ctr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">corr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Trace</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tlim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Axes</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputdir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clean</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Axes</span></span></span><a class="reference internal" href="../../_modules/seismic/plot/plot_correlation.html#plot_ctr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.plot.plot_correlation.plot_ctr" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.plot.plot_correlation.plot_cst">
<span class="sig-prename descclassname"><span class="pre">seismic.plot.plot_correlation.</span></span><span class="sig-name descname"><span class="pre">plot_cst</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cst</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_by</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'corr_start'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timelimits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylimits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scalingfactor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Axes</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linewidth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputfile</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'heatmap'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'seismic'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/plot/plot_correlation.html#plot_cst"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.plot.plot_correlation.plot_cst" title="Permalink to this definition">#</a></dt>
<dd><p>Creates a section or heat plot of all correlations in this stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cst</strong> (<a class="reference internal" href="#seismic.correlate.stream.CorrStream" title="seismic.correlate.stream.CorrStream"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrStream</span></code></a>) – Input CorrelationStream</p></li>
<li><p><strong>sort_by</strong> (<em>str</em><em>, </em><em>optional</em>) – Which parameter to plot against. Can be either
<code class="docutils literal notranslate"><span class="pre">corr_start</span></code> or <code class="docutils literal notranslate"><span class="pre">distance</span></code>, defaults to ‘corr_start’.</p></li>
<li><p><strong>timelimits</strong> (<em>Tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em><em>, </em><em>optional</em>) – xlimits (lag time) in seconds, defaults to None</p></li>
<li><p><strong>ylimits</strong> (<em>Tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em><em>, </em><em>optional</em>) – limits for Y-axis (either a <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.datetime</span></code>
or float in km (if plotted against distance)), defaults to None.</p></li>
<li><p><strong>scalingfactor</strong> (<em>float</em><em>, </em><em>optional</em>) – Which factor to scale the Correlations with. Play
around with this if you want to make amplitudes bigger or smaller,
defaults to None (automatically chosen).</p></li>
<li><p><strong>ax</strong> (<em>plt.Axes</em><em>, </em><em>optional</em>) – Plot in existing axes? Defaults to None</p></li>
<li><p><strong>linewidth</strong> (<em>float</em><em>, </em><em>optional</em>) – Width of the lines to plot, defaults to 0.25</p></li>
<li><p><strong>outputfile</strong> (<em>str</em><em>, </em><em>optional</em>) – Save the plot? defaults to None</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of the plot, defaults to None</p></li>
<li><p><strong>type</strong> (<em>str</em><em>, </em><em>optional</em>) – can be set to ‘heat’ for a heatmap or ‘section’ for
a wiggle type plot. Default to <cite>heat</cite></p></li>
<li><p><strong>cmap</strong> (<em>str</em><em>, </em><em>optional</em>) – Decides about colormap if type == ‘heatmap’.
Defaults to ‘inferno’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>returns the axes object.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><cite>matplotlib.pyplot.Axes</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.plot.plot_correlation.plot_corr_bulk">
<span class="sig-prename descclassname"><span class="pre">seismic.plot.plot_correlation.</span></span><span class="sig-name descname"><span class="pre">plot_corr_bulk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">corr_bulk</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timelimits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">datetime</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">datetime</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylimits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">datetime</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">datetime</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_colorbar</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputfile</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Axes</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Axes</span></span></span><a class="reference internal" href="../../_modules/seismic/plot/plot_correlation.html#plot_corr_bulk"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.plot.plot_correlation.plot_corr_bulk" title="Permalink to this definition">#</a></dt>
<dd><p>Plots a <a class="reference internal" href="#seismic.correlate.stream.CorrBulk" title="seismic.correlate.stream.CorrBulk"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrBulk</span></code></a> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>corr_bulk</strong> (<a class="reference internal" href="#seismic.correlate.stream.CorrBulk" title="seismic.correlate.stream.CorrBulk"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrBulk</span></code></a>) – The CorrBulk to plot.</p></li>
<li><p><strong>timelimits</strong> (<em>Optional</em><em>[</em><em>Tuple</em><em>[</em><em>datetime.datetime</em><em>, </em><em>datetime.datetime</em><em>]</em><em>]</em><em>,
</em><em>optional</em>) – Limits time axis, defaults to None</p></li>
<li><p><strong>ylimits</strong> (<em>Optional</em><em>[</em><em>Tuple</em><em>[</em><em>datetime.datetime</em><em>, </em><em>datetime.datetime</em><em>]</em><em>]</em><em>,
</em><em>optional</em>) – Limits of y-axis, defaults to None</p></li>
<li><p><strong>clim</strong> (<em>Optional</em><em>[</em><em>Tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em><em>]</em><em>, </em><em>optional</em>) – Limits of Colobar, defaults to None</p></li>
<li><p><strong>plot_colorbar</strong> (<em>bool</em><em>, </em><em>optional</em>) – add colorbar to plot, defaults to False</p></li>
<li><p><strong>outputfile</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – save file to, defaults to None</p></li>
<li><p><strong>title</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – Title, defaults to None</p></li>
<li><p><strong>ax</strong> (<em>Optional</em><em>[</em><em>plt.Axes</em><em>]</em><em>, </em><em>optional</em>) – Axis to plot into, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The current axis</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>plt.Axes</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.plot.plot_correlation.sect_plot_corr_start">
<span class="sig-prename descclassname"><span class="pre">seismic.plot.plot_correlation.</span></span><span class="sig-name descname"><span class="pre">sect_plot_corr_start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cst</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Axes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scalingfactor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linewidth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/plot/plot_correlation.html#sect_plot_corr_start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.plot.plot_correlation.sect_plot_corr_start" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.plot.plot_correlation.heat_plot_corr_start">
<span class="sig-prename descclassname"><span class="pre">seismic.plot.plot_correlation.</span></span><span class="sig-name descname"><span class="pre">heat_plot_corr_start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cst</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Axes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/plot/plot_correlation.html#heat_plot_corr_start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.plot.plot_correlation.heat_plot_corr_start" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.plot.plot_correlation.sect_plot_dist">
<span class="sig-prename descclassname"><span class="pre">seismic.plot.plot_correlation.</span></span><span class="sig-name descname"><span class="pre">sect_plot_dist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cst</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Axes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scalingfactor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linewidth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_reference_v</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_v</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/plot/plot_correlation.html#sect_plot_dist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.plot.plot_correlation.sect_plot_dist" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.plot.plot_correlation.heat_plot_corr_dist">
<span class="sig-prename descclassname"><span class="pre">seismic.plot.plot_correlation.</span></span><span class="sig-name descname"><span class="pre">heat_plot_corr_dist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cst</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Axes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_reference_v</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_v</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/plot/plot_correlation.html#heat_plot_corr_dist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.plot.plot_correlation.heat_plot_corr_dist" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</section>
<section id="seismic-plot-plot-dv">
<h3>seismic.plot.plot_dv<a class="headerlink" href="#seismic-plot-plot-dv" title="Permalink to this heading">#</a></h3>
<p>Plot velocity change time series.</p>
<span class="target" id="module-seismic.plot.plot_dv"></span><dl class="field-list simple">
<dt class="field-odd">copyright<span class="colon">:</span></dt>
<dd class="field-odd"><p>The SeisMIC development team (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>).</p>
</dd>
<dt class="field-even">license<span class="colon">:</span></dt>
<dd class="field-even"><p>GNU Lesser General Public License, Version 3
(<a class="reference external" href="https://www.gnu.org/copyleft/lesser.html">https://www.gnu.org/copyleft/lesser.html</a>)</p>
</dd>
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Friday, 16th July 2021 02:30:02 pm
Last Modified: Monday, 21st August 2023 12:22:18 pm</p>
<dl class="py function">
<dt class="sig sig-object py" id="seismic.plot.plot_dv.plot_fancy_dv">
<span class="sig-prename descclassname"><span class="pre">seismic.plot.plot_dv.</span></span><span class="sig-name descname"><span class="pre">plot_fancy_dv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dv</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">datetime</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">datetime</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_ax</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dateformat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'%d</span> <span class="pre">%b</span> <span class="pre">%y'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/plot/plot_dv.html#plot_fancy_dv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.plot.plot_dv.plot_fancy_dv" title="Permalink to this definition">#</a></dt>
<dd><p>Prettier than the technical plot, but less informative</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.plot.plot_dv.plot_technical_dv">
<span class="sig-prename descclassname"><span class="pre">seismic.plot.plot_dv.</span></span><span class="sig-name descname"><span class="pre">plot_technical_dv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dv</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figure_file_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mark_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalize_simmat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sim_mat_Clim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(9,</span> <span class="pre">11)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dpi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">72</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">datetime</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">datetime</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_scatter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_ax</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">figure</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">axis</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/plot/plot_dv.html#plot_technical_dv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.plot.plot_dv.plot_technical_dv" title="Permalink to this definition">#</a></dt>
<dd><p>Plot a <a class="reference internal" href="#seismic.monitor.dv.DV" title="seismic.monitor.dv.DV"><code class="xref py py-class docutils literal notranslate"><span class="pre">seismic.monitor.dv.DV</span></code></a> object
The produced figure is saved in <cite>save_dir</cite> that, if necessary, it is
created.
It is also possible to pass a “special” time value <cite>mark_time</cite> that will be
represented in the <cite>dv/v</cite> and <cite>corr</cite> plot as a vertical line; It can be
a string (i.e. YYYY-MM-DD) or directly a <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code>
object.
if the <cite>dv</cite> dictionary also contains a ‘comb_mseedid’ keyword, its <cite>value</cite>
(i.e. MUST be a string) will be reported in the title.
In case of the chosen filename exist in the <cite>save_dir</cite> directory, a prefix
_&lt;n&gt; with n:0..+Inf, is added.
The aspect of the plot may change depending on the matplotlib version. The
recommended one is matplotlib 1.1.1</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dv</strong> (<em>dict</em>) – velocity change estimate dictionary as output by
<code class="xref py py-class docutils literal notranslate"><span class="pre">multi_ref_vchange_and_align</span></code> and
successively “extended” to contain also the timing in the form
{‘time’: time_vect} where <cite>time_vect</cite> is a <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code> of
<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code> objects.</p></li>
<li><p><strong>save_dir</strong> (<em>string</em>) – Directory where to save the produced figure. It is created
if it doesn’t exist.</p></li>
<li><p><strong>figure_file_name</strong> (<em>string</em>) – filename to use for saving the figure. If None
the figure is displayed in interactive mode.</p></li>
<li><p><strong>mark_time</strong> (string or <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code> object) – It is a “special” time location that will be represented
in the <cite>dv/v</cite> and <cite>corr</cite> plot as a vertical line.</p></li>
<li><p><strong>normalize_simmat</strong> (<em>Bool</em>) – if True the simmat will be normalized to a maximum
of 1. Defaults to False</p></li>
<li><p><strong>sim_mat_Clim</strong> (<em>2 element array_like</em>) – if non-empty it set the color scale limits of the
similarity matrix image</p></li>
<li><p><strong>ylim</strong> (<em>Tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em><em>, </em><em>optional</em>) – Limits for the stretch axis. Defaults to None</p></li>
<li><p><strong>return_ax</strong> (<em>bool</em><em>, </em><em>optional</em>) – Return plt.figure and list of axes. Defaults to False.
This overwrites any choice to save the figure.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>If <cite>return_ax</cite> is set to True it returns fig and axes.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.plot.plot_dv.plot_dv">
<span class="sig-prename descclassname"><span class="pre">seismic.plot.plot_dv.</span></span><span class="sig-name descname"><span class="pre">plot_dv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">style</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/plot/plot_dv.html#plot_dv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.plot.plot_dv.plot_dv" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</section>
<section id="seismic-plot-plot-multidv">
<h3>seismic.plot.plot_multidv<a class="headerlink" href="#seismic-plot-plot-multidv" title="Permalink to this heading">#</a></h3>
<p>Plot velocity change time series.</p>
<span class="target" id="module-seismic.plot.plot_multidv"></span><dl class="field-list simple">
<dt class="field-odd">copyright<span class="colon">:</span></dt>
<dd class="field-odd"><p>The SeisMIC development team (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>).</p>
</dd>
<dt class="field-even">license<span class="colon">:</span></dt>
<dd class="field-even"><p>GNU Lesser General Public License, Version 3
(<a class="reference external" href="https://www.gnu.org/copyleft/lesser.html">https://www.gnu.org/copyleft/lesser.html</a>)</p>
</dd>
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Tuesday, 5th October 2021 11:50:22 am
Last Modified: Thursday, 21st October 2021 02:44:05 pm</p>
<dl class="py function">
<dt class="sig sig-object py" id="seismic.plot.plot_multidv.plot_multiple_dv">
<span class="sig-prename descclassname"><span class="pre">seismic.plot.plot_multidv.</span></span><span class="sig-name descname"><span class="pre">plot_multiple_dv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">only_mean</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outfile</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dpi</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">300</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legend</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_median</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">datetime</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">datetime</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statfilter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plt_abs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/plot/plot_multidv.html#plot_multiple_dv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.plot.plot_multidv.plot_multiple_dv" title="Permalink to this definition">#</a></dt>
<dd><p>Plots several Velocity variations in one single plot</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>indir</strong> (<em>str</em>) – directory in which the .npz DV files are located.</p></li>
<li><p><strong>only_mean</strong> (<em>bool</em><em>, </em><em>optional</em>) – plot only the average of one station instead of all
of its components. <strong>The averages have to be computed before</strong>.
Defaults to false.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title for the figure, defaults to None</p></li>
<li><p><strong>outfile</strong> (<em>str</em><em>, </em><em>optional</em>) – File to save figure to, defaults to None</p></li>
<li><p><strong>fmt</strong> (<em>str</em><em>, </em><em>optional</em>) – Figure format, defaults to None</p></li>
<li><p><strong>dpi</strong> (<em>int</em><em>, </em><em>optional</em>) – DPI for pixel-based formats, defaults to 300</p></li>
<li><p><strong>legend</strong> (<em>bool</em><em>, </em><em>optional</em>) – Should a legend be plotted, defaults to False</p></li>
<li><p><strong>plot_median</strong> (<em>bool</em><em>, </em><em>optional.</em>) – Plot the median of all dataset as a black line.
Defaults to False.</p></li>
<li><p><strong>ylim</strong> (<em>Tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em><em>, </em><em>optional</em>) – y limit, defaults to None</p></li>
<li><p><strong>xlim</strong> (<em>Tuple</em><em>[</em><em>datetime</em><em>, </em><em>datetime</em><em>]</em><em>, </em><em>optional</em>) – x limit, defaults to None</p></li>
<li><p><strong>statfilter</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – Only plot data from the station combinations with the
following codes. Given in the form
[‘net0-net0.sta0-stat1.ch0-ch1’, …]. Note that wildcards are allowed.
Defaults to None.</p></li>
<li><p><strong>plt_abs</strong> (<em>bool</em><em>, </em><em>optional</em>) – plot absolute values. Defaults to False</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="seismic-plot-plot-utils">
<h3>seismic.plot.plot_utils<a class="headerlink" href="#seismic-plot-plot-utils" title="Permalink to this heading">#</a></h3>
<p>Useful little plotting functions</p>
<span class="target" id="module-seismic.plot.plot_utils"></span><dl class="field-list">
<dt class="field-odd">copyright<span class="colon">:</span></dt>
<dd class="field-odd"><p>The SeisMIC development team (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>).</p>
</dd>
<dt class="field-even">license<span class="colon">:</span></dt>
<dd class="field-even"><blockquote>
<div><p>EUROPEAN UNION PUBLIC LICENCE v. 1.2</p>
</div></blockquote>
<p>(<a class="reference external" href="https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12">https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12</a>)</p>
</dd>
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Monday, 17th May 2021 12:25:54 pm
Last Modified: Monday, 16th January 2023 11:13:58 am</p>
<dl class="py function">
<dt class="sig sig-object py" id="seismic.plot.plot_utils.set_mpl_params">
<span class="sig-prename descclassname"><span class="pre">seismic.plot.plot_utils.</span></span><span class="sig-name descname"><span class="pre">set_mpl_params</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/plot/plot_utils.html#set_mpl_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.plot.plot_utils.set_mpl_params" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.plot.plot_utils.remove_all">
<span class="sig-prename descclassname"><span class="pre">seismic.plot.plot_utils.</span></span><span class="sig-name descname"><span class="pre">remove_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Axes</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bottom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xticks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'none'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">yticks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'none'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/plot/plot_utils.html#remove_all"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.plot.plot_utils.remove_all" title="Permalink to this definition">#</a></dt>
<dd><p>Removes all frames and ticks.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.plot.plot_utils.remove_topright">
<span class="sig-prename descclassname"><span class="pre">seismic.plot.plot_utils.</span></span><span class="sig-name descname"><span class="pre">remove_topright</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Axes</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/plot/plot_utils.html#remove_topright"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.plot.plot_utils.remove_topright" title="Permalink to this definition">#</a></dt>
<dd><p>Removes top and right border and ticks from input axes.</p>
</dd></dl>

</section>
<section id="seismic-plot-plot-spectrum">
<h3>seismic.plot.plot_spectrum<a class="headerlink" href="#seismic-plot-plot-spectrum" title="Permalink to this heading">#</a></h3>
<p>Plot spectrograms.</p>
<span class="target" id="module-seismic.plot.plot_spectrum"></span><p>Plotting specral time series.</p>
<dl class="field-list simple">
<dt class="field-odd">copyright<span class="colon">:</span></dt>
<dd class="field-odd"><p>The SeisMIC development team (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>).</p>
</dd>
<dt class="field-even">license<span class="colon">:</span></dt>
<dd class="field-even"><p>EUROPEAN UNION PUBLIC LICENCE Version 1.2
(<a class="reference external" href="https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12">https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12</a>)</p>
</dd>
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Wednesday, 21st June 2023 04:54:20 pm
Last Modified: Monday, 21st August 2023 12:22:56 pm</p>
<dl class="py function">
<dt class="sig sig-object py" id="seismic.plot.plot_spectrum.plot_spct_series">
<span class="sig-prename descclassname"><span class="pre">seismic.plot.plot_spectrum.</span></span><span class="sig-name descname"><span class="pre">plot_spct_series</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">S</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm_method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tlim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">datetime</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">datetime</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'batlow'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_scale</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Axes</span></span></span><a class="reference internal" href="../../_modules/seismic/plot/plot_spectrum.html#plot_spct_series"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.plot.plot_spectrum.plot_spct_series" title="Permalink to this definition">#</a></dt>
<dd><p>Plots a spectral series.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>S</strong> (<em>np.ndarray</em>) – A spectral series with dim=2.</p></li>
<li><p><strong>f</strong> (<em>np.ndarray</em>) – Vector containing frequencies (Hz)</p></li>
<li><p><strong>t</strong> (<em>np.ndarray</em>) – Vector containing times as UTCDateTimes</p></li>
<li><p><strong>norm</strong> (<em>str</em><em>, </em><em>optional</em>) – Normalise the spectrum either on the time axis with
norm=’t’ or on the frequency axis with norm=’f’, defaults to None.</p></li>
<li><p><strong>norm_method</strong> – Normation method to use.
Either ‘linalg’ (i.e., length of vector),
‘mean’, or ‘median’.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Plot title, defaults to None</p></li>
<li><p><strong>outfile</strong> (<em>str</em><em>, </em><em>optional</em>) – location to save the plot to, defaults to None</p></li>
<li><p><strong>fmt</strong> (<em>str</em><em>, </em><em>optional</em>) – Format to save figure, defaults to ‘pdf’</p></li>
<li><p><strong>flim</strong> (<em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em>) – Limit Frequency axis and Normalisation to the values
in the given window</p></li>
<li><p><strong>tlim</strong> (<em>Tuple</em><em>[</em><em>datetime</em><em>, </em><em>datetime</em><em>]</em>) – Limit time axis to the values in the given window</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="seismic-plot-plot-wfc">
<h3>seismic.plot.plot_wfc<a class="headerlink" href="#seismic-plot-plot-wfc" title="Permalink to this heading">#</a></h3>
<p>Plot the waveform coherence</p>
<span class="target" id="module-seismic.plot.plot_wfc"></span><dl class="field-list">
<dt class="field-odd">copyright<span class="colon">:</span></dt>
<dd class="field-odd"><blockquote>
<div><p>Module to plot waveform coherencies.</p>
</div></blockquote>
<p>The SeisMIC development team (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>).</p>
</dd>
<dt class="field-even">license<span class="colon">:</span></dt>
<dd class="field-even"><blockquote>
<div><p>EUROPEAN UNION PUBLIC LICENCE v. 1.2</p>
</div></blockquote>
<p>(<a class="reference external" href="https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12">https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12</a>)</p>
</dd>
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Monday, 8th November 2021 02:46:15 pm
Last Modified: Tuesday, 11th July 2023 01:46:20 pm</p>
<dl class="py function">
<dt class="sig sig-object py" id="seismic.plot.plot_wfc.plot_wfc_bulk">
<span class="sig-prename descclassname"><span class="pre">seismic.plot.plot_wfc.</span></span><span class="sig-name descname"><span class="pre">plot_wfc_bulk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time_lag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cfreq</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wfc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/plot/plot_wfc.html#plot_wfc_bulk"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.plot.plot_wfc.plot_wfc_bulk" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</section>
</section>
<section id="seismic-utils">
<h2>seismic.utils<a class="headerlink" href="#seismic-utils" title="Permalink to this heading">#</a></h2>
<p>Collection of tools</p>
<section id="seismic-utils-io">
<h3>seismic.utils.io<a class="headerlink" href="#seismic-utils-io" title="Permalink to this heading">#</a></h3>
<p>Load correlations produced by MIIC</p>
<span class="target" id="module-seismic.utils.io"></span><dl class="field-list simple">
<dt class="field-odd">copyright<span class="colon">:</span></dt>
<dd class="field-odd"><p>The SeisMIC development team (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>).</p>
</dd>
<dt class="field-even">license<span class="colon">:</span></dt>
<dd class="field-even"><p>GNU Lesser General Public License, Version 3
(<a class="reference external" href="https://www.gnu.org/copyleft/lesser.html">https://www.gnu.org/copyleft/lesser.html</a>)</p>
</dd>
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Thursday, 8th July 2021 10:37:21 am
Last Modified: Friday, 10th February 2023 04:09:21 pm</p>
<dl class="py function">
<dt class="sig sig-object py" id="seismic.utils.io.flatten">
<span class="sig-prename descclassname"><span class="pre">seismic.utils.io.</span></span><span class="sig-name descname"><span class="pre">flatten</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/utils/io.html#flatten"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.utils.io.flatten" title="Permalink to this definition">#</a></dt>
<dd><p>Return the flattened version of the input array x</p>
<p>This funciton works with all <code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code> that can be
nested in an irregular fashion.</p>
<dl class="field-list simple">
<dt class="field-odd">Param<span class="colon">:</span></dt>
<dd class="field-odd"><p>Iterable to be flattened</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>x as a flattened list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.utils.io.flatten_recarray">
<span class="sig-prename descclassname"><span class="pre">seismic.utils.io.</span></span><span class="sig-name descname"><span class="pre">flatten_recarray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/utils/io.html#flatten_recarray"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.utils.io.flatten_recarray" title="Permalink to this definition">#</a></dt>
<dd><p>Flatten a recarray</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.utils.io.mat_to_corrtrace">
<span class="sig-prename descclassname"><span class="pre">seismic.utils.io.</span></span><span class="sig-name descname"><span class="pre">mat_to_corrtrace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#seismic.correlate.stream.CorrTrace" title="seismic.correlate.stream.CorrTrace"><span class="pre">CorrTrace</span></a></span></span><a class="reference internal" href="../../_modules/seismic/utils/io.html#mat_to_corrtrace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.utils.io.mat_to_corrtrace" title="Permalink to this definition">#</a></dt>
<dd><p>Reads in a correlation dictionary created with the old (i.e., python2)
miic and translates it into a <a class="reference internal" href="#seismic.correlate.stream.CorrTrace" title="seismic.correlate.stream.CorrTrace"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrTrace</span></code></a>
object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mat</strong> (<em>dict</em>) – dictionary as produced by <code class="xref py py-func docutils literal notranslate"><span class="pre">scipy.io.loadmat()</span></code></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A Correlation Trace</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#seismic.correlate.stream.CorrTrace" title="seismic.correlate.stream.CorrTrace">CorrTrace</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.utils.io.corrmat_to_corrbulk">
<span class="sig-prename descclassname"><span class="pre">seismic.utils.io.</span></span><span class="sig-name descname"><span class="pre">corrmat_to_corrbulk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#seismic.correlate.stream.CorrBulk" title="seismic.correlate.stream.CorrBulk"><span class="pre">CorrBulk</span></a></span></span><a class="reference internal" href="../../_modules/seismic/utils/io.html#corrmat_to_corrbulk"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.utils.io.corrmat_to_corrbulk" title="Permalink to this definition">#</a></dt>
<dd><p>Reads in a correlation .mat file created with the old (i.e., python2)
miic and translates it into a <a class="reference internal" href="#seismic.correlate.stream.CorrTrace" title="seismic.correlate.stream.CorrTrace"><code class="xref py py-class docutils literal notranslate"><span class="pre">CorrTrace</span></code></a>
object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – Path to file</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A Correlation Bulk object</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#seismic.correlate.stream.CorrBulk" title="seismic.correlate.stream.CorrBulk">CorrBulk</a></p>
</dd>
<dt class="field-even">Warning<span class="colon">:</span></dt>
<dd class="field-even"><p>This reads both stacks and subdivisions into the same object.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="seismic-utils-fetch-func-from-str">
<h3>seismic.utils.fetch_func_from_str<a class="headerlink" href="#seismic-utils-fetch-func-from-str" title="Permalink to this heading">#</a></h3>
<p>Import and Return a function</p>
<span class="target" id="module-seismic.utils.fetch_func_from_str"></span><dl class="field-list">
<dt class="field-odd">copyright<span class="colon">:</span></dt>
<dd class="field-odd"><p>The SeisMIC development team (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>).</p>
</dd>
<dt class="field-even">license<span class="colon">:</span></dt>
<dd class="field-even"><blockquote>
<div><p>EUROPEAN UNION PUBLIC LICENCE v. 1.2</p>
</div></blockquote>
<p>(<a class="reference external" href="https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12">https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12</a>)</p>
</dd>
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Friday, 9th April 2021 04:07:06 pm
Last Modified: Monday, 16th January 2023 11:13:58 am</p>
<dl class="py function">
<dt class="sig sig-object py" id="seismic.utils.fetch_func_from_str.func_from_str">
<span class="sig-prename descclassname"><span class="pre">seismic.utils.fetch_func_from_str.</span></span><span class="sig-name descname"><span class="pre">func_from_str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Callable</span></span></span><a class="reference internal" href="../../_modules/seismic/utils/fetch_func_from_str.html#func_from_str"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.utils.fetch_func_from_str.func_from_str" title="Permalink to this definition">#</a></dt>
<dd><p>Given a full string in the form ‘module.submodule.function’. This function
imports said function and returns it, so that it can be called. The actual
function can be located in any module.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>string</strong> (<em>str</em>) – string in the form module.submodule.function</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The imported function ready to be executed</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>function</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="seismic-utils-miic-utils">
<h3>seismic.utils.miic_utils<a class="headerlink" href="#seismic-utils-miic-utils" title="Permalink to this heading">#</a></h3>
<p>Set of smaller functions.</p>
<span class="target" id="module-seismic.utils.miic_utils"></span><dl class="field-list">
<dt class="field-odd">copyright<span class="colon">:</span></dt>
<dd class="field-odd"><p>The SeisMIC development team (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>).</p>
</dd>
<dt class="field-even">license<span class="colon">:</span></dt>
<dd class="field-even"><blockquote>
<div><p>EUROPEAN UNION PUBLIC LICENCE v. 1.2</p>
</div></blockquote>
<p>(<a class="reference external" href="https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12">https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12</a>)</p>
</dd>
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Monday, 29th March 2021 12:54:05 pm
Last Modified: Wednesday, 5th April 2023 10:32:09 am</p>
<dl class="py function">
<dt class="sig sig-object py" id="seismic.utils.miic_utils.trace_calc_az_baz_dist">
<span class="sig-prename descclassname"><span class="pre">seismic.utils.miic_utils.</span></span><span class="sig-name descname"><span class="pre">trace_calc_az_baz_dist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stats1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stats</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stats</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/utils/miic_utils.html#trace_calc_az_baz_dist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.utils.miic_utils.trace_calc_az_baz_dist" title="Permalink to this definition">#</a></dt>
<dd><p>Return azimuth, back azimhut and distance between tr1 and tr2
This funtions calculates the azimut, back azimut and distance between tr1
and tr2 if both have geo information in their stats dictonary.
Required fields are:
<code class="docutils literal notranslate"><span class="pre">tr.stats.sac.stla</span></code> and <code class="docutils literal notranslate"><span class="pre">tr.stats.sac.stlo</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stats1</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Stats</span></code>) – First trace to account</p></li>
<li><p><strong>stats2</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Stats</span></code>) – Second trace to account</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>float</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>az</strong>: Azimuth angle between tr1 and tr2</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>float</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>baz</strong>: Back-azimuth angle between tr1 and tr2</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>float</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dist</strong>: Distance between tr1 and tr2 in m</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.utils.miic_utils.filter_stat_dist">
<span class="sig-prename descclassname"><span class="pre">seismic.utils.miic_utils.</span></span><span class="sig-name descname"><span class="pre">filter_stat_dist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inv1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Inventory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inv2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Inventory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thres</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../../_modules/seismic/utils/miic_utils.html#filter_stat_dist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.utils.miic_utils.filter_stat_dist" title="Permalink to this definition">#</a></dt>
<dd><p>Very simple function to check whether to stations are closer than thres
to each other.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inv1</strong> (<em>Inventory</em>) – Inventory of station 1</p></li>
<li><p><strong>inv2</strong> (<em>Inventory</em>) – Inventory of station 2</p></li>
<li><p><strong>thres</strong> (<em>float</em>) – Threshold distance in m</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if closer (or equal) than thres, False if not.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.utils.miic_utils.inv_calc_az_baz_dist">
<span class="sig-prename descclassname"><span class="pre">seismic.utils.miic_utils.</span></span><span class="sig-name descname"><span class="pre">inv_calc_az_baz_dist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inv1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Inventory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inv2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Inventory</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/utils/miic_utils.html#inv_calc_az_baz_dist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.utils.miic_utils.inv_calc_az_baz_dist" title="Permalink to this definition">#</a></dt>
<dd><p>Return azimuth, back azimuth and distance between stat1 and stat2</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tr1</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Inventory</span></code>) – First trace to account</p></li>
<li><p><strong>tr2</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Inventory</span></code>) – Second trace to account</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>float</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>az</strong>: Azimuth angle between stat1 and stat2</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>float</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>baz</strong>: Back-azimuth angle between stat2 and stat2</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>float</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dist</strong>: Distance between stat1 and stat2 in m</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.utils.miic_utils.resample_or_decimate">
<span class="sig-prename descclassname"><span class="pre">seismic.utils.miic_utils.</span></span><span class="sig-name descname"><span class="pre">resample_or_decimate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Trace</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampling_rate_new</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Stream</span></span></span><a class="reference internal" href="../../_modules/seismic/utils/miic_utils.html#resample_or_decimate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.utils.miic_utils.resample_or_decimate" title="Permalink to this definition">#</a></dt>
<dd><p>Decimates the data if the desired new sampling rate allows to do so.
Else the signal will be interpolated (a lot slower).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>Stream</em>) – Stream to be resampled.</p></li>
<li><p><strong>sampling_rate_new</strong> (<em>int</em>) – The desired new sampling rate</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The resampled stream</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Stream</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.utils.miic_utils.trim_stream_delta">
<span class="sig-prename descclassname"><span class="pre">seismic.utils.miic_utils.</span></span><span class="sig-name descname"><span class="pre">trim_stream_delta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">st</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Stream</span></span></span><a class="reference internal" href="../../_modules/seismic/utils/miic_utils.html#trim_stream_delta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.utils.miic_utils.trim_stream_delta" title="Permalink to this definition">#</a></dt>
<dd><p>Cut all traces to starttime+start and endtime-end. <em>args</em> and <em>kwargs</em> will
be passed to <code class="xref py py-func docutils literal notranslate"><span class="pre">trim()</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> (<em>Stream</em>) – Input Stream</p></li>
<li><p><strong>start</strong> (<em>float</em>) – Delta to add to old starttime (in seconds)</p></li>
<li><p><strong>end</strong> (<em>float</em>) – Delta to remove from old endtime (in seconds)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The trimmed stream</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Stream</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This operation is performed in place on the actual data arrays.
The raw data will no longer be accessible afterwards. To keep your
original data, use copy() to create a copy of your stream object.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.utils.miic_utils.trim_trace_delta">
<span class="sig-prename descclassname"><span class="pre">seismic.utils.miic_utils.</span></span><span class="sig-name descname"><span class="pre">trim_trace_delta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Trace</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Trace</span></span></span><a class="reference internal" href="../../_modules/seismic/utils/miic_utils.html#trim_trace_delta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.utils.miic_utils.trim_trace_delta" title="Permalink to this definition">#</a></dt>
<dd><p>Cut all traces to starttime+start and endtime-end. <em>args</em> and <em>kwargs</em> will
be passed to <code class="xref py py-func docutils literal notranslate"><span class="pre">trim()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> (<em>Trace</em>) – Input Trace</p></li>
<li><p><strong>start</strong> (<em>float</em>) – Delta to add to old starttime (in seconds)</p></li>
<li><p><strong>end</strong> (<em>float</em>) – Delta to remove from old endtime (in seconds)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The trimmed trace</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Trace</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This operation is performed in place on the actual data arrays.
The raw data will no longer be accessible afterwards. To keep your
original data, use copy() to create a copy of your stream object.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.utils.miic_utils.save_header_to_np_array">
<span class="sig-prename descclassname"><span class="pre">seismic.utils.miic_utils.</span></span><span class="sig-name descname"><span class="pre">save_header_to_np_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stats</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../_modules/seismic/utils/miic_utils.html#save_header_to_np_array"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.utils.miic_utils.save_header_to_np_array" title="Permalink to this definition">#</a></dt>
<dd><p>Converts an obspy header to a format that allows it to be saved in an
npz file (i.e., several gzipped npy files)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>stats</strong> (<em>Stats</em>) – input Header</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary, whose keys are the names of the arrays and the values
the arrays themselves. Can be fed into <code class="docutils literal notranslate"><span class="pre">np.savez</span></code> as <cite>**kwargs</cite></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.utils.miic_utils.load_header_from_np_array">
<span class="sig-prename descclassname"><span class="pre">seismic.utils.miic_utils.</span></span><span class="sig-name descname"><span class="pre">load_header_from_np_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../_modules/seismic/utils/miic_utils.html#load_header_from_np_array"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.utils.miic_utils.load_header_from_np_array" title="Permalink to this definition">#</a></dt>
<dd><p>Takes the <em>dictionary-like</em> return-value of <cite>np.load</cite> and converts the
corresponding keywords into an obspy header.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>array_dict</strong> (<em>dict</em>) – Return value of <cite>np.load</cite></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The obspy header as dictionary</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.utils.miic_utils.convert_utc_to_timestamp">
<span class="sig-prename descclassname"><span class="pre">seismic.utils.miic_utils.</span></span><span class="sig-name descname"><span class="pre">convert_utc_to_timestamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">utcdt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UTCDateTime</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/utils/miic_utils.html#convert_utc_to_timestamp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.utils.miic_utils.convert_utc_to_timestamp" title="Permalink to this definition">#</a></dt>
<dd><p>Converts <code class="xref py py-class docutils literal notranslate"><span class="pre">obspy.core.utcdatetime.UTCDateTime</span></code> objects to floats.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>utcdt</strong> (<em>UTCDateTimeorList</em><em>[</em><em>UTCDateTime</em><em>]</em>) – The input times, either a list of utcdatetimes or one
utcdatetime</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A numpy array of timestamps</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.utils.miic_utils.convert_timestamp_to_utcdt">
<span class="sig-prename descclassname"><span class="pre">seismic.utils.miic_utils.</span></span><span class="sig-name descname"><span class="pre">convert_timestamp_to_utcdt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">UTCDateTime</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/seismic/utils/miic_utils.html#convert_timestamp_to_utcdt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.utils.miic_utils.convert_timestamp_to_utcdt" title="Permalink to this definition">#</a></dt>
<dd><p>Converts a numpy array holding timestamps (i.e., floats) to a list of
UTCDateTime objects</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timestamp</strong> (<em>np.ndarray</em>) – numpy array holding timestamps</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a list of UTCDateTime objects</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[UTCDateTime]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.utils.miic_utils.get_valid_traces">
<span class="sig-prename descclassname"><span class="pre">seismic.utils.miic_utils.</span></span><span class="sig-name descname"><span class="pre">get_valid_traces</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">st</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stream</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/utils/miic_utils.html#get_valid_traces"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.utils.miic_utils.get_valid_traces" title="Permalink to this definition">#</a></dt>
<dd><p>Return only valid traces of a stream.</p>
<p>Remove traces that are 100% masked from a stream. This happens when
a masked trace is trimmed within a gap. The function works in place.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>st</strong> (<em>obspy.Stream</em>) – stream to work on</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.utils.miic_utils.discard_short_traces">
<span class="sig-prename descclassname"><span class="pre">seismic.utils.miic_utils.</span></span><span class="sig-name descname"><span class="pre">discard_short_traces</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">st</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/utils/miic_utils.html#discard_short_traces"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.utils.miic_utils.discard_short_traces" title="Permalink to this definition">#</a></dt>
<dd><p>Discard all traces from stream that are shorter than length.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> (<em>Stream</em>) – inputer obspy Stream</p></li>
<li><p><strong>length</strong> (<em>float</em>) – Maxixmum Length that should be discarded (in seconds).</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Action is performed in place.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.utils.miic_utils.nan_moving_av">
<span class="sig-prename descclassname"><span class="pre">seismic.utils.miic_utils.</span></span><span class="sig-name descname"><span class="pre">nan_moving_av</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">win_half_len</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/seismic/utils/miic_utils.html#nan_moving_av"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.utils.miic_utils.nan_moving_av" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a filtered version of data, disregarding the nans.
Moving mean window length is win_half_len*2+1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>np.ndarray</em>) – Array to be filtered</p></li>
<li><p><strong>win_half_len</strong> (<em>int</em>) – Half length of the boxcar filter (len = halflen*2+1)</p></li>
<li><p><strong>axis</strong> (<em>int</em><em>, </em><em>optional</em>) – Axis to filter along, defaults to -1</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The filtered array</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.utils.miic_utils.stream_require_dtype">
<span class="sig-prename descclassname"><span class="pre">seismic.utils.miic_utils.</span></span><span class="sig-name descname"><span class="pre">stream_require_dtype</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">st</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">type</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Stream</span></span></span><a class="reference internal" href="../../_modules/seismic/utils/miic_utils.html#stream_require_dtype"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.utils.miic_utils.stream_require_dtype" title="Permalink to this definition">#</a></dt>
<dd><p>Often it might make sense to change the data type of seismic data before
saving or broadcasting (e.g., to save memory). This function allows
to do so</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> (<em>Stream</em>) – input Stream</p></li>
<li><p><strong>dtype</strong> (<em>type</em>) – desired datatype, e.g. np.float32</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Stream with data in new dtype</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Stream</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This operation is performed in place.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.utils.miic_utils.correct_polarity">
<span class="sig-prename descclassname"><span class="pre">seismic.utils.miic_utils.</span></span><span class="sig-name descname"><span class="pre">correct_polarity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">st</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inv</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Inventory</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/utils/miic_utils.html#correct_polarity"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.utils.miic_utils.correct_polarity" title="Permalink to this definition">#</a></dt>
<dd><p>Sometimes the polarity of a seismometer’s vertical component is reversed.
This simple functions flips the polarity if this should be the case.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function acts on the data in-place.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> (<em>Stream</em>) – input stream. If there is no Z-component, nothing will happen.</p></li>
<li><p><strong>inv</strong> (<em>Inventory</em>) – Inventory holding the orientation information.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="seismic-utils-raw-analysis">
<h3>seismic.utils.raw_analysis<a class="headerlink" href="#seismic-utils-raw-analysis" title="Permalink to this heading">#</a></h3>
<p>Analysing raw waveform data.</p>
<span class="target" id="module-seismic.utils.raw_analysis"></span><p>Module for waveform data analysis. Contains spectrogram computation.</p>
<dl class="field-list simple">
<dt class="field-odd">copyright<span class="colon">:</span></dt>
<dd class="field-odd"><p>The SeisMIC development team (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>).</p>
</dd>
<dt class="field-even">license<span class="colon">:</span></dt>
<dd class="field-even"><p>EUROPEAN UNION PUBLIC LICENCE Version 1.2
(<a class="reference external" href="https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12">https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12</a>)</p>
</dd>
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Peter Makus (<a class="reference external" href="mailto:makus&#37;&#52;&#48;gfz-potsdam&#46;de">makus<span>&#64;</span>gfz-potsdam<span>&#46;</span>de</a>)</p>
</dd>
</dl>
<p>Created: Wednesday, 21st June 2023 12:22:00 pm
Last Modified: Thursday, 24th August 2023 10:52:44 am</p>
<dl class="py function">
<dt class="sig sig-object py" id="seismic.utils.raw_analysis.spct_series_welch">
<span class="sig-prename descclassname"><span class="pre">seismic.utils.raw_analysis.</span></span><span class="sig-name descname"><span class="pre">spct_series_welch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streams</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Stream</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freqmax</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/utils/raw_analysis.html#spct_series_welch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.utils.raw_analysis.spct_series_welch" title="Permalink to this definition">#</a></dt>
<dd><p>Computes a spectral time series. Each point in time is computed using the
welch method. Windows overlap by half the windolength. The input stream can
contain one or several traces from the same station. Frequency axis is
logarithmic.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>MPI support since version 0.4.2. Then the result is only
available on rank 0. All other ranks return None. (to save RAM)</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> (<em>Stream</em>) – Input Stream with data from one station.</p></li>
<li><p><strong>window_length</strong> (<em>int</em><em> or </em><em>float</em>) – window length in seconds for each datapoint in time</p></li>
<li><p><strong>freqmax</strong> (<em>float</em>) – maximum frequency to be considered</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Arrays containing a frequency and time series and the spectral
series.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="seismic.utils.raw_analysis.preprocess">
<span class="sig-prename descclassname"><span class="pre">seismic.utils.raw_analysis.</span></span><span class="sig-name descname"><span class="pre">preprocess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Trace</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freqmax</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/seismic/utils/raw_analysis.html#preprocess"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#seismic.utils.raw_analysis.preprocess" title="Permalink to this definition">#</a></dt>
<dd><p>Some very basic preprocessing on the string in order to plot the spectral
series. Does the following steps:
<em>1. Remove station response</em>
<em>2. Detrend</em>
<em>3. Decimate if sampling rate&gt;50</em>
<em>4. highpass filter with corner period of 300s.</em>
:param st: The input Stream, should only contain Traces from one station.
:type st: ~obspy.core.Stream
:return: The output stream and station inventory object
:rtype: ~obspy.core.Stream and ~obspy.core.Inventory</p>
</dd></dl>

</section>
</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="../API.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><code class="docutils literal notranslate"><span class="pre">SeisMIC</span></code> API</p>
      </div>
    </a>
    <a class="right-next"
       href="../tutorials.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Our tutorials: From Zero to Noise-Hero</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-trace-data">seismic.trace_data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-trace-data-waveform">seismic.trace_data.waveform</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.trace_data.waveform.Store_Client"><code class="docutils literal notranslate"><span class="pre">Store_Client</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.trace_data.waveform.Store_Client.download_waveforms_mdl"><code class="docutils literal notranslate"><span class="pre">Store_Client.download_waveforms_mdl()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.trace_data.waveform.Store_Client.get_waveforms"><code class="docutils literal notranslate"><span class="pre">Store_Client.get_waveforms()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.trace_data.waveform.Store_Client.get_available_stations"><code class="docutils literal notranslate"><span class="pre">Store_Client.get_available_stations()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.trace_data.waveform.Store_Client.read_inventory"><code class="docutils literal notranslate"><span class="pre">Store_Client.read_inventory()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.trace_data.waveform.Store_Client.select_inventory_or_load_remote"><code class="docutils literal notranslate"><span class="pre">Store_Client.select_inventory_or_load_remote()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.trace_data.waveform.Store_Client.compute_spectrogram"><code class="docutils literal notranslate"><span class="pre">Store_Client.compute_spectrogram()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.trace_data.waveform.FS_Client"><code class="docutils literal notranslate"><span class="pre">FS_Client</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.trace_data.waveform.FS_Client.get_waveforms"><code class="docutils literal notranslate"><span class="pre">FS_Client.get_waveforms()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.trace_data.waveform.read_from_filesystem"><code class="docutils literal notranslate"><span class="pre">read_from_filesystem()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.trace_data.waveform.get_day_in_folder"><code class="docutils literal notranslate"><span class="pre">get_day_in_folder()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-correlate">seismic.correlate</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-correlate-correlate">seismic.correlate.correlate</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.correlate.Correlator"><code class="docutils literal notranslate"><span class="pre">Correlator</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.correlate.Correlator.find_interstat_dist"><code class="docutils literal notranslate"><span class="pre">Correlator.find_interstat_dist()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.correlate.Correlator.find_existing_times"><code class="docutils literal notranslate"><span class="pre">Correlator.find_existing_times()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.correlate.Correlator.pxcorr"><code class="docutils literal notranslate"><span class="pre">Correlator.pxcorr()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.correlate.st_to_np_array"><code class="docutils literal notranslate"><span class="pre">st_to_np_array()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.correlate.calc_cross_combis"><code class="docutils literal notranslate"><span class="pre">calc_cross_combis()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.correlate.sort_comb_name_alphabetically"><code class="docutils literal notranslate"><span class="pre">sort_comb_name_alphabetically()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.correlate.compute_network_station_combinations"><code class="docutils literal notranslate"><span class="pre">compute_network_station_combinations()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.correlate.preprocess_stream"><code class="docutils literal notranslate"><span class="pre">preprocess_stream()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.correlate.generate_corr_inc"><code class="docutils literal notranslate"><span class="pre">generate_corr_inc()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-correlate-stream">seismic.correlate.stream</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrBulk"><code class="docutils literal notranslate"><span class="pre">CorrBulk</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrBulk.plot"><code class="docutils literal notranslate"><span class="pre">CorrBulk.plot()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrBulk.normalize"><code class="docutils literal notranslate"><span class="pre">CorrBulk.normalize()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrBulk.clip"><code class="docutils literal notranslate"><span class="pre">CorrBulk.clip()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrBulk.copy"><code class="docutils literal notranslate"><span class="pre">CorrBulk.copy()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrBulk.correct_decay"><code class="docutils literal notranslate"><span class="pre">CorrBulk.correct_decay()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrBulk.correct_stretch"><code class="docutils literal notranslate"><span class="pre">CorrBulk.correct_stretch()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrBulk.correct_shift"><code class="docutils literal notranslate"><span class="pre">CorrBulk.correct_shift()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrBulk.create_corr_stream"><code class="docutils literal notranslate"><span class="pre">CorrBulk.create_corr_stream()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrBulk.envelope"><code class="docutils literal notranslate"><span class="pre">CorrBulk.envelope()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrBulk.filter"><code class="docutils literal notranslate"><span class="pre">CorrBulk.filter()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrBulk.extract_trace"><code class="docutils literal notranslate"><span class="pre">CorrBulk.extract_trace()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrBulk.extract_multi_trace"><code class="docutils literal notranslate"><span class="pre">CorrBulk.extract_multi_trace()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrBulk.find_clock_shift"><code class="docutils literal notranslate"><span class="pre">CorrBulk.find_clock_shift()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrBulk.measure_shift"><code class="docutils literal notranslate"><span class="pre">CorrBulk.measure_shift()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrBulk.mirror"><code class="docutils literal notranslate"><span class="pre">CorrBulk.mirror()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrBulk.resample"><code class="docutils literal notranslate"><span class="pre">CorrBulk.resample()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrBulk.resample_time_axis"><code class="docutils literal notranslate"><span class="pre">CorrBulk.resample_time_axis()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrBulk.smooth"><code class="docutils literal notranslate"><span class="pre">CorrBulk.smooth()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrBulk.stretch"><code class="docutils literal notranslate"><span class="pre">CorrBulk.stretch()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrBulk.save"><code class="docutils literal notranslate"><span class="pre">CorrBulk.save()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrBulk.slice"><code class="docutils literal notranslate"><span class="pre">CorrBulk.slice()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrBulk.taper"><code class="docutils literal notranslate"><span class="pre">CorrBulk.taper()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrBulk.taper_center"><code class="docutils literal notranslate"><span class="pre">CorrBulk.taper_center()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrBulk.trim"><code class="docutils literal notranslate"><span class="pre">CorrBulk.trim()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrBulk.wfc"><code class="docutils literal notranslate"><span class="pre">CorrBulk.wfc()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.read_corr_bulk"><code class="docutils literal notranslate"><span class="pre">read_corr_bulk()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrStream"><code class="docutils literal notranslate"><span class="pre">CorrStream</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrStream.create_corr_bulk"><code class="docutils literal notranslate"><span class="pre">CorrStream.create_corr_bulk()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrStream.plot"><code class="docutils literal notranslate"><span class="pre">CorrStream.plot()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrStream.pop_at_utcs"><code class="docutils literal notranslate"><span class="pre">CorrStream.pop_at_utcs()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrStream.remove_duplicates"><code class="docutils literal notranslate"><span class="pre">CorrStream.remove_duplicates()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrStream.select_corr_time"><code class="docutils literal notranslate"><span class="pre">CorrStream.select_corr_time()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrStream.slide"><code class="docutils literal notranslate"><span class="pre">CorrStream.slide()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrStream.stack"><code class="docutils literal notranslate"><span class="pre">CorrStream.stack()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrTrace"><code class="docutils literal notranslate"><span class="pre">CorrTrace</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrTrace.plot"><code class="docutils literal notranslate"><span class="pre">CorrTrace.plot()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.CorrTrace.times"><code class="docutils literal notranslate"><span class="pre">CorrTrace.times()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.alphabetical_correlation"><code class="docutils literal notranslate"><span class="pre">alphabetical_correlation()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.combine_stats"><code class="docutils literal notranslate"><span class="pre">combine_stats()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.compare_tr_id"><code class="docutils literal notranslate"><span class="pre">compare_tr_id()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.stack_st_by_group"><code class="docutils literal notranslate"><span class="pre">stack_st_by_group()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.stack_st"><code class="docutils literal notranslate"><span class="pre">stack_st()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stream.convert_statlist_to_bulk_stats"><code class="docutils literal notranslate"><span class="pre">convert_statlist_to_bulk_stats()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-correlate-stats">seismic.correlate.stats</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stats.CorrStats"><code class="docutils literal notranslate"><span class="pre">CorrStats</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stats.CorrStats.readonly"><code class="docutils literal notranslate"><span class="pre">CorrStats.readonly</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.stats.CorrStats.defaults"><code class="docutils literal notranslate"><span class="pre">CorrStats.defaults</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-correlate-preprocessing-stream">seismic.correlate.preprocessing_stream</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.preprocessing_stream.cos_taper_st"><code class="docutils literal notranslate"><span class="pre">cos_taper_st()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.preprocessing_stream.cos_taper"><code class="docutils literal notranslate"><span class="pre">cos_taper()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.preprocessing_stream.detrend_st"><code class="docutils literal notranslate"><span class="pre">detrend_st()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.preprocessing_stream.stream_filter"><code class="docutils literal notranslate"><span class="pre">stream_filter()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.preprocessing_stream.stream_mask_at_utc"><code class="docutils literal notranslate"><span class="pre">stream_mask_at_utc()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.preprocessing_stream.trace_mask_at_utc"><code class="docutils literal notranslate"><span class="pre">trace_mask_at_utc()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-correlate-preprocessing-td">seismic.correlate.preprocessing_td</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.preprocessing_td.clip"><code class="docutils literal notranslate"><span class="pre">clip()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.preprocessing_td.detrend"><code class="docutils literal notranslate"><span class="pre">detrend()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.preprocessing_td.detrend_scipy"><code class="docutils literal notranslate"><span class="pre">detrend_scipy()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.preprocessing_td.detrendqr"><code class="docutils literal notranslate"><span class="pre">detrendqr()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.preprocessing_td.demean"><code class="docutils literal notranslate"><span class="pre">demean()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.preprocessing_td.mute"><code class="docutils literal notranslate"><span class="pre">mute()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.preprocessing_td.normalizeStandardDeviation"><code class="docutils literal notranslate"><span class="pre">normalizeStandardDeviation()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.preprocessing_td.signBitNormalization"><code class="docutils literal notranslate"><span class="pre">signBitNormalization()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.preprocessing_td.taper"><code class="docutils literal notranslate"><span class="pre">taper()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.preprocessing_td.TDnormalization"><code class="docutils literal notranslate"><span class="pre">TDnormalization()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.preprocessing_td.TDfilter"><code class="docutils literal notranslate"><span class="pre">TDfilter()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.preprocessing_td.zeroPadding"><code class="docutils literal notranslate"><span class="pre">zeroPadding()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-correlate-preprocessing-fd">seismic.correlate.preprocessing_fd</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.preprocessing_fd.FDfilter"><code class="docutils literal notranslate"><span class="pre">FDfilter()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.preprocessing_fd.FDsignBitNormalization"><code class="docutils literal notranslate"><span class="pre">FDsignBitNormalization()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.correlate.preprocessing_fd.spectralWhitening"><code class="docutils literal notranslate"><span class="pre">spectralWhitening()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-db">seismic.db</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-db-corr-hdf5">seismic.db.corr_hdf5</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.db.corr_hdf5.DBHandler"><code class="docutils literal notranslate"><span class="pre">DBHandler</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.db.corr_hdf5.DBHandler.add_corr_options"><code class="docutils literal notranslate"><span class="pre">DBHandler.add_corr_options()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.db.corr_hdf5.DBHandler.add_correlation"><code class="docutils literal notranslate"><span class="pre">DBHandler.add_correlation()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.db.corr_hdf5.DBHandler.get_corr_options"><code class="docutils literal notranslate"><span class="pre">DBHandler.get_corr_options()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.db.corr_hdf5.DBHandler.get_data"><code class="docutils literal notranslate"><span class="pre">DBHandler.get_data()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.db.corr_hdf5.DBHandler.get_available_starttimes"><code class="docutils literal notranslate"><span class="pre">DBHandler.get_available_starttimes()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.db.corr_hdf5.DBHandler.get_available_channels"><code class="docutils literal notranslate"><span class="pre">DBHandler.get_available_channels()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.db.corr_hdf5.CorrelationDataBase"><code class="docutils literal notranslate"><span class="pre">CorrelationDataBase</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.db.corr_hdf5.all_traces_recursive"><code class="docutils literal notranslate"><span class="pre">all_traces_recursive()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.db.corr_hdf5.convert_header_to_hdf5"><code class="docutils literal notranslate"><span class="pre">convert_header_to_hdf5()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.db.corr_hdf5.read_hdf5_header"><code class="docutils literal notranslate"><span class="pre">read_hdf5_header()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.db.corr_hdf5.co_to_hdf5"><code class="docutils literal notranslate"><span class="pre">co_to_hdf5()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-monitor">seismic.monitor</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-monitor-monitor">seismic.monitor.monitor</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.monitor.Monitor"><code class="docutils literal notranslate"><span class="pre">Monitor</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.monitor.Monitor.compute_velocity_change"><code class="docutils literal notranslate"><span class="pre">Monitor.compute_velocity_change()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.monitor.Monitor.compute_velocity_change_bulk"><code class="docutils literal notranslate"><span class="pre">Monitor.compute_velocity_change_bulk()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.monitor.Monitor.compute_components_average"><code class="docutils literal notranslate"><span class="pre">Monitor.compute_components_average()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.monitor.Monitor.compute_waveform_coherence_bulk"><code class="docutils literal notranslate"><span class="pre">Monitor.compute_waveform_coherence_bulk()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.monitor.Monitor.compute_waveform_coherence"><code class="docutils literal notranslate"><span class="pre">Monitor.compute_waveform_coherence()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.monitor.make_time_list"><code class="docutils literal notranslate"><span class="pre">make_time_list()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.monitor.corr_find_filter"><code class="docutils literal notranslate"><span class="pre">corr_find_filter()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.monitor.correct_dv_shift"><code class="docutils literal notranslate"><span class="pre">correct_dv_shift()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.monitor.correct_time_shift_several"><code class="docutils literal notranslate"><span class="pre">correct_time_shift_several()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.monitor.average_components_mem_save"><code class="docutils literal notranslate"><span class="pre">average_components_mem_save()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.monitor.average_components"><code class="docutils literal notranslate"><span class="pre">average_components()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.monitor.average_dvs_by_coords"><code class="docutils literal notranslate"><span class="pre">average_dvs_by_coords()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.monitor.average_components_wfc"><code class="docutils literal notranslate"><span class="pre">average_components_wfc()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-monitor-dv">seismic.monitor.dv</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.dv.DV"><code class="docutils literal notranslate"><span class="pre">DV</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.dv.DV.save"><code class="docutils literal notranslate"><span class="pre">DV.save()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.dv.DV.plot"><code class="docutils literal notranslate"><span class="pre">DV.plot()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.dv.DV.smooth_sim_mat"><code class="docutils literal notranslate"><span class="pre">DV.smooth_sim_mat()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.dv.read_dv"><code class="docutils literal notranslate"><span class="pre">read_dv()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-monitor-spatial">seismic.monitor.spatial</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.spatial.probability"><code class="docutils literal notranslate"><span class="pre">probability()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.spatial.compute_grid_dist"><code class="docutils literal notranslate"><span class="pre">compute_grid_dist()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.spatial.sensitivity_kernel"><code class="docutils literal notranslate"><span class="pre">sensitivity_kernel()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.spatial.data_variance"><code class="docutils literal notranslate"><span class="pre">data_variance()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.spatial.compute_cm"><code class="docutils literal notranslate"><span class="pre">compute_cm()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.spatial.geo2cart"><code class="docutils literal notranslate"><span class="pre">geo2cart()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.spatial.DVGrid"><code class="docutils literal notranslate"><span class="pre">DVGrid</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.spatial.DVGrid.forward_model"><code class="docutils literal notranslate"><span class="pre">DVGrid.forward_model()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.spatial.DVGrid.compute_dv_grid"><code class="docutils literal notranslate"><span class="pre">DVGrid.compute_dv_grid()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.spatial.DVGrid.compute_resolution"><code class="docutils literal notranslate"><span class="pre">DVGrid.compute_resolution()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.spatial.DVGrid.plot"><code class="docutils literal notranslate"><span class="pre">DVGrid.plot()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-monitor-wfc">seismic.monitor.wfc</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.wfc.WFC"><code class="docutils literal notranslate"><span class="pre">WFC</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.wfc.WFC.compute_average"><code class="docutils literal notranslate"><span class="pre">WFC.compute_average()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.wfc.WFC.save"><code class="docutils literal notranslate"><span class="pre">WFC.save()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.wfc.WFCBulk"><code class="docutils literal notranslate"><span class="pre">WFCBulk</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.wfc.WFCBulk.plot"><code class="docutils literal notranslate"><span class="pre">WFCBulk.plot()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.wfc.read_wfc"><code class="docutils literal notranslate"><span class="pre">read_wfc()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-monitor-post-corr-process">seismic.monitor.post_corr_process</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.post_corr_process.corr_mat_clip"><code class="docutils literal notranslate"><span class="pre">corr_mat_clip()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.post_corr_process.corr_mat_smooth"><code class="docutils literal notranslate"><span class="pre">corr_mat_smooth()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.post_corr_process.unicode_to_string"><code class="docutils literal notranslate"><span class="pre">unicode_to_string()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.post_corr_process.corr_mat_filter"><code class="docutils literal notranslate"><span class="pre">corr_mat_filter()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.post_corr_process.corr_mat_resample"><code class="docutils literal notranslate"><span class="pre">corr_mat_resample()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.post_corr_process.corr_mat_correct_decay"><code class="docutils literal notranslate"><span class="pre">corr_mat_correct_decay()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.post_corr_process.corr_mat_envelope"><code class="docutils literal notranslate"><span class="pre">corr_mat_envelope()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.post_corr_process.corr_mat_normalize"><code class="docutils literal notranslate"><span class="pre">corr_mat_normalize()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.post_corr_process.corr_mat_mirror"><code class="docutils literal notranslate"><span class="pre">corr_mat_mirror()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.post_corr_process.corr_mat_taper"><code class="docutils literal notranslate"><span class="pre">corr_mat_taper()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.post_corr_process.corr_mat_taper_center"><code class="docutils literal notranslate"><span class="pre">corr_mat_taper_center()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.post_corr_process.corr_mat_resample_time"><code class="docutils literal notranslate"><span class="pre">corr_mat_resample_time()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.post_corr_process.corr_mat_decimate"><code class="docutils literal notranslate"><span class="pre">corr_mat_decimate()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.post_corr_process.corr_mat_resample_or_decimate"><code class="docutils literal notranslate"><span class="pre">corr_mat_resample_or_decimate()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.post_corr_process.corr_mat_extract_trace"><code class="docutils literal notranslate"><span class="pre">corr_mat_extract_trace()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.post_corr_process.Error"><code class="docutils literal notranslate"><span class="pre">Error</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.post_corr_process.InputError"><code class="docutils literal notranslate"><span class="pre">InputError</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.post_corr_process.corr_mat_stretch"><code class="docutils literal notranslate"><span class="pre">corr_mat_stretch()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.post_corr_process.corr_mat_shift"><code class="docutils literal notranslate"><span class="pre">corr_mat_shift()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.post_corr_process.measure_shift"><code class="docutils literal notranslate"><span class="pre">measure_shift()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.post_corr_process.apply_shift"><code class="docutils literal notranslate"><span class="pre">apply_shift()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.post_corr_process.apply_stretch"><code class="docutils literal notranslate"><span class="pre">apply_stretch()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-monitor-stretch-mod">seismic.monitor.stretch_mod</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.stretch_mod.time_windows_creation"><code class="docutils literal notranslate"><span class="pre">time_windows_creation()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.stretch_mod.compute_wfc"><code class="docutils literal notranslate"><span class="pre">compute_wfc()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.stretch_mod.wfc_multi_reftr"><code class="docutils literal notranslate"><span class="pre">wfc_multi_reftr()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.stretch_mod.velocity_change_estimate"><code class="docutils literal notranslate"><span class="pre">velocity_change_estimate()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.stretch_mod.time_stretch_estimate"><code class="docutils literal notranslate"><span class="pre">time_stretch_estimate()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.stretch_mod.multi_ref_vchange"><code class="docutils literal notranslate"><span class="pre">multi_ref_vchange()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.stretch_mod.est_shift_from_dt_corr"><code class="docutils literal notranslate"><span class="pre">est_shift_from_dt_corr()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.stretch_mod.estimate_reftr_shifts_from_dt_corr"><code class="docutils literal notranslate"><span class="pre">estimate_reftr_shifts_from_dt_corr()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.stretch_mod.multi_ref_vchange_and_align"><code class="docutils literal notranslate"><span class="pre">multi_ref_vchange_and_align()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.stretch_mod.time_shift_estimate"><code class="docutils literal notranslate"><span class="pre">time_shift_estimate()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.stretch_mod.time_shift_apply"><code class="docutils literal notranslate"><span class="pre">time_shift_apply()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.stretch_mod.time_stretch_apply"><code class="docutils literal notranslate"><span class="pre">time_stretch_apply()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.stretch_mod.create_shifted_ref_mat"><code class="docutils literal notranslate"><span class="pre">create_shifted_ref_mat()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.stretch_mod.compare_with_modified_reference"><code class="docutils literal notranslate"><span class="pre">compare_with_modified_reference()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-monitor-trim">seismic.monitor.trim</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.monitor.trim.corr_mat_trim"><code class="docutils literal notranslate"><span class="pre">corr_mat_trim()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-plot">seismic.plot</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-plot-plot-correlation">seismic.plot.plot_correlation</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.plot.plot_correlation.plot_ctr"><code class="docutils literal notranslate"><span class="pre">plot_ctr()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.plot.plot_correlation.plot_cst"><code class="docutils literal notranslate"><span class="pre">plot_cst()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.plot.plot_correlation.plot_corr_bulk"><code class="docutils literal notranslate"><span class="pre">plot_corr_bulk()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.plot.plot_correlation.sect_plot_corr_start"><code class="docutils literal notranslate"><span class="pre">sect_plot_corr_start()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.plot.plot_correlation.heat_plot_corr_start"><code class="docutils literal notranslate"><span class="pre">heat_plot_corr_start()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.plot.plot_correlation.sect_plot_dist"><code class="docutils literal notranslate"><span class="pre">sect_plot_dist()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.plot.plot_correlation.heat_plot_corr_dist"><code class="docutils literal notranslate"><span class="pre">heat_plot_corr_dist()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-plot-plot-dv">seismic.plot.plot_dv</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.plot.plot_dv.plot_fancy_dv"><code class="docutils literal notranslate"><span class="pre">plot_fancy_dv()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.plot.plot_dv.plot_technical_dv"><code class="docutils literal notranslate"><span class="pre">plot_technical_dv()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.plot.plot_dv.plot_dv"><code class="docutils literal notranslate"><span class="pre">plot_dv()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-plot-plot-multidv">seismic.plot.plot_multidv</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.plot.plot_multidv.plot_multiple_dv"><code class="docutils literal notranslate"><span class="pre">plot_multiple_dv()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-plot-plot-utils">seismic.plot.plot_utils</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.plot.plot_utils.set_mpl_params"><code class="docutils literal notranslate"><span class="pre">set_mpl_params()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.plot.plot_utils.remove_all"><code class="docutils literal notranslate"><span class="pre">remove_all()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.plot.plot_utils.remove_topright"><code class="docutils literal notranslate"><span class="pre">remove_topright()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-plot-plot-spectrum">seismic.plot.plot_spectrum</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.plot.plot_spectrum.plot_spct_series"><code class="docutils literal notranslate"><span class="pre">plot_spct_series()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-plot-plot-wfc">seismic.plot.plot_wfc</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.plot.plot_wfc.plot_wfc_bulk"><code class="docutils literal notranslate"><span class="pre">plot_wfc_bulk()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-utils">seismic.utils</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-utils-io">seismic.utils.io</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.utils.io.flatten"><code class="docutils literal notranslate"><span class="pre">flatten()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.utils.io.flatten_recarray"><code class="docutils literal notranslate"><span class="pre">flatten_recarray()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.utils.io.mat_to_corrtrace"><code class="docutils literal notranslate"><span class="pre">mat_to_corrtrace()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.utils.io.corrmat_to_corrbulk"><code class="docutils literal notranslate"><span class="pre">corrmat_to_corrbulk()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-utils-fetch-func-from-str">seismic.utils.fetch_func_from_str</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.utils.fetch_func_from_str.func_from_str"><code class="docutils literal notranslate"><span class="pre">func_from_str()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-utils-miic-utils">seismic.utils.miic_utils</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.utils.miic_utils.trace_calc_az_baz_dist"><code class="docutils literal notranslate"><span class="pre">trace_calc_az_baz_dist()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.utils.miic_utils.filter_stat_dist"><code class="docutils literal notranslate"><span class="pre">filter_stat_dist()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.utils.miic_utils.inv_calc_az_baz_dist"><code class="docutils literal notranslate"><span class="pre">inv_calc_az_baz_dist()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.utils.miic_utils.resample_or_decimate"><code class="docutils literal notranslate"><span class="pre">resample_or_decimate()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.utils.miic_utils.trim_stream_delta"><code class="docutils literal notranslate"><span class="pre">trim_stream_delta()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.utils.miic_utils.trim_trace_delta"><code class="docutils literal notranslate"><span class="pre">trim_trace_delta()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.utils.miic_utils.save_header_to_np_array"><code class="docutils literal notranslate"><span class="pre">save_header_to_np_array()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.utils.miic_utils.load_header_from_np_array"><code class="docutils literal notranslate"><span class="pre">load_header_from_np_array()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.utils.miic_utils.convert_utc_to_timestamp"><code class="docutils literal notranslate"><span class="pre">convert_utc_to_timestamp()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.utils.miic_utils.convert_timestamp_to_utcdt"><code class="docutils literal notranslate"><span class="pre">convert_timestamp_to_utcdt()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.utils.miic_utils.get_valid_traces"><code class="docutils literal notranslate"><span class="pre">get_valid_traces()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.utils.miic_utils.discard_short_traces"><code class="docutils literal notranslate"><span class="pre">discard_short_traces()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.utils.miic_utils.nan_moving_av"><code class="docutils literal notranslate"><span class="pre">nan_moving_av()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.utils.miic_utils.stream_require_dtype"><code class="docutils literal notranslate"><span class="pre">stream_require_dtype()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.utils.miic_utils.correct_polarity"><code class="docutils literal notranslate"><span class="pre">correct_polarity()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic-utils-raw-analysis">seismic.utils.raw_analysis</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.utils.raw_analysis.spct_series_welch"><code class="docutils literal notranslate"><span class="pre">spct_series_welch()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seismic.utils.raw_analysis.preprocess"><code class="docutils literal notranslate"><span class="pre">preprocess()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div class="tocsection sourcelink">
    <a href="../../_sources/modules/API/API.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
      © Copyright 2023, The SeisMIC development team..
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>