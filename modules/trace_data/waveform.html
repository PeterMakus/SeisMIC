
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Module to Download and Read Waveform Data &#8212; SeisMIC</title>
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Compute and Handle Correlations" href="../correlate.html" />
    <link rel="prev" title="Trace data" href="../trace_data.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    <p class="title logo__title">SeisMIC</p>
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../intro.html">
  Introduction: Noise Interferometry with Green’s Function Retrieval
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../get_started.html">
  Getting Started with SeisMIC
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../trace_data.html">
  Trace data
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../correlate.html">
  Compute and Handle Correlations
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../corrdb.html">
  Save and Load Correlations
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../monitor.html">
  Monitor Velocity Changes
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../API.html">
  <code class="docutils literal notranslate">
   <span class="pre">
    SeisMIC
   </span>
  </code>
  API
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/PeterMakus/SeisMIC" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Contents:
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Module to Download and Read Waveform Data
  </a>
 </li>
</ul>

  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
      
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#download-data">
   Download Data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#access-data">
   Access Data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#getting-an-overview-of-your-database">
     Getting an overview of your database
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
    </div>
    
    <div class="toc-item">
      

<div class="tocsection editthispage">
    <a href="https://github.com/PeterMakus/SeisMIC/edit/main/docs/modules/trace_data/waveform.rst">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <div class="mermaid">
            %%{init: { 'logLevel': 'debug', 'theme': 'base' } }%%
graph LR
    waveform[Get Data]:::active --&gt; correlate(Correlation)
    correlate --&gt;|save| corrdb[(CorrDB/hdf5)]
    corrdb --&gt; monitor
    monitor[Measure dv] --&gt;|save| dv{{DV}}
    click waveform &quot;../trace_data.html&quot; &quot;trace_data&quot;
    click correlate &quot;../correlate.html&quot; &quot;correlate&quot;
    click monitor &quot;../monitor.html&quot; &quot;monitor&quot;
    click corrdb &quot;../corrdb.html&quot; &quot;CorrDB&quot;
    click dv &quot;../monitor/dv.html&quot; &quot;DV&quot;
    classDef active fill:#f666, stroke-width:4px, stroke:#f06;
        </div><section id="module-to-download-and-read-waveform-data">
<h1>Module to Download and Read Waveform Data<a class="headerlink" href="#module-to-download-and-read-waveform-data" title="Permalink to this heading">#</a></h1>
<p>The waveform module contains functions and classes that allow to read waveforms from a local database
or download waveform data from <em>FDSN servers</em> by using the <a class="reference external" href="https://docs.obspy.org/packages/autogen/obspy.clients.fdsn.mass_downloader.html">Obspy Mass Downloader</a>.
The downloaded data will then be written in a <em>seiscom data structure (SDS)</em>.
Both data download and management of the raw database are handled using a <a class="reference internal" href="../API.html#seismic.trace_data.waveform.Store_Client" title="seismic.trace_data.waveform.Store_Client"><code class="xref py py-class docutils literal notranslate"><span class="pre">Store_Client</span></code></a> object.</p>
<section id="download-data">
<h2>Download Data<a class="headerlink" href="#download-data" title="Permalink to this heading">#</a></h2>
<p>The recommended way to download continuous data for noise correlations is the method
<a class="reference internal" href="../API.html#seismic.trace_data.waveform.Store_Client.download_waveforms_mdl" title="seismic.trace_data.waveform.Store_Client.download_waveforms_mdl"><code class="xref py py-func docutils literal notranslate"><span class="pre">download_waveforms_mdl()</span></code></a>. To use this method, we first need to initialise a <a class="reference internal" href="../API.html#seismic.trace_data.waveform.Store_Client" title="seismic.trace_data.waveform.Store_Client"><code class="xref py py-class docutils literal notranslate"><span class="pre">Store_Client</span></code></a> object.
The code block below shows and example for downloading data from the <strong>IU.HRV</strong> station.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">obspy.clients.fdsn</span> <span class="kn">import</span> <span class="n">Client</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">obspy</span> <span class="kn">import</span> <span class="n">UTCDateTime</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="kn">from</span> <span class="nn">seismic.trace_data.waveform</span> <span class="kn">import</span> <span class="n">Store_Client</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="n">root</span> <span class="o">=</span> <span class="s1">&#39;/path/to/project/&#39;</span>
<span class="linenos"> 7</span><span class="n">starttime</span> <span class="o">=</span> <span class="n">UTCDateTime</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">1990</span><span class="p">,</span> <span class="n">julday</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos"> 8</span><span class="n">endtime</span> <span class="o">=</span> <span class="n">UTCDateTime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="linenos"> 9</span><span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;IU&#39;</span>
<span class="linenos">10</span><span class="n">station</span> <span class="o">=</span> <span class="s1">&#39;HRV&#39;</span>
<span class="linenos">11</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="n">c</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="linenos">14</span><span class="n">sc</span> <span class="o">=</span> <span class="n">Store_Client</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">root</span><span class="p">,</span> <span class="n">read_only</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="linenos">15</span><span class="n">sc</span><span class="o">.</span><span class="n">download_waveforms_mdl</span><span class="p">(</span>
<span class="linenos">16</span>    <span class="n">starttime</span><span class="p">,</span> <span class="n">endtime</span><span class="p">,</span> <span class="n">clients</span><span class="o">=</span><span class="p">[</span><span class="n">c</span><span class="p">],</span> <span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">,</span>
<span class="linenos">17</span>    <span class="n">station</span><span class="o">=</span><span class="n">station</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Instead of defining station and network codes, we could have used geographical coordinates
to decide which stations to download. To do that, define the parameters <code class="docutils literal notranslate"><span class="pre">minlon</span></code>, <code class="docutils literal notranslate"><span class="pre">maxlon</span></code>,
<code class="docutils literal notranslate"><span class="pre">minlat</span></code>, and <code class="docutils literal notranslate"><span class="pre">maxlat</span></code>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="../API.html#seismic.trace_data.waveform.Store_Client.download_waveforms_mdl" title="seismic.trace_data.waveform.Store_Client.download_waveforms_mdl"><code class="xref py py-func docutils literal notranslate"><span class="pre">download_waveforms_mdl()</span></code></a> requires a list as input
of clients.</p>
</div>
</section>
<section id="access-data">
<h2>Access Data<a class="headerlink" href="#access-data" title="Permalink to this heading">#</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you just want to compute some noise correlations (i.e., Green’s function estimations), you
might not need this section.</p>
</div>
<p>Now, that we downloaded some waveform data, we might want to access it. This can as well be realised
using <a class="reference internal" href="../API.html#seismic.trace_data.waveform.Store_Client" title="seismic.trace_data.waveform.Store_Client"><code class="xref py py-class docutils literal notranslate"><span class="pre">Store_Client</span></code></a>. In general, seismic data comes in two parts:
The waveform data in <em>.mseed</em> format and the Station Response information in <em>XML</em> format.
<a class="reference internal" href="../API.html#seismic.trace_data.waveform.Store_Client" title="seismic.trace_data.waveform.Store_Client"><code class="xref py py-class docutils literal notranslate"><span class="pre">Store_Client</span></code></a> comes with several methods to fetch the two. There
are methods that will only read local data and methods that will check whether data is available locally
and, if not, download them from remote (i.e., the FDSN server that we defined when initialising the
<a class="reference internal" href="../API.html#seismic.trace_data.waveform.Store_Client" title="seismic.trace_data.waveform.Store_Client"><code class="xref py py-class docutils literal notranslate"><span class="pre">Store_Client</span></code></a> object).</p>
<dl class="simple">
<dt>To access only already available data use:</dt><dd><ul class="simple">
<li><p>response information:</p>
<ul>
<li><p><a class="reference internal" href="../API.html#seismic.trace_data.waveform.Store_Client.read_inventory" title="seismic.trace_data.waveform.Store_Client.read_inventory"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_inventory()</span></code></a> to read all available response information.</p></li>
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">inventory</span></code> to access the pythonic inventory object
(see <a class="reference external" href="https://docs.obspy.org/packages/autogen/obspy.core.inventory.inventory.Inventory.html">obspy’s documentation</a> for available methods)</p></li>
</ul>
</li>
<li><p>waveform data:</p>
<ul>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">_load_local()</span></code> to load local data</p></li>
</ul>
</li>
</ul>
</dd>
<dt>If you would like to download missing data, use the following methods:</dt><dd><ul class="simple">
<li><p>Response Information:</p>
<ul>
<li><p><a class="reference internal" href="../API.html#seismic.trace_data.waveform.Store_Client.select_inventory_or_load_remote" title="seismic.trace_data.waveform.Store_Client.select_inventory_or_load_remote"><code class="xref py py-func docutils literal notranslate"><span class="pre">select_inventory_or_load_remote()</span></code></a></p></li>
</ul>
</li>
<li><p>waveform data:</p>
<ul>
<li><p><a class="reference internal" href="../API.html#seismic.trace_data.waveform.Store_Client.get_waveforms" title="seismic.trace_data.waveform.Store_Client.get_waveforms"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_waveforms()</span></code></a></p></li>
</ul>
</li>
</ul>
</dd>
</dl>
<section id="getting-an-overview-of-your-database">
<h3>Getting an overview of your database<a class="headerlink" href="#getting-an-overview-of-your-database" title="Permalink to this heading">#</a></h3>
<p>Once your database grows in size, you might not exactly know anymore, which data you have available.
There are a couple of functions to help you:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt><a class="reference internal" href="../API.html#seismic.trace_data.waveform.Store_Client.get_available_stations" title="seismic.trace_data.waveform.Store_Client.get_available_stations"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_available_stations()</span></code></a> returns all codes of stations</dt><dd><p>for which data is available (a network may or may not be defined).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">_get_times()</span></code> returns the earliest and latest available</dt><dd><p>starttimes for a certain station.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</section>
</section>
</section>


              </article>
              

              
              <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="../trace_data.html" title="previous page">
      <i class="fas fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">Trace data</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="../correlate.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">Compute and Handle Correlations</p>
  </div>
  <i class="fas fa-angle-right"></i>
  </a>
</div>
              </footer>
              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright 2022, The SeisMIC development team..<br>
</p>
  </div>
  
  <div class="footer-item">
    <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.0.1.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>